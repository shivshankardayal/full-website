<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>14. Diagnostics &lt;assert.h&gt; &mdash; C99  documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="C99  documentation" href="../" />
    <link rel="next" title="15. Complex arithmetic &lt;complex.h&gt;" href="../complex/" />
    <link rel="prev" title="13. The C Standard Library" href="../std/" />
<script src="../_static/analytics.js" type="text/javascript"></script>
<link rel="stylesheet" href="../../../css/math.css" type="text/css" />

  </head>
  <body>




  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">Home</a>
        <a class="navbar-brand" href="../">
          C99</a>
        <span class="navbar-text navbar-version pull-left"><b>0.2</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics/">2. Basics of C</a></li>
<li class="toctree-l1"><a class="reference internal" href="../io/">3. Console I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../oae/">4. Operators and Expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cf/">5. Control Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ap/">6. Arrays and Pointers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../func/">7. Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../su/">8. Structures and Unions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fs/">9. Following Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../env/">10. Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lang/">11. Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../macros/">12. Preprocessing Directives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../std/">13. The C Standard Library</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">14. Diagnostics <tt class="docutils literal"><span class="pre">&lt;assert.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../complex/">15. Complex arithmetic <tt class="docutils literal"><span class="pre">&lt;complex.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../ctypes/">16. Character Handling <tt class="docutils literal"><span class="pre">&lt;ctype.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../errno/">17. Errors <tt class="docutils literal"><span class="pre">&lt;errno.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../fenv/">18. Floating-point environment <tt class="docutils literal"><span class="pre">&lt;fenv.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../float/">19. Characteristics of floating types <tt class="docutils literal"><span class="pre">&lt;float.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../inttypes/">20. Format conversion of integer types <tt class="docutils literal"><span class="pre">&lt;inttypes.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../iso646/">21. Alternative spellings <tt class="docutils literal"><span class="pre">&lt;iso646.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../limits/">22. Sizes of integer types <tt class="docutils literal"><span class="pre">&lt;limits.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../locale/">23. Localization &lt;locale.h&gt;</a></li>
<li class="toctree-l1"><a class="reference internal" href="../math/">24. Mathematics <tt class="docutils literal"><span class="pre">&lt;math.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../setjmp/">25. Nonlocal jumps <tt class="docutils literal"><span class="pre">&lt;setjmp.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../signal/">26. Signal handling <tt class="docutils literal"><span class="pre">&lt;signal.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stdarg/">27. Variable arguments <tt class="docutils literal"><span class="pre">&lt;stdarg.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stdbool/">28. Boolean type and values <tt class="docutils literal"><span class="pre">&lt;stdbool.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stddef/">29. Common definitions <tt class="docutils literal"><span class="pre">&lt;stddef.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stdint/">30. Integer types <tt class="docutils literal"><span class="pre">&lt;stdint.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stdio/">31. Input/output <tt class="docutils literal"><span class="pre">&lt;stdio.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stdlib/">32. General utilities <tt class="docutils literal"><span class="pre">&lt;stdlib.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../string/">33. String handling <tt class="docutils literal"><span class="pre">&lt;string.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../tgmath/">34. Type-generic math <tt class="docutils literal"><span class="pre">&lt;tgmath.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../time/">35. Date and time <tt class="docutils literal"><span class="pre">&lt;time.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../wchar/">36. Extended multibyte and wide character utilities <tt class="docutils literal"><span class="pre">&lt;wchar.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../wtype/">37. Wide character classification and mapping utilities <tt class="docutils literal"><span class="pre">&lt;wctype.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../problems/">38. Problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license/">39. License</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">14. Diagnostics <tt class="docutils literal"><span class="pre">&lt;assert.h&gt;</span></tt></a><ul>
<li><a class="reference internal" href="#program-diagnostics">14.1. Program diagnostics</a><ul>
<li><a class="reference internal" href="#the-assert-macro">14.1.1. The <tt class="docutils literal"><span class="pre">assert</span></tt> macro</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="../std/" title="Previous Chapter: 13. The C Standard Library"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; 13. The C Standa...</span>
    </a>
  </li>
  <li>
    <a href="../complex/" title="Next Chapter: 15. Complex arithmetic <complex.h>"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">15. Complex arit... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../_sources/assert.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search/" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="diagnostics-assert-h">
<span id="index-0"></span><h1>14. Diagnostics <tt class="docutils literal"><span class="pre">&lt;assert.h&gt;</span></tt><a class="headerlink" href="#diagnostics-assert-h" title="Permalink to this headline">¶</a></h1>
<p>The header <tt class="docutils literal"><span class="pre">&lt;assert.h&gt;</span></tt> defines the <tt class="docutils literal"><span class="pre">assert</span></tt> macro and refers to another
macro, <tt class="docutils literal"><span class="pre">NDEBUG</span></tt> which is <em>not</em> defined by <tt class="docutils literal"><span class="pre">&lt;assert.h&gt;</span></tt>. If <tt class="docutils literal"><span class="pre">NDEBUG</span></tt> is
defined as a macro name at the point in the source file where <tt class="docutils literal"><span class="pre">&lt;assert.h&gt;</span></tt> is
included, the <tt class="docutils literal"><span class="pre">assert</span></tt> macro is defined simply as:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#define assert(ignore) ((void)0)</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">assert</span></tt> macro is redefined according to the current state of <tt class="docutils literal"><span class="pre">NDEBUG</span></tt>
each time that <tt class="docutils literal"><span class="pre">&lt;assert.h&gt;</span></tt> is included.</p>
<p>The <tt class="docutils literal"><span class="pre">assert</span></tt> macro shall be implemented as a macro, not as an actual
function. If the macro definition is suppressed in order to access an actual
function, the behavior is undefined.</p>
<div class="section" id="program-diagnostics">
<h2>14.1. Program diagnostics<a class="headerlink" href="#program-diagnostics" title="Permalink to this headline">¶</a></h2>
<div class="section" id="the-assert-macro">
<span id="index-1"></span><h3>14.1.1. The <tt class="docutils literal"><span class="pre">assert</span></tt> macro<a class="headerlink" href="#the-assert-macro" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;assert.h&gt;</span>
<span class="kt">void</span> <span class="nf">assert</span><span class="p">(</span><span class="n">scalar</span> <span class="n">expression</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <tt class="docutils literal"><span class="pre">assert</span></tt> macro puts diagnostic tests into programs; it expands to a void
expression. When it is executed, if expression (which shall have a scalar type)
is false (that is, compares equal to 0), the assert macro writes information
about the particular call that failed (including the text of the argument, the
name of the source file, the source line number, and the name of the enclosing
function - the latter are respectively the values of the preprocessing macros
<tt class="docutils literal"><span class="pre">__FILE__</span></tt> and <tt class="docutils literal"><span class="pre">__LINE__</span></tt> and of the identifier <tt class="docutils literal"><span class="pre">__func__</span></tt>) on the
standard error stream in an implementation-defined format. It then calls the
<tt class="docutils literal"><span class="pre">abort</span></tt> function.</p>
<p><strong>Returns</strong></p>
<p>The <tt class="docutils literal"><span class="pre">assert</span></tt> macro returns no value.</p>
<p><strong>Forward references:</strong> the <tt class="docutils literal"><span class="pre">abort</span></tt> function (14.20.4.1).</p>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;assert.h&gt;</span>
<span class="kt">void</span> <span class="nf">assert</span><span class="p">(</span><span class="n">scalar</span> <span class="n">expression</span><span class="p">);</span>
</pre></div>
</div>
<p id="index-2"><strong>Description</strong></p>
<p>If  the  macro  <tt class="docutils literal"><span class="pre">NDEBUG</span></tt>  was  defined  at the moment <tt class="docutils literal"><span class="pre">&lt;assert.h&gt;</span></tt> was last
included, the macro assert() generates no code, and hence does  nothing at all.
Otherwise, the macro <tt class="docutils literal"><span class="pre">assert()</span></tt> prints an error message to standard error
and terminates the program by calling <tt class="docutils literal"><span class="pre">abort</span></tt> if expression is false (i.e.,
compares equal to zero).</p>
<p>The  purpose  of  this macro is to help the programmer find bugs in his
program.   The  message  &#8220;assertion  failed  in  file  foo.c,  function
do_bar(), line 1287&#8221; is of no help at all to a user.</p>
<p><strong>RETURN VALUE</strong></p>
<p>No value is returned.</p>
<p>In C89, expression is required to be of type <tt class="docutils literal"><span class="pre">int</span></tt> and undefiend behavior
results if it is not, but in C99 it may have scalar type.</p>
<p><tt class="docutils literal"><span class="pre">assert()</span></tt> is implemented as a macro; if the expression tested hasside-effects, program behavior will be different depending on whether
<tt class="docutils literal"><span class="pre">NDEBUG</span></tt> is defined.  This may create Heisenbugs which go away whendebugging is turned on.</p>
<p><strong>Example</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;assert.h&gt;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">assert</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Not gonna happen!&quot;</span><span class="p">);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>And the output is:</p>
<div class="highlight-python"><div class="highlight"><pre>a.out: test.c:5: int main(): Assertion `0&#39; failed.
Aborted (core dumped)
</pre></div>
</div>
<p>You should replace <tt class="docutils literal"><span class="pre">0</span></tt> inside <tt class="docutils literal"><span class="pre">assert()</span></tt> by the expression to be tested.</p>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2012, Shiv S. Dayal.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>