<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>18. Floating-point environment &lt;fenv.h&gt; &mdash; C99  documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="C99  documentation" href="../" />
    <link rel="next" title="19. Characteristics of floating types &lt;float.h&gt;" href="../float/" />
    <link rel="prev" title="17. Errors &lt;errno.h&gt;" href="../errno/" />
<script src="../_static/analytics.js" type="text/javascript"></script>
<link rel="stylesheet" href="../../../css/math.css" type="text/css" />

  </head>
  <body>




  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">Home</a>
        <a class="navbar-brand" href="../">
          C99</a>
        <span class="navbar-text navbar-version pull-left"><b>0.2</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics/">2. Basics of C</a></li>
<li class="toctree-l1"><a class="reference internal" href="../io/">3. Console I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../oae/">4. Operators and Expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cf/">5. Control Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ap/">6. Arrays and Pointers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../func/">7. Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../su/">8. Structures and Unions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fs/">9. Following Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../env/">10. Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lang/">11. Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../macros/">12. Preprocessing Directives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../std/">13. The C Standard Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../assert/">14. Diagnostics <tt class="docutils literal"><span class="pre">&lt;assert.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../complex/">15. Complex arithmetic <tt class="docutils literal"><span class="pre">&lt;complex.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../ctypes/">16. Character Handling <tt class="docutils literal"><span class="pre">&lt;ctype.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../errno/">17. Errors <tt class="docutils literal"><span class="pre">&lt;errno.h&gt;</span></tt></a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">18. Floating-point environment <tt class="docutils literal"><span class="pre">&lt;fenv.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../float/">19. Characteristics of floating types <tt class="docutils literal"><span class="pre">&lt;float.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../inttypes/">20. Format conversion of integer types <tt class="docutils literal"><span class="pre">&lt;inttypes.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../iso646/">21. Alternative spellings <tt class="docutils literal"><span class="pre">&lt;iso646.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../limits/">22. Sizes of integer types <tt class="docutils literal"><span class="pre">&lt;limits.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../locale/">23. Localization &lt;locale.h&gt;</a></li>
<li class="toctree-l1"><a class="reference internal" href="../math/">24. Mathematics <tt class="docutils literal"><span class="pre">&lt;math.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../setjmp/">25. Nonlocal jumps <tt class="docutils literal"><span class="pre">&lt;setjmp.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../signal/">26. Signal handling <tt class="docutils literal"><span class="pre">&lt;signal.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stdarg/">27. Variable arguments <tt class="docutils literal"><span class="pre">&lt;stdarg.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stdbool/">28. Boolean type and values <tt class="docutils literal"><span class="pre">&lt;stdbool.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stddef/">29. Common definitions <tt class="docutils literal"><span class="pre">&lt;stddef.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stdint/">30. Integer types <tt class="docutils literal"><span class="pre">&lt;stdint.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stdio/">31. Input/output <tt class="docutils literal"><span class="pre">&lt;stdio.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stdlib/">32. General utilities <tt class="docutils literal"><span class="pre">&lt;stdlib.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../string/">33. String handling <tt class="docutils literal"><span class="pre">&lt;string.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../tgmath/">34. Type-generic math <tt class="docutils literal"><span class="pre">&lt;tgmath.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../time/">35. Date and time <tt class="docutils literal"><span class="pre">&lt;time.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../wchar/">36. Extended multibyte and wide character utilities <tt class="docutils literal"><span class="pre">&lt;wchar.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../wtype/">37. Wide character classification and mapping utilities <tt class="docutils literal"><span class="pre">&lt;wctype.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../problems/">38. Problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license/">39. License</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">18. Floating-point environment <tt class="docutils literal"><span class="pre">&lt;fenv.h&gt;</span></tt></a><ul>
<li><a class="reference internal" href="#the-fenv-access-pragma">18.1. The <tt class="docutils literal"><span class="pre">FENV_ACCESS</span></tt> pragma</a></li>
<li><a class="reference internal" href="#floating-point-exceptions">18.2. Floating-point exceptions</a><ul>
<li><a class="reference internal" href="#the-feclearexcept-function">18.2.1. The feclearexcept function</a></li>
<li><a class="reference internal" href="#the-fegetexceptflag-function">18.2.2. The <tt class="docutils literal"><span class="pre">fegetexceptflag</span></tt> function</a></li>
<li><a class="reference internal" href="#the-feraiseexcept-function">18.2.3. The <tt class="docutils literal"><span class="pre">feraiseexcept</span></tt> function</a></li>
<li><a class="reference internal" href="#the-fesetexceptflag-function">18.2.4. The <tt class="docutils literal"><span class="pre">fesetexceptflag</span></tt> function</a></li>
<li><a class="reference internal" href="#the-fetestexcept-function">18.2.5. The <tt class="docutils literal"><span class="pre">fetestexcept</span></tt> function</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rounding">18.3. Rounding</a><ul>
<li><a class="reference internal" href="#the-fegetround-function">18.3.1. The fegetround function</a></li>
<li><a class="reference internal" href="#the-fesetround-function">18.3.2. The <tt class="docutils literal"><span class="pre">fesetround</span></tt> function</a></li>
</ul>
</li>
<li><a class="reference internal" href="#environment">18.4. Environment</a><ul>
<li><a class="reference internal" href="#the-fegetenv-function">18.4.1. The <tt class="docutils literal"><span class="pre">fegetenv</span></tt> function</a></li>
<li><a class="reference internal" href="#the-feholdexcept-function">18.4.2. The <tt class="docutils literal"><span class="pre">feholdexcept</span></tt> function</a></li>
<li><a class="reference internal" href="#the-fesetenv-function">18.4.3. The <tt class="docutils literal"><span class="pre">fesetenv</span></tt> function</a></li>
<li><a class="reference internal" href="#the-feupdateenv-function">18.4.4. The <tt class="docutils literal"><span class="pre">feupdateenv</span></tt> function</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="../errno/" title="Previous Chapter: 17. Errors <errno.h>"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; 17. Errors <errn...</span>
    </a>
  </li>
  <li>
    <a href="../float/" title="Next Chapter: 19. Characteristics of floating types <float.h>"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">19. Characterist... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../_sources/fenv.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search/" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="floating-point-environment-fenv-h">
<span id="fenv"></span><span id="index-0"></span><h1>18. Floating-point environment <tt class="docutils literal"><span class="pre">&lt;fenv.h&gt;</span></tt><a class="headerlink" href="#floating-point-environment-fenv-h" title="Permalink to this headline">¶</a></h1>
<p>The header <tt class="docutils literal"><span class="pre">&lt;fenv.h&gt;</span></tt> declares two types and several macros and functions to
provide access to the floating-point environment. The floating-point
environment refers collectively to any floating-point status flags and control
modes supported by the implementation. <a class="footnote-reference" href="#id5" id="id1">[1]</a> A floating-point status flag is a
system variable whose value is set (but never cleared) when a floating-point
exception is raised, which occurs as a side effect of exceptional floating-point
arithmetic to provide auxiliary information. A floating-point control mode is
a system variable whose value may be set by the user to affect the subsequent
behavior of floating-point arithmetic.</p>
<p>Certain programming conventions support the intended model of use for the
floating-point environment: <a class="footnote-reference" href="#id6" id="id2">[2]</a></p>
<ul class="simple">
<li>a function call does not alter its caller&#8217;s floating-point control modes,
clear its caller&#8217;s floating-point status flags, nor depend on the state of
its caller&#8217;s floating-point status flags unless the function is so
documented;</li>
<li>a function call is assumed to require default floating-point control modes,
unless its documentation promises otherwise;</li>
<li>a function call is assumed to have the potential for raising floating-point
exceptions, unless its documentation promises otherwise.</li>
</ul>
<p id="index-1">The type <tt class="docutils literal"><span class="pre">fenv_t</span></tt> represents the entire floating-point environment.</p>
<p>The type <tt class="docutils literal"><span class="pre">fexcept_t</span></tt> represents the floating-point status flags collectively,
including any status the implementation associates with the flags.</p>
<p id="index-2">Each of the macros:</p>
<blockquote>
<div>FE_DIVBYZERO
FE_INEXACT
FE_INVALID
FE_OVERFLOW
FE_UNDERFLOW</div></blockquote>
<p>is defined if and only if the implementation supports the floating-point
exception by means of the functions in 13.6.2. <a class="footnote-reference" href="#id7" id="id3">[3]</a> Additional
implementation-defined floating-point exceptions, with macro definitions
beginning with <tt class="docutils literal"><span class="pre">FE_</span></tt> and an uppercase letter, may also be specified by the
implementation. The defined macros expand to integer constant expressions with
values such that bitwise ORs of all combinations of the macros result in
distinct values.</p>
<p id="index-3">The macro <tt class="docutils literal"><span class="pre">FE_ALL_EXCEPT</span></tt> is simply the bitwise OR of all floating-point
exception macros defined by the implementation. If no such macros are defined,
<tt class="docutils literal"><span class="pre">FE_ALL_EXCEPT</span></tt> shall be defined as 0.</p>
<p id="index-4">Each of the macros:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">FE_DOWNWARD</span>
<span class="n">FE_TONEAREST</span>
<span class="n">FE_TOWARDZERO</span>
<span class="n">FE_UPWARD</span>
</pre></div>
</div>
<p>is defined if and only if the implementation supports getting and setting the
represented rounding direction by means of the fegetround and fesetround
functions. Additional implementation-defined rounding directions, with macro
definitions beginning with <tt class="docutils literal"><span class="pre">FE_</span></tt> and an uppercase letter, may also be
specified by the implementation. The defined macros expand to integer constant
expressions whose values are distinct nonnegative values. <a class="footnote-reference" href="#id8" id="id4">[4]</a></p>
<p id="index-5">The macro <tt class="docutils literal"><span class="pre">FE_DFL_ENV</span></tt> represents the default floating-point environment -
the one installed at program startup - and has type &#8220;pointer to const-qualified
<tt class="docutils literal"><span class="pre">fenv_t</span></tt>&#8221;. It can be used as an argument to <tt class="docutils literal"><span class="pre">&lt;fenv.h&gt;</span></tt> functions that manage
the floating-point environment.</p>
<p>Additional implementation-defined environments, with macro definitions
beginning with <tt class="docutils literal"><span class="pre">FE_</span></tt> and an uppercase letter, and having type &#8220;pointer to
const-qualified <tt class="docutils literal"><span class="pre">fenv_t</span></tt>&#8221;, may also be specified by the implementation.</p>
<table class="docutils footnote" frame="void" id="id5" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>This header is designed to support the floating-point exception status
flags and directed-rounding control modes required by IEC 60559, and other
similar floating-point state information. Also it is designed to facilitate
code portability among all systems.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id6" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td>With these conventions, a programmer can safely assume default
floating-point control modes (or be unaware of them). The responsibilities
associated with accessing the floating-point environment fall on the
programmer or program that does so explicitly.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id7" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[3]</a></td><td>The implementation supports an exception if there are circumstances
where a call to at least one of the functions in 13.6.2, using the macro as
the appropriate argument, will succeed. It is not necessary for all the
functions to succeed all the time.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id8" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id4">[4]</a></td><td>Even though the rounding direction macros may expand to constants
corresponding to the values of <tt class="docutils literal"><span class="pre">FLT_ROUNDS</span></tt>, they are not required to do so.</td></tr>
</tbody>
</table>
<div class="section" id="the-fenv-access-pragma">
<span id="index-6"></span><h2>18.1. The <tt class="docutils literal"><span class="pre">FENV_ACCESS</span></tt> pragma<a class="headerlink" href="#the-fenv-access-pragma" title="Permalink to this headline">¶</a></h2>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;fenv.h&gt;</span>
<span class="cp">#pragma STDC FENV_ACCESS on-off-switch</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <tt class="docutils literal"><span class="pre">FENV_ACCESS</span></tt> pragma provides a means to inform the implementation when a
program might access the floating-point environment to test floating-point
status flags or run under non-default floating-point control modes. <a class="footnote-reference" href="#id11" id="id9">[5]</a> The
pragma shall occur either outside external declarations or preceding all
explicit declarations and statements inside a compound statement. When outside
external declarations, the pragma takes effect from its occurrence until another
<tt class="docutils literal"><span class="pre">FENV_ACCESS</span></tt> pragma is encountered, or until the end of the translation unit.
When inside a compound statement, the pragma takes effect from its occurrence
until another <tt class="docutils literal"><span class="pre">FENV_ACCESS</span></tt> pragma is encountered (including within a nested
compound statement), or until the end of the compound statement; at the end of
a compound statement the state for the pragma is restored to its condition just
before the compound statement. If this pragma is used in any other context, the
behavior is undefined. If part of a program tests floating-point status flags,
sets floating-point control modes, or runs under non-default mode settings, but
was translated with the state for the <tt class="docutils literal"><span class="pre">FENV_ACCESS</span></tt> pragma &#8220;off&#8221;, the behavior
is undefined. The default state (&#8220;on&#8221; or &#8220;off&#8221;) for the pragma is
implementation-defined. (When execution passes from a part of the program
translated with <tt class="docutils literal"><span class="pre">FENV_ACCESS</span></tt> &#8220;off&#8221; to a part translated with <tt class="docutils literal"><span class="pre">FENV_ACCESS</span></tt>
&#8220;on&#8221;, the state of the floating-point status flags is unspecified and the
floating-point control modes have their default settings.)</p>
<p>EXAMPLE</p>
<div class="highlight-c"><div class="highlight"><pre>#include &lt;fenv.h&gt;
void f(double x)
{
  #pragma STDC FENV_ACCESS ON
  void g(double);
  void h(double);
  /* ... */
  g(x + 1);
  h(x + 1);
  /* ... */
}
</pre></div>
</div>
<p>If the function <tt class="docutils literal"><span class="pre">g</span></tt> might depend on status flags set as a side effect of the
first <tt class="docutils literal"><span class="pre">x</span> <span class="pre">+</span> <span class="pre">1</span></tt>, or if the second <tt class="docutils literal"><span class="pre">x</span> <span class="pre">+</span> <span class="pre">1</span></tt> might depend on control modes set as
a side effect of the call to function <tt class="docutils literal"><span class="pre">g</span></tt>, then the program shall contain an
appropriately placed invocation of <tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">STDC</span> <span class="pre">FENV_ACCESS</span> <span class="pre">ON</span></tt>. <a class="footnote-reference" href="#id12" id="id10">[6]</a></p>
<table class="docutils footnote" frame="void" id="id11" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id9">[5]</a></td><td>The purpose of the <tt class="docutils literal"><span class="pre">FENV_ACCESS</span></tt> pragma is to allow certain
optimizations that could subvert flag tests and mode changes (e.g.,
global common subexpression elimination, code motion, and constant
folding). In general, if the state of <tt class="docutils literal"><span class="pre">FENV_ACCESS</span></tt> is &#8220;off&#8221;, the
translator can assume that default modes are in effect and the flags
are not tested.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id12" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id10">[6]</a></td><td>The side effects impose a temporal ordering that requires two evaluations
of <tt class="docutils literal"><span class="pre">x</span> <span class="pre">+</span> <span class="pre">1</span></tt>. On the other hand, without the <tt class="docutils literal"><span class="pre">#pragma</span> <span class="pre">STDC</span> <span class="pre">FENV_ACCESS</span> <span class="pre">ON</span></tt>
pragma, and assuming the default state is &#8220;off&#8221;, just one evaluation of
<tt class="docutils literal"><span class="pre">x</span> <span class="pre">+</span> <span class="pre">1</span></tt> would suffice.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="floating-point-exceptions">
<span id="index-7"></span><h2>18.2. Floating-point exceptions<a class="headerlink" href="#floating-point-exceptions" title="Permalink to this headline">¶</a></h2>
<p>The following functions provide access to the floating-point status flags. <a class="footnote-reference" href="#id14" id="id13">[7]</a>
The <tt class="docutils literal"><span class="pre">int</span></tt> input argument for the functions represents a subset of
floating-point exceptions, and can be zero or the bitwise OR of one or more
floating-point exception macros, for example <tt class="docutils literal"><span class="pre">FE_OVERFLOW</span> <span class="pre">|</span> <span class="pre">FE_INEXACT</span></tt>. For
other argument values the behavior of these functions is undefined.</p>
<div class="section" id="the-feclearexcept-function">
<span id="index-8"></span><h3>18.2.1. The feclearexcept function<a class="headerlink" href="#the-feclearexcept-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;fenv.h&gt;</span>
<span class="kt">int</span> <span class="nf">feclearexcept</span><span class="p">(</span><span class="kt">int</span> <span class="n">excepts</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <tt class="docutils literal"><span class="pre">feclearexcept</span></tt> function attempts to clear the supported floating-point
exceptions represented by its argument.</p>
<p><strong>Returns</strong></p>
<p>The <tt class="docutils literal"><span class="pre">feclearexcept</span></tt> function returns zero if the excepts argument is zero or
if all the specified exceptions were successfully cleared. Otherwise, it
returns a nonzero value.</p>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;fenv.h&gt;</span>
<span class="kt">int</span> <span class="nf">feclearexcept</span><span class="p">(</span><span class="kt">int</span> <span class="n">excepts</span><span class="p">);</span>
</pre></div>
</div>
<p>Link with <tt class="docutils literal"><span class="pre">-lm</span></tt>.</p>
<p>Following description, exceptions, rounding mode, floating-point environment
and return values are applicable to all functions of this header</p>
<p><strong>Description</strong></p>
<p>This function was defined in C99, and describe the handling of floating-point
rounding and exceptions (overflow, zero-divide, etc.).</p>
<p id="index-9"><strong>Exceptions</strong></p>
<p>The <em>divide-by-zero</em> exception occurs when an operation on finite numbers
produces infinity as exact answer.</p>
<p>The <em>overflow</em> exception occurs when a result has to be represented as a
floating-point number, but has (much) larger absolute value than the
largest (finite) floating-point number that is representable.</p>
<p>The <em>underflow</em> exception occurs when a result has to be represented as a
floating-point number, but has smaller absolute value than the smallest
positive normalized floating-point number (and would lose much accuracy
when represented as a denormalized number).</p>
<p>The <em>inexact</em> exception occurs when the rounded result of an operation is not
equal to the infinite precision result.  It may occur whenever <em>overflow</em> or
<em>underflow</em> occurs.</p>
<p>The <em>invalid</em> exception occurs when there is no well-defined result for an
operation, as for 0/0 or infinity - infinity or sqrt(-1).</p>
<p><strong>Exception handling</strong></p>
<p>Exceptions are represented in two ways: as a single bit (exception
present/absent), and these bits correspond in some implementation-
defined way with bit positions in an integer, and also as an opaque
structure that may contain more information about the exception (perhaps
the code address where it occurred).</p>
<p>Each of the macros <tt class="docutils literal"><span class="pre">FE_DIVBYZERO,</span> <span class="pre">FE_INEXACT,</span>&nbsp; <span class="pre">FE_INVALID,</span>&nbsp; <span class="pre">FE_OVERFLOW,</span>
<span class="pre">FE_UNDERFLOW</span></tt> is defined  when the implementation supports handling of
the corresponding exception, and if so then defines the corresponding
bit(s), so that one can call exception handling functions, for example,
using the integer argument <tt class="docutils literal"><span class="pre">FE_OVERFLOW|FE_UNDERFLOW</span></tt>. Other exceptions
may  be  supported. The macro <tt class="docutils literal"><span class="pre">FE_ALL_EXCEPT</span></tt> is the bitwise OR of all
bits corresponding to supported exceptions.</p>
<p>The <tt class="docutils literal"><span class="pre">feclearexcept()</span></tt> function clears  the  supported  exceptions  represented
by the bits in its argument.</p>
<p>The <tt class="docutils literal"><span class="pre">fegetexceptflag()</span></tt> function stores a representation of the state of
the exception flags represented by the argument excepts in  the  opaque
object <tt class="docutils literal"><span class="pre">*flagp</span></tt>.</p>
<p>The <tt class="docutils literal"><span class="pre">feraiseexcept()</span></tt> function raises the supported exceptions represented
by the bits in excepts.</p>
<p>The <tt class="docutils literal"><span class="pre">fesetexceptflag()</span></tt> function sets the complete status for the  exceptions
represented by excepts to the value <tt class="docutils literal"><span class="pre">*flagp</span></tt>. This value must have
been obtained by an earlier call of <tt class="docutils literal"><span class="pre">fegetexceptflag()</span></tt> with a last argument
that contained all bits in excepts.</p>
<p>The <tt class="docutils literal"><span class="pre">fetestexcept()</span></tt> function returns a word in which the bits are set
that were set in the argument excepts and for which  the  corresponding
exception is currently set.</p>
<p id="index-10"><strong>Rounding mode</strong></p>
<p>The rounding mode determines how the result of floating-point operations
is treated when the result cannot be exactly represented in the
significand. Various rounding modes may be provided: round to nearest
(the default), round up (toward positive infinity), round down  (toward
negative infinity), and round toward zero.</p>
<p>Each of the macros <tt class="docutils literal"><span class="pre">FE_TONEAREST,</span> <span class="pre">FE_UPWARD,</span> <span class="pre">FE_DOWNWARD</span></tt> and
<tt class="docutils literal"><span class="pre">FE_TOWARDZERO</span></tt> is defined when the implementation supports getting and
setting the corresponding rounding direction.</p>
<p>The <tt class="docutils literal"><span class="pre">fegetround()</span></tt> function returns the macro corresponding to the current
rounding mode.</p>
<p>The <tt class="docutils literal"><span class="pre">fesetround()</span></tt> function sets the rounding mode as specified by its
argument and returns zero when it was successful.</p>
<p>C99 and POSIX.1-2008 specify an identifier, <tt class="docutils literal"><span class="pre">FLT_ROUNDS</span></tt>, defined in
<tt class="docutils literal"><span class="pre">&lt;float.h&gt;</span></tt>, which indicates the implementation-defined rounding behavior
for  floating-point addition.  This identifier has one of the following
values:</p>
<blockquote>
<div><div class="line-block">
<div class="line">-1 The rounding mode is not determinable.</div>
<div class="line">0 Rounding is toward 0.</div>
<div class="line">1 Rounding is toward nearest number.</div>
<div class="line">2 Rounding is toward positive infinity.</div>
<div class="line">3 Rounding is toward negative infinity.</div>
</div>
</div></blockquote>
<p>Other values represent machine-dependent, nonstandard rounding modes.</p>
<p>The value of <tt class="docutils literal"><span class="pre">FLT_ROUNDS</span></tt> should reflect the current rounding mode as set
by <tt class="docutils literal"><span class="pre">fesetround()</span></tt>.</p>
<p><strong>Floating-point environment</strong></p>
<p>The entire floating-point environment, including control modes and status
flags, can be handled as one opaque object, of type <tt class="docutils literal"><span class="pre">fenv_t</span></tt>. The
default  environment is denoted by <tt class="docutils literal"><span class="pre">FE_DFL_ENV</span></tt> (of type <tt class="docutils literal"><span class="pre">const</span> <span class="pre">fenv_t</span> <span class="pre">*</span></tt>).
This is the environment setup at program start and it is defined by ISO
C  to have round to nearest, all exceptions cleared and a nonstop (continue
on exceptions) mode.</p>
<p>The <tt class="docutils literal"><span class="pre">fegetenv()</span></tt> function saves the current floating-point environment in
the object <tt class="docutils literal"><span class="pre">*envp</span></tt>.</p>
<p>The  <tt class="docutils literal"><span class="pre">feholdexcept()</span></tt> function does the same, then clears all exception
flags, and sets a nonstop (continue on exceptions) mode, if  available.
It returns zero when successful.</p>
<p>The <tt class="docutils literal"><span class="pre">fesetenv()</span></tt> function restores the floating-point environment from
the object <tt class="docutils literal"><span class="pre">*envp</span></tt>.  This object must be known to be valid, for  example,
the result of a call to <tt class="docutils literal"><span class="pre">fegetenv()</span></tt> or <tt class="docutils literal"><span class="pre">feholdexcept()</span></tt> or equal to
<tt class="docutils literal"><span class="pre">FE_DFL_ENV</span></tt>.  This call does not raise exceptions.</p>
<p>The <tt class="docutils literal"><span class="pre">feupdateenv()</span></tt> function installs the floating-point environment represented
by the object <tt class="docutils literal"><span class="pre">*envp</span></tt>, except that currently raised exceptions
are not cleared. After calling this function, the raised exceptions
will  be  a bitwise OR of those previously set with those in <tt class="docutils literal"><span class="pre">*envp</span></tt>.  As
before, the object <tt class="docutils literal"><span class="pre">*envp</span></tt> must be known to be valid.</p>
<p><strong>RETURN VALUE</strong></p>
<p>These functions return zero on success and nonzero if an error occurred.</p>
<table class="docutils footnote" frame="void" id="id14" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id13">[7]</a></td><td>The functions <tt class="docutils literal"><span class="pre">fetestexcept,</span> <span class="pre">feraiseexcept</span></tt> and <tt class="docutils literal"><span class="pre">feclearexcept</span></tt>
support the basic abstraction of flags that are either set or clear. An
implementation may endow floating-point status flags with more information
- for example, the address of the code which first raised the floating-point
exception; the functions fegetexceptflag and fesetexceptflag deal with the
full content of flags.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="the-fegetexceptflag-function">
<span id="index-11"></span><h3>18.2.2. The <tt class="docutils literal"><span class="pre">fegetexceptflag</span></tt> function<a class="headerlink" href="#the-fegetexceptflag-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;fenv.h&gt;</span>
<span class="kt">int</span> <span class="nf">fegetexceptflag</span><span class="p">(</span><span class="kt">fexcept_t</span> <span class="o">*</span><span class="n">flagp</span><span class="p">,</span> <span class="kt">int</span> <span class="n">excepts</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <tt class="docutils literal"><span class="pre">fegetexceptflag</span></tt> function attempts to store an implementation-defined
representation of the states of the floating-point status flags indicated by
the argument excepts in the object pointed to by the argument <tt class="docutils literal"><span class="pre">flagp</span></tt>.</p>
<p><strong>Returns</strong></p>
<p>The <tt class="docutils literal"><span class="pre">fegetexceptflag</span></tt> function returns zero if the representation was successfully
stored. Otherwise, it returns a nonzero value.</p>
</div>
<div class="section" id="the-feraiseexcept-function">
<span id="index-12"></span><h3>18.2.3. The <tt class="docutils literal"><span class="pre">feraiseexcept</span></tt> function<a class="headerlink" href="#the-feraiseexcept-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;fenv.h&gt;</span>
<span class="kt">int</span> <span class="nf">feraiseexcept</span><span class="p">(</span><span class="kt">int</span> <span class="n">excepts</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <tt class="docutils literal"><span class="pre">feraiseexcept</span></tt> function attempts to raise the supported floating-point
exceptions represented by its argument. <a class="footnote-reference" href="#id16" id="id15">[8]</a> The order in which these
floating-point exceptions are raised is unspecified, except as stated in
F.7.6 of specification. Whether the feraiseexcept function additionally raises the
&#8220;inexact&#8221; floating-point exception whenever it raises the &#8220;overflow&#8221; or
&#8220;underflow&#8221; floating-point exception is implementation-defined.</p>
<p><strong>Returns</strong></p>
<p>The <tt class="docutils literal"><span class="pre">feraiseexcept</span></tt> function returns zero if the excepts argument is zero or
if all the specified exceptions were successfully raised. Otherwise, it returns
a nonzero value.</p>
<table class="docutils footnote" frame="void" id="id16" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id15">[8]</a></td><td>The effect is intended to be similar to that of floating-point
exceptions raised by arithmetic operations. Hence, enabled traps for
floating-point exceptions raised by this function are taken. The specification
in F.7.6 of specification is in the same spirit.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="the-fesetexceptflag-function">
<span id="index-13"></span><h3>18.2.4. The <tt class="docutils literal"><span class="pre">fesetexceptflag</span></tt> function<a class="headerlink" href="#the-fesetexceptflag-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;fenv.h&gt;</span>
<span class="kt">int</span> <span class="nf">fesetexceptflag</span><span class="p">(</span><span class="k">const</span> <span class="kt">fexcept_t</span> <span class="o">*</span><span class="n">flagp</span><span class="p">,</span> <span class="kt">int</span> <span class="n">excepts</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <tt class="docutils literal"><span class="pre">fesetexceptflag</span></tt> function attempts to set the floating-point status flags
indicated by the argument excepts to the states stored in the object pointed to by
<tt class="docutils literal"><span class="pre">flagp</span></tt>. The value of <tt class="docutils literal"><span class="pre">*flagp</span></tt> shall have been set by a previous call to
<tt class="docutils literal"><span class="pre">fegetexceptflag</span></tt> whose second argument represented at least those floating-point
exceptions represented by the argument <tt class="docutils literal"><span class="pre">excepts</span></tt>. This function does not raise
floating-point exceptions, but only sets the state of the flags.</p>
<p><strong>Returns</strong></p>
<p>The <tt class="docutils literal"><span class="pre">fesetexceptflag</span></tt> function returns zero if the excepts argument is zero or if
all the specified flags were successfully set to the appropriate state. Otherwise, it returns
a nonzero value.</p>
</div>
<div class="section" id="the-fetestexcept-function">
<span id="index-14"></span><h3>18.2.5. The <tt class="docutils literal"><span class="pre">fetestexcept</span></tt> function<a class="headerlink" href="#the-fetestexcept-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;fenv.h&gt;</span>
<span class="kt">int</span> <span class="nf">fetestexcept</span><span class="p">(</span><span class="kt">int</span> <span class="n">excepts</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <tt class="docutils literal"><span class="pre">fetestexcept</span></tt> function determines which of a specified subset of the
floating-point exception flags are currently set. The <tt class="docutils literal"><span class="pre">excepts</span></tt> argument specifies
the floating-point status flags to be queried. <a class="footnote-reference" href="#id18" id="id17">[9]</a></p>
<p><strong>Returns</strong></p>
<p>The <tt class="docutils literal"><span class="pre">fetestexcept</span></tt> function returns the value of the bitwise OR of the floating-point
exception macros corresponding to the currently set floating-point exceptions included in
<tt class="docutils literal"><span class="pre">excepts</span></tt>.</p>
<table class="docutils footnote" frame="void" id="id18" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id17">[9]</a></td><td>This mechanism allows testing several floating-point exceptions with
just one function call.</td></tr>
</tbody>
</table>
<p>EXAMPLE Call <tt class="docutils literal"><span class="pre">f</span></tt> if &#8220;invalid&#8221; is set, then <tt class="docutils literal"><span class="pre">g</span></tt> if &#8220;overflow&#8221; is set:</p>
<div class="highlight-c"><div class="highlight"><pre>#include &lt;fenv.h&gt;
/* ... */
{
  #pragma STDC FENV_ACCESS ON
  int set_excepts;
  feclearexcept(FE_INVALID | FE_OVERFLOW);
  // maybe raise exceptions
  set_excepts = fetestexcept(FE_INVALID | FE_OVERFLOW);
  if (set_excepts &amp; FE_INVALID) f();
  if (set_excepts &amp; FE_OVERFLOW) g();
  /* ... */
}
</pre></div>
</div>
</div>
</div>
<div class="section" id="rounding">
<span id="index-15"></span><h2>18.3. Rounding<a class="headerlink" href="#rounding" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">fegetround</span></tt> and <tt class="docutils literal"><span class="pre">fesetround</span></tt> functions provide control of rounding direction
modes.</p>
<div class="section" id="the-fegetround-function">
<span id="index-16"></span><h3>18.3.1. The fegetround function<a class="headerlink" href="#the-fegetround-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;fenv.h&gt;</span>
<span class="kt">int</span> <span class="nf">fegetround</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <tt class="docutils literal"><span class="pre">fegetround</span></tt> function gets the current rounding direction.</p>
<p><strong>Returns</strong></p>
<p>The <tt class="docutils literal"><span class="pre">fegetround</span></tt> function returns the value of the rounding direction macro
representing the current rounding direction or a negative value if there is no such
rounding direction macro or the current rounding direction is not determinable.</p>
</div>
<div class="section" id="the-fesetround-function">
<span id="index-17"></span><h3>18.3.2. The <tt class="docutils literal"><span class="pre">fesetround</span></tt> function<a class="headerlink" href="#the-fesetround-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;fenv.h&gt;</span>
<span class="kt">int</span> <span class="nf">fesetround</span><span class="p">(</span><span class="kt">int</span> <span class="n">round</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <tt class="docutils literal"><span class="pre">fesetround</span></tt> function establishes the rounding direction represented by its
argument round. If the argument is not equal to the value of a rounding direction macro,
the rounding direction is not changed.</p>
<p><strong>Returns</strong></p>
<p>The <tt class="docutils literal"><span class="pre">fesetround</span></tt> function returns zero if and only if the requested rounding direction
was established.</p>
<p>EXAMPLE Save, set, and restore the rounding direction. Report an error and
abort if setting the rounding direction fails.</p>
<div class="highlight-c"><div class="highlight"><pre>#include &lt;fenv.h&gt;
#include &lt;assert.h&gt;
void f(int round_dir)
{
  #pragma STDC FENV_ACCESS ON
  int save_round;
  int setround_ok;
  save_round = fegetround();
  setround_ok = fesetround(round_dir);
  assert(setround_ok == 0);
  /* ... */
  fesetround(save_round);
  /* ... */
}
</pre></div>
</div>
</div>
</div>
<div class="section" id="environment">
<h2>18.4. Environment<a class="headerlink" href="#environment" title="Permalink to this headline">¶</a></h2>
<p>The functions in this section manage the floating-point environment - status flags and
control modes - as one entity.</p>
<div class="section" id="the-fegetenv-function">
<span id="index-18"></span><h3>18.4.1. The <tt class="docutils literal"><span class="pre">fegetenv</span></tt> function<a class="headerlink" href="#the-fegetenv-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;fenv.h&gt;</span>
<span class="kt">int</span> <span class="nf">fegetenv</span><span class="p">(</span><span class="kt">fenv_t</span> <span class="o">*</span><span class="n">envp</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <tt class="docutils literal"><span class="pre">fegetenv</span></tt> function attempts to store the current floating-point environment
in the object pointed to by <tt class="docutils literal"><span class="pre">envp</span></tt>.</p>
<p><strong>Returns</strong></p>
<p>The <tt class="docutils literal"><span class="pre">fegetenv</span></tt> function returns zero if the environment was successfully stored.
Otherwise, it returns a nonzero value.</p>
</div>
<div class="section" id="the-feholdexcept-function">
<span id="index-19"></span><h3>18.4.2. The <tt class="docutils literal"><span class="pre">feholdexcept</span></tt> function<a class="headerlink" href="#the-feholdexcept-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;fenv.h&gt;</span>
<span class="kt">int</span> <span class="nf">feholdexcept</span><span class="p">(</span><span class="kt">fenv_t</span> <span class="o">*</span><span class="n">envp</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <tt class="docutils literal"><span class="pre">feholdexcept</span></tt> function saves the current floating-point environment in
the object pointed to by envp, clears the floating-point status flags, and
then installs a non-stop (continue on floating-point exceptions) mode, if
available, for all floating-point exceptions. <a class="footnote-reference" href="#id20" id="id19">[10]</a></p>
<p><strong>Returns</strong></p>
<p>The <tt class="docutils literal"><span class="pre">feholdexcept</span></tt> function returns zero if and only if non-stop floating-point
exception handling was successfully installed.</p>
<table class="docutils footnote" frame="void" id="id20" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id19">[10]</a></td><td>IEC 60559 systems have a default non-stop mode, and typically at least
one other mode for trap handling or aborting; if the system provides only
the non-stop mode then installing it is trivial. For such systems, the
<tt class="docutils literal"><span class="pre">feholdexcept</span></tt> function can be used in conjunction with the <tt class="docutils literal"><span class="pre">feupdateenv</span></tt>
function to write routines that hide spurious floating-point exceptions from
their callers.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="the-fesetenv-function">
<span id="index-20"></span><h3>18.4.3. The <tt class="docutils literal"><span class="pre">fesetenv</span></tt> function<a class="headerlink" href="#the-fesetenv-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;fenv.h&gt;</span>
<span class="kt">int</span> <span class="nf">fesetenv</span><span class="p">(</span><span class="k">const</span> <span class="kt">fenv_t</span> <span class="o">*</span><span class="n">envp</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <tt class="docutils literal"><span class="pre">fesetenv</span></tt> function attempts to establish the floating-point environment
represented by the object pointed to by <tt class="docutils literal"><span class="pre">envp</span></tt>. The argument <tt class="docutils literal"><span class="pre">envp</span></tt> shall
point to an object set by a call to <tt class="docutils literal"><span class="pre">fegetenv</span></tt> or <tt class="docutils literal"><span class="pre">`feholdexcept</span></tt>, or equal
a floating-point environment macro. Note that <tt class="docutils literal"><span class="pre">fesetenv</span></tt> merely installs
the state of the floating-point status flags represented through its argument,
and does not raise these floating-point exceptions.</p>
<p><strong>Returns</strong></p>
<p>The <tt class="docutils literal"><span class="pre">fesetenv</span></tt> function returns zero if the environment was successfully
established. Otherwise, it returns a nonzero value.</p>
</div>
<div class="section" id="the-feupdateenv-function">
<span id="index-21"></span><h3>18.4.4. The <tt class="docutils literal"><span class="pre">feupdateenv</span></tt> function<a class="headerlink" href="#the-feupdateenv-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;fenv.h&gt;</span>
<span class="kt">int</span> <span class="nf">feupdateenv</span><span class="p">(</span><span class="k">const</span> <span class="kt">fenv_t</span> <span class="o">*</span><span class="n">envp</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <tt class="docutils literal"><span class="pre">feupdateenv</span></tt> function attempts to save the currently raised floating-point
exceptions in its automatic storage, install the floating-point environment
represented by the object pointed to by <tt class="docutils literal"><span class="pre">envp</span></tt>, and then raise the saved
floating-point exceptions. The argument <tt class="docutils literal"><span class="pre">envp</span></tt> shall point to an object set
by a call to feholdexcept or <tt class="docutils literal"><span class="pre">fegetenv</span></tt>, or equal a floating-point environment
macro.</p>
<p><strong>Returns</strong></p>
<p>The <tt class="docutils literal"><span class="pre">feupdateenv</span></tt> function returns zero if all the actions were successfully
carried out. Otherwise, it returns a nonzero value.</p>
<p>EXAMPLE Hide spurious underflow floating-point exceptions:</p>
<div class="highlight-c"><div class="highlight"><pre>#include &lt;fenv.h&gt;
double f(double x)
{
  #pragma STDC FENV_ACCESS ON
  double result;
  fenv_t save_env;
  if (feholdexcept(&amp;save_env))
    return /* indication of an environmental problem */;
  // compute result
  if (/* test spurious underflow */)
    if (feclearexcept(FE_UNDERFLOW))
      return /* indication of an environmental problem */;
  if (feupdateenv(&amp;save_env))
    return /* indication of an environmental problem */;
  return result;
}
</pre></div>
</div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2012, Shiv S. Dayal.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>