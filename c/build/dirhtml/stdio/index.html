

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-17487464-6']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>33. Input/output &lt;stdio.h&gt; &mdash; C Programming  documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="C Programming  documentation" href="../"/>
        <link rel="next" title="34. General utilities &lt;stdlib.h&gt;" href="../stdlib/"/>
        <link rel="prev" title="32. Integer types &lt;stdint.h&gt;" href="../stdint/"/>
<link rel="stylesheet" href="../../css/math.css" type="text/css" />


  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../" class="icon icon-home"> C Programming
          

          
          </a>

          
            
            
              <div class="version">
                0.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics/">2. Basics of C</a></li>
<li class="toctree-l1"><a class="reference internal" href="../io/">3. Console I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../oae/">4. Operators and Expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cf/">5. Control Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ap/">6. Arrays and Pointers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../func/">7. Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../su/">8. Structures and Unions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../strings/">9. Strings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fileio/">10. File Input/Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fs/">11. Following Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../env/">12. Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lang/">13. Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../macros/">14. Preprocessing Directives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../std/">15. The C Standard Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../assert/">16. Diagnostics <code class="docutils literal"><span class="pre">&lt;assert.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../complex/">17. Complex arithmetic <code class="docutils literal"><span class="pre">&lt;complex.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../ctypes/">18. Character Handling <code class="docutils literal"><span class="pre">&lt;ctype.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../errno/">19. Errors <code class="docutils literal"><span class="pre">&lt;errno.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../fenv/">20. Floating-point environment <code class="docutils literal"><span class="pre">&lt;fenv.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../float/">21. Characteristics of floating types <code class="docutils literal"><span class="pre">&lt;float.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../inttypes/">22. Format conversion of integer types <code class="docutils literal"><span class="pre">&lt;inttypes.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../iso646/">23. Alternative spellings <code class="docutils literal"><span class="pre">&lt;iso646.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../limits/">24. Sizes of integer types <code class="docutils literal"><span class="pre">&lt;limits.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../locale/">25. Localization &lt;locale.h&gt;</a></li>
<li class="toctree-l1"><a class="reference internal" href="../math/">26. Mathematics <code class="docutils literal"><span class="pre">&lt;math.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../setjmp/">27. Nonlocal jumps <code class="docutils literal"><span class="pre">&lt;setjmp.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../signal/">28. Signal handling <code class="docutils literal"><span class="pre">&lt;signal.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stdarg/">29. Variable arguments <code class="docutils literal"><span class="pre">&lt;stdarg.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stdbool/">30. Boolean type and values <code class="docutils literal"><span class="pre">&lt;stdbool.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stddef/">31. Common definitions <code class="docutils literal"><span class="pre">&lt;stddef.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stdint/">32. Integer types <code class="docutils literal"><span class="pre">&lt;stdint.h&gt;</span></code></a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">33. Input/output <code class="docutils literal"><span class="pre">&lt;stdio.h&gt;</span></code></a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">33.1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#streams">33.2. Streams</a></li>
<li class="toctree-l2"><a class="reference internal" href="#files">33.3. Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#operations-on-files">33.4. Operations on files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-remove-function">33.4.1. The <code class="docutils literal"><span class="pre">remove</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-rename-function">33.4.2. The <code class="docutils literal"><span class="pre">rename</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-tmpfile-function">33.4.3. The <code class="docutils literal"><span class="pre">tmpfile</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-tmpnam-function">33.4.4. The <code class="docutils literal"><span class="pre">tmpnam</span></code> function</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#file-access-functions">33.5. File access functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-fclose-function">33.5.1. The <code class="docutils literal"><span class="pre">fclose</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-fflush-function">33.5.2. The <code class="docutils literal"><span class="pre">fflush</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-fopen-function">33.5.3. The <code class="docutils literal"><span class="pre">fopen</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-freopen-function">33.5.4. The <code class="docutils literal"><span class="pre">freopen</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-setbuf-function">33.5.5. The <code class="docutils literal"><span class="pre">setbuf</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-setvbuf-function">33.5.6. The <code class="docutils literal"><span class="pre">setvbuf</span></code> function</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#formatted-input-output-functions">33.6. Formatted input/output functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-fprintf-function">33.6.1. The <code class="docutils literal"><span class="pre">fprintf</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-fscanf-function">33.6.2. The <code class="docutils literal"><span class="pre">fscanf</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-printf-function">33.6.3. The <code class="docutils literal"><span class="pre">printf</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-scanf-function">33.6.4. The <code class="docutils literal"><span class="pre">scanf</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-snprintf-function">33.6.5. The <code class="docutils literal"><span class="pre">snprintf</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-sprintf-function">33.6.6. The <code class="docutils literal"><span class="pre">sprintf</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-sscanf-function">33.6.7. The <code class="docutils literal"><span class="pre">sscanf</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-vfprintf-function">33.6.8. The <code class="docutils literal"><span class="pre">vfprintf</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-vfscanf-function">33.6.9. The <code class="docutils literal"><span class="pre">vfscanf</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-vprintf-function">33.6.10. The <code class="docutils literal"><span class="pre">vprintf</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-vscanf-function">33.6.11. The <code class="docutils literal"><span class="pre">vscanf</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-vsnprintf-function">33.6.12. The <code class="docutils literal"><span class="pre">vsnprintf</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-vsprintf-function">33.6.13. The <code class="docutils literal"><span class="pre">vsprintf</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-vsscanf-function">33.6.14. The <code class="docutils literal"><span class="pre">vsscanf</span></code> function</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#character-input-output-functions">33.7. Character input/output functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-fgetc-function">33.7.1. The <code class="docutils literal"><span class="pre">fgetc</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-fgets-function">33.7.2. The <code class="docutils literal"><span class="pre">fgets</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-fputc-function">33.7.3. The <code class="docutils literal"><span class="pre">fputc</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-fputs-function">33.7.4. The <code class="docutils literal"><span class="pre">fputs</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-getc-function">33.7.5. The <code class="docutils literal"><span class="pre">getc</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-getchar-function">33.7.6. The <code class="docutils literal"><span class="pre">getchar</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-gets-function">33.7.7. The <code class="docutils literal"><span class="pre">gets</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-putc-function">33.7.8. The <code class="docutils literal"><span class="pre">putc</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-putchar-function">33.7.9. The <code class="docutils literal"><span class="pre">putchar</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-puts-function">33.7.10. The <code class="docutils literal"><span class="pre">puts</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-ungetc-function">33.7.11. The <code class="docutils literal"><span class="pre">ungetc</span></code> function</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#direct-input-output-functions">33.8. Direct input/output functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-fread-function">33.8.1. The <code class="docutils literal"><span class="pre">fread</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-fwrite-function">33.8.2. The <code class="docutils literal"><span class="pre">fwrite</span></code> function</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#file-positioning-functions">33.9. File positioning functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-fgetpos-function">33.9.1. The <code class="docutils literal"><span class="pre">fgetpos</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-fseek-function">33.9.2. The <code class="docutils literal"><span class="pre">fseek</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-fsetpos-function">33.9.3. The <code class="docutils literal"><span class="pre">fsetpos</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-ftell-function">33.9.4. The <code class="docutils literal"><span class="pre">ftell</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-rewind-function">33.9.5. The <code class="docutils literal"><span class="pre">rewind</span></code> function</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#error-handling-functions">33.10. Error-handling functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-clearerr-function">33.10.1. The <code class="docutils literal"><span class="pre">clearerr</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-feof-function">33.10.2. The <code class="docutils literal"><span class="pre">feof</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-ferror-function">33.10.3. The <code class="docutils literal"><span class="pre">ferror</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-perror-function">33.10.4. The <code class="docutils literal"><span class="pre">perror</span></code> function</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../stdlib/">34. General utilities <code class="docutils literal"><span class="pre">&lt;stdlib.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../string/">35. String handling <code class="docutils literal"><span class="pre">&lt;string.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../tgmath/">36. Type-generic math <code class="docutils literal"><span class="pre">&lt;tgmath.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../time/">37. Date and time <code class="docutils literal"><span class="pre">&lt;time.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../wchar/">38. Extended multibyte and wide character utilities <code class="docutils literal"><span class="pre">&lt;wchar.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../wtype/">39. Wide character classification and mapping utilities <code class="docutils literal"><span class="pre">&lt;wctype.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../problems/">40. Problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license/">41. License</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../">C Programming</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../">Docs</a> &raquo;</li>
      
    <li>33. Input/output <code class="docutils literal"><span class="pre">&lt;stdio.h&gt;</span></code></li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/stdio.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="input-output-stdio-h">
<span id="stdio"></span><span id="index-0"></span><h1>33. Input/output <code class="docutils literal"><span class="pre">&lt;stdio.h&gt;</span></code><a class="headerlink" href="#input-output-stdio-h" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>33.1. Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p id="index-1">The header <code class="docutils literal"><span class="pre">&lt;stdio.h&gt;</span></code> declares three types, several macros, and many functions for
performing input and output.</p>
<p>The types declared are <code class="docutils literal"><span class="pre">size_t</span></code> (described in <a class="reference internal" href="../stddef/#stddef"><span>Common definitions &lt;stddef.h&gt;</span></a>);</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">FILE</span></code></div>
</div>
</div></blockquote>
<p>which is an object type capable of recording all the information needed to control a
stream, including its file position indicator, a pointer to its associated buffer (if any), an
error indicator that records whether a read/write error has occurred, and an end-of-file
indicator that records whether the end of the file has been reached; and</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">fpos_t</span></code></div>
</div>
</div></blockquote>
<p>which is an object type other than an array type capable of recording all the information
needed to specify uniquely every position within a file.</p>
<p>The macros are NULL (described in <a class="reference internal" href="../stddef/#stddef"><span>Common definitions &lt;stddef.h&gt;</span></a>);</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">_IOFBF</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">_IOLBF</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">_IONBF</span></code></div>
</div>
</div></blockquote>
<p>which expand to integer constant expressions with distinct values, suitable for use as the
third argument to the <code class="docutils literal"><span class="pre">setvbuf</span></code> function;</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">BUFSIZ</span></code></div>
</div>
</div></blockquote>
<p>which expands to an integer constant expression that is the size of the buffer used by the <code class="docutils literal"><span class="pre">setbuf</span></code> function;</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">EOF</span></code></div>
</div>
</div></blockquote>
<p id="index-2">which expands to an integer constant expression, with type int and a negative value, that
is returned by several functions to indicate end-of-file, that is, no more input from a
stream;</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">FOPEN_MAX</span></code></div>
</div>
</div></blockquote>
<p>which expands to an integer constant expression that is the minimum number of files that
the implementation guarantees can be open simultaneously;</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">FILENAME_MAX</span></code></div>
</div>
</div></blockquote>
<p>which expands to an integer constant expression that is the size needed for an array of
char large enough to hold the longest file name string that the implementation</p>
<p>..index:: L_tmpnam macro, SEEK_CUR macro, SEEK_END macro, SEEK_SET macro, TMP_MAX macro</p>
<p>guarantees can be opened; <a class="footnote-reference" href="#id2" id="id1">[1]</a></p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">L_tmpnam</span></code></div>
</div>
</div></blockquote>
<p>which expands to an integer constant expression that is the size needed for an array of
char large enough to hold a temporary file name string generated by the <code class="docutils literal"><span class="pre">tmpnam</span></code>
function;</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">SEEK_CUR</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">SEEK_END</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">SEEK_SET</span></code></div>
</div>
</div></blockquote>
<p>which expand to integer constant expressions with distinct values, suitable for use as the
third argument to the fseek function;</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">TMP_MAX</span></code></div>
</div>
</div></blockquote>
<p>which expands to an integer constant expression that is the maximum number of unique</p>
<p id="index-3">file names that can be generated by the tmpnam function;</p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">stderr</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">stdin</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">stdout</span></code></div>
</div>
</div></blockquote>
<p>which are expressions of type &#8220;pointer to <code class="docutils literal"><span class="pre">FILE</span></code>&#8221; that point to the <code class="docutils literal"><span class="pre">FILE</span></code> objects
associated, respectively, with the standard error, input, and output streams.</p>
<p>The header <code class="docutils literal"><span class="pre">&lt;wchar.h&gt;</span></code> declares a number of functions useful for wide character input
and output. The wide character input/output functions described in that subclause
provide operations analogous to most of those described here, except that the
fundamental units internal to the program are wide characters. The external
representation (in the file) is a sequence of &#8220;generalized&#8221; multibyte characters, as
described further in <a class="reference internal" href="#id8"><span>Files</span></a>.</p>
<p>The input/output functions are given the following collective terms:</p>
<ul class="simple">
<li>The <em>wide character input functions</em> &#8212; those functions described in <a class="reference internal" href="../wchar/#wchar"><span>Extended multibyte and wide character utilities &lt;wchar.h&gt;</span></a> that perform
input into wide characters and wide strings: <code class="docutils literal"><span class="pre">fgetwc,</span> <span class="pre">fgetws,</span> <span class="pre">getwc,</span> <span class="pre">getwchar,</span>
<span class="pre">fwscanf,</span> <span class="pre">wscanf,</span> <span class="pre">vfwscanf</span></code> and <code class="docutils literal"><span class="pre">vwscanf</span></code>.</li>
<li>The <em>wide character output functions</em> &#8212; those functions described in <a class="reference internal" href="../wchar/#wchar"><span>Extended multibyte and wide character utilities &lt;wchar.h&gt;</span></a> that perform
output from wide characters and wide strings: <code class="docutils literal"><span class="pre">fputwc,</span> <span class="pre">fputws,</span> <span class="pre">putwc,</span>
<span class="pre">putwchar,</span> <span class="pre">fwprintf,</span> <span class="pre">wprintf,</span> <span class="pre">vfwprintf</span></code> and <code class="docutils literal"><span class="pre">vwprintf</span></code>.</li>
<li>The <em>wide character input/output functions</em> the union of the <code class="docutils literal"><span class="pre">ungetwc</span></code> function, the
wide character input functions, and the wide character output functions.</li>
<li>The <em>byte input/output functions</em> &#8212; those functions described in this subclause that
perform input/output: <code class="docutils literal"><span class="pre">fgetc,</span> <span class="pre">fgets,</span> <span class="pre">fprintf,</span> <span class="pre">fputc,</span> <span class="pre">fputs,</span> <span class="pre">fread,</span>
<span class="pre">fscanf,</span> <span class="pre">fwrite,</span> <span class="pre">getc,</span> <span class="pre">getchar,</span> <span class="pre">gets,</span> <span class="pre">perror,</span> <span class="pre">printf,</span> <span class="pre">putc,</span> <span class="pre">putchar,</span>
<span class="pre">puts,</span> <span class="pre">scanf,</span> <span class="pre">ungetc,</span> <span class="pre">vfprintf,</span> <span class="pre">vfscanf,</span> <span class="pre">vprintf</span></code> and <code class="docutils literal"><span class="pre">vscanf</span></code>.</li>
</ul>
<p><strong>Forward references:</strong> files (<a class="reference internal" href="#id8"><span>Files</span></a>), the <code class="docutils literal"><span class="pre">fseek</span></code> function (<a class="reference internal" href="#id70"><span>The fseek function</span></a>), streams (<a class="reference internal" href="#id3"><span>Streams</span></a>), the
tmpnam function (<a class="reference internal" href="#id13"><span>The tmpnam function</span></a>), <code class="docutils literal"><span class="pre">&lt;wchar.h&gt;</span></code> (<a class="reference internal" href="../wchar/#wchar"><span>Extended multibyte and wide character utilities &lt;wchar.h&gt;</span></a>).</p>
<table class="docutils footnote" frame="void" id="id2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>If the implementation imposes no practical limit on the length of file name strings, the value of
<code class="docutils literal"><span class="pre">FILENAME_MAX</span></code> should instead be the recommended size of an array intended to hold a file name
string. Of course, file name string contents are subject to other system-specific constraints; therefore
all possible strings of length <code class="docutils literal"><span class="pre">FILENAME_MAX</span></code> cannot be expected to be opened successfully.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="streams">
<span id="id3"></span><span id="index-4"></span><h2>33.2. Streams<a class="headerlink" href="#streams" title="Permalink to this headline">¶</a></h2>
<p>Input and output, whether to or from physical devices such as terminals and tape drives,
or whether to or from files supported on structured storage devices, are mapped into
logical data streams, whose properties are more uniform than their various inputs and
outputs. Two forms of mapping are supported, for text streams and for binary
streams. <a class="footnote-reference" href="#id6" id="id4">[2]</a></p>
<p>A text stream is an ordered sequence of characters composed into lines, each line
consisting of zero or more characters plus a terminating new-line character. Whether the
last line requires a terminating new-line character is implementation-defined. Characters
may have to be added, altered, or deleted on input and output to conform to differing
conventions for representing text in the host environment. Thus, there need not be a oneto-
one correspondence between the characters in a stream and those in the external
representation. Data read in from a text stream will necessarily compare equal to the data
that were earlier written out to that stream only if: the data consist only of printing
characters and the control characters horizontal tab and new-line; no new-line character is
immediately preceded by space characters; and the last character is a new-line character.
Whether space characters that are written out immediately before a new-line character
appear when read in is implementation-defined.</p>
<p>A binary stream is an ordered sequence of characters that can transparently record
internal data. Data read in from a binary stream shall compare equal to the data that were
earlier written out to that stream, under the same implementation. Such a stream may,
however, hav e an implementation-defined number of null characters appended to the end
of the stream.</p>
<p>Each stream has an orientation. After a stream is associated with an external file, but
before any operations are performed on it, the stream is without orientation. Once a wide
character input/output function has been applied to a stream without orientation, the
stream becomes a <em>wide-oriented stream</em>. Similarly, once a byte input/output function has
been applied to a stream without orientation, the stream becomes a byte-oriented stream.
Only a call to the <code class="docutils literal"><span class="pre">freopen</span></code> function or the <code class="docutils literal"><span class="pre">fwide</span></code> function can otherwise alter the
orientation of a stream. (A successful call to <code class="docutils literal"><span class="pre">freopen</span></code> removes any orientation.) <a class="footnote-reference" href="#id7" id="id5">[3]</a></p>
<p>Byte input/output functions shall not be applied to a wide-oriented stream and wide
character input/output functions shall not be applied to a byte-oriented stream. The
remaining stream operations do not affect, and are not affected by, a stream&#8217;s orientation,
except for the following additional restrictions:</p>
<ul class="simple">
<li>Binary wide-oriented streams have the file-positioning restrictions ascribed to both
text and binary streams.</li>
<li>For wide-oriented streams, after a successful call to a file-positioning function that
leaves the file position indicator prior to the end-of-file, a wide character output
function can overwrite a partial multibyte character; any file contents beyond the
byte(s) written are henceforth indeterminate.</li>
</ul>
<p>Each wide-oriented stream has an associated <code class="docutils literal"><span class="pre">mbstate_t</span></code> object that stores the current
parse state of the stream. A successful call to <code class="docutils literal"><span class="pre">fgetpos</span></code> stores a representation of the
value of this <code class="docutils literal"><span class="pre">mbstate_t</span></code> object as part of the value of the <code class="docutils literal"><span class="pre">fpos_t</span></code> object. A later
successful call to fsetpos using the same stored <code class="docutils literal"><span class="pre">fpos_t</span></code> value restores the value of
the associated <code class="docutils literal"><span class="pre">mbstate_t</span></code> object as well as the position within the controlled stream.</p>
<p><strong>Environmental limits</strong></p>
<p>An implementation shall support text files with lines containing at least 254 characters,
including the terminating new-line character. The value of the macro BUFSIZ shall be at
least 256.</p>
<p><strong>Forward references:</strong> the <code class="docutils literal"><span class="pre">freopen</span></code> function (<a class="reference internal" href="#id19"><span>The freopen function</span></a>), the <code class="docutils literal"><span class="pre">fwide</span></code> function (<a class="reference internal" href="../wchar/#id36"><span>The fwide function</span></a>),
<code class="docutils literal"><span class="pre">mbstate_t</span></code> (<a class="reference internal" href="../wchar/#id1"><span>Introduction</span></a>), the <code class="docutils literal"><span class="pre">fgetpos</span></code> function (<a class="reference internal" href="#id69"><span>The fgetpos function</span></a>), the <code class="docutils literal"><span class="pre">fsetpos</span></code> function
(<a class="reference internal" href="#id71"><span>The fsetpos function</span></a>).</p>
<table class="docutils footnote" frame="void" id="id6" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id4">[2]</a></td><td>An implementation need not distinguish between text streams and binary streams. In such an
implementation, there need be no new-line characters in a text stream nor any limit to the length of a</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id7" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id5">[3]</a></td><td>The three predefined streams <code class="docutils literal"><span class="pre">stdin,</span> <span class="pre">stdout</span></code> and <code class="docutils literal"><span class="pre">stderr</span></code> are unoriented at program startup.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="files">
<span id="id8"></span><span id="index-5"></span><h2>33.3. Files<a class="headerlink" href="#files" title="Permalink to this headline">¶</a></h2>
<p>A stream is associated with an external file (which may be a physical device) by <em>opening</em>
a file, which may involve <em>creating</em> a new file. Creating an existing file causes its former
contents to be discarded, if necessary. If a file can support positioning requests (such as a
disk file, as opposed to a terminal), then a file <em>position indicator</em> associated with the
stream is positioned at the start (character number zero) of the file, unless the file is
opened with append mode in which case it is implementation-defined whether the file
position indicator is initially positioned at the beginning or the end of the file. The file
position indicator is maintained by subsequent reads, writes, and positioning requests, to
facilitate an orderly progression through the file.</p>
<p>Binary files are not truncated, except as defined in <a class="reference internal" href="#id16"><span>The fopen function</span></a>. Whether a write on a text
stream causes the associated file to be truncated beyond that point is implementation-defined.</p>
<p>When a stream is <em>unbuffered</em>, characters are intended to appear from the source or at the
destination as soon as possible. Otherwise characters may be accumulated and
transmitted to or from the host environment as a block. When a stream is <em>fully buffered</em>,
characters are intended to be transmitted to or from the host environment as a block when
a buffer is filled. When a stream is <em>line buffered</em>, characters are intended to be
transmitted to or from the host environment as a block when a new-line character is
encountered. Furthermore, characters are intended to be transmitted as a block to the host
environment when a buffer is filled, when input is requested on an unbuffered stream, or
when input is requested on a line buffered stream that requires the transmission of
characters from the host environment. Support for these characteristics is
implementation-defined, and may be affected via the <em>setbuf</em> and <em>setvbuf</em> functions.</p>
<p>A file may be disassociated from a controlling stream by <em>closing</em> the file. Output streams
are flushed (any unwritten buffer contents are transmitted to the host environment) before
the stream is disassociated from the file. The value of a pointer to a <code class="docutils literal"><span class="pre">FILE</span></code> object is
indeterminate after the associated file is closed (including the standard text streams).
Whether a file of zero length (on which no characters have been written by an output
stream) actually exists is implementation-defined.</p>
<p>The file may be subsequently reopened, by the same or another program execution, and
its contents reclaimed or modified (if it can be repositioned at its start). If the <code class="docutils literal"><span class="pre">main</span></code>
function returns to its original caller, or if the <code class="docutils literal"><span class="pre">exit</span></code> function is called, all open files are
closed (hence all output streams are flushed) before program termination. Other paths to
program termination, such as calling the <code class="docutils literal"><span class="pre">abort</span></code> function, need not close all files
properly.</p>
<p>The address of the <code class="docutils literal"><span class="pre">FILE</span></code> object used to control a stream may be significant; a copy of a
<code class="docutils literal"><span class="pre">FILE</span></code> object need not serve in place of the original.</p>
<p>At program startup, three text streams are predefined and need not be opened explicitly
&#8212; <em>standard input</em> (for reading conventional input), <em>standard output</em> (for writing
conventional output) and <em>standard error</em> (for writing diagnostic output). As initially
opened, the standard error stream is not fully buffered; the standard input and standard
output streams are fully buffered if and only if the stream can be determined not to refer
to an interactive device.</p>
<p>Functions that open additional (nontemporary) files require a <em>file name</em>, which is a string.
The rules for composing valid file names are implementation-defined. Whether the same
file can be simultaneously open multiple times is also implementation-defined.</p>
<p>Although both text and binary wide-oriented streams are conceptually sequences of wide
characters, the external file associated with a wide-oriented stream is a sequence of
multibyte characters, generalized as follows:</p>
<ul class="simple">
<li>Multibyte encodings within files may contain embedded null bytes (unlike multibyte
encodings valid for use internal to the program).</li>
<li>A file need not begin nor end in the initial shift state. <a class="footnote-reference" href="#id10" id="id9">[4]</a></li>
</ul>
<p>Moreover, the encodings used for multibyte characters may differ among files. Both the
nature and choice of such encodings are implementation-defined.</p>
<p>The wide character input functions read multibyte characters from the stream and convert
them to wide characters as if they were read by successive calls to the <code class="docutils literal"><span class="pre">fgetwc</span></code> function.
Each conversion occurs as if by a call to the <code class="docutils literal"><span class="pre">mbrtowc</span></code> function, with the conversion state
described by the stream&#8217;s own <code class="docutils literal"><span class="pre">mbstate_t</span></code> object. The byte input functions read
characters from the stream as if by successive calls to the fgetc function.</p>
<p>The wide character output functions convert wide characters to multibyte characters and
write them to the stream as if they were written by successive calls to the <code class="docutils literal"><span class="pre">fputwc</span></code>
function. Each conversion occurs as if by a call to the <code class="docutils literal"><span class="pre">wcrtomb</span></code> function, with the
conversion state described by the stream&#8217;s own <code class="docutils literal"><span class="pre">mbstate_t</span></code> object. The byte output
functions write characters to the stream as if by successive calls to the <code class="docutils literal"><span class="pre">fputc</span></code> function.</p>
<p>In some cases, some of the byte input/output functions also perform conversions between
multibyte characters and wide characters. These conversions also occur as if by calls to
the <code class="docutils literal"><span class="pre">mbrtowc</span></code> and <code class="docutils literal"><span class="pre">wcrtomb</span></code> functions.</p>
<p>An <em>encoding error</em> occurs if the character sequence presented to the underlying
<code class="docutils literal"><span class="pre">mbrtowc</span></code> function does not form a valid (generalized) multibyte character, or if the code
value passed to the underlying <code class="docutils literal"><span class="pre">wcrtomb</span></code> does not correspond to a valid (generalized)
multibyte character. The wide character input/output functions and the byte input/output
functions store the value of the macro <code class="docutils literal"><span class="pre">EILSEQ</span></code> in errno if and only if an encoding error
occurs.</p>
<p><strong>Environmental limits</strong></p>
<p>The value of <code class="docutils literal"><span class="pre">FOPEN_MAX</span></code> shall be at least eight, including the three standard text
streams.</p>
<p><strong>Forward references:</strong> the <code class="docutils literal"><span class="pre">exit</span></code> function (<a class="reference internal" href="../stdlib/#id14"><span>The exit function</span></a>), the <code class="docutils literal"><span class="pre">fgetc</span></code> function (<a class="reference internal" href="#id64"><span>The fgetc function</span></a>), the
<code class="docutils literal"><span class="pre">fopen</span></code> function (<a class="reference internal" href="#id16"><span>The fopen function</span></a>), the <code class="docutils literal"><span class="pre">fputc</span></code> function (<a class="reference internal" href="#id67"><span>The fputc function</span></a>), the <code class="docutils literal"><span class="pre">setbuf</span></code> function
(<a class="reference internal" href="#id22"><span>The setbuf function</span></a>), the <code class="docutils literal"><span class="pre">setvbuf</span></code> function (<a class="reference internal" href="#id23"><span>The setvbuf function</span></a>), the <code class="docutils literal"><span class="pre">fgetwc</span></code> function (<a class="reference internal" href="../wchar/#id32"><span>The fgetwc function</span></a>), the
<code class="docutils literal"><span class="pre">fputwc</span></code> function (<a class="reference internal" href="../wchar/#id35"><span>The fputwc function</span></a>), conversion state (<a class="reference internal" href="../wchar/#id51"><span>Extended multibyte/wide character conversion utilities</span></a>), the <code class="docutils literal"><span class="pre">mbrtowc</span></code> function
(<a class="reference internal" href="../wchar/#id57"><span>The mbrtowc function</span></a>), the <code class="docutils literal"><span class="pre">wcrtomb</span></code> function (<a class="reference internal" href="../wchar/#id60"><span>The wcrtomb function</span></a>).</p>
<table class="docutils footnote" frame="void" id="id10" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id9">[4]</a></td><td>Setting the file position indicator to end-of-file, as with <code class="docutils literal"><span class="pre">fseek(file,</span> <span class="pre">0,</span> <span class="pre">SEEK_END)</span></code>, has
undefined behavior for a binary stream (because of possible trailing null characters) or for any stream
with state-dependent encoding that does not assuredly end in the initial shift state.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="operations-on-files">
<span id="index-6"></span><h2>33.4. Operations on files<a class="headerlink" href="#operations-on-files" title="Permalink to this headline">¶</a></h2>
<div class="section" id="the-remove-function">
<span id="remove"></span><span id="index-7"></span><h3>33.4.1. The <code class="docutils literal"><span class="pre">remove</span></code> function<a class="headerlink" href="#the-remove-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="nf">remove</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">filename</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">remove</span></code> function causes the file whose name is the string pointed to by <code class="docutils literal"><span class="pre">filename</span></code>
to be no longer accessible by that name. A subsequent attempt to open that file using that
name will fail, unless it is created anew. If the file is open, the behavior of the remove
function is implementation-defined.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">remove</span></code> function returns zero if the operation succeeds, nonzero if it fails.</p>
</div>
<div class="section" id="the-rename-function">
<span id="rename"></span><span id="index-8"></span><h3>33.4.2. The <code class="docutils literal"><span class="pre">rename</span></code> function<a class="headerlink" href="#the-rename-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="nf">rename</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">old</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">new</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">rename</span></code> function causes the file whose name is the string pointed to by old to be
henceforth known by the name given by the string pointed to by new. The file named
old is no longer accessible by that name. If a file named by the string pointed to by new
exists prior to the call to the <code class="docutils literal"><span class="pre">rename</span></code> function, the behavior is implementation-defined.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">rename</span></code> function returns zero if the operation succeeds, nonzero if it fails, <a class="footnote-reference" href="#id12" id="id11">[5]</a> in
which case if the file existed previously it is still known by its original name.</p>
<table class="docutils footnote" frame="void" id="id12" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id11">[5]</a></td><td>Among the reasons the implementation may cause the <code class="docutils literal"><span class="pre">rename</span></code> function to fail are that the file is open
or that it is necessary to copy its contents to effectuate its renaming.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="the-tmpfile-function">
<span id="tmpfile"></span><span id="index-9"></span><h3>33.4.3. The <code class="docutils literal"><span class="pre">tmpfile</span></code> function<a class="headerlink" href="#the-tmpfile-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">FILE</span> <span class="o">*</span><span class="nf">tmpfile</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">tmpfile</span></code> function creates a temporary binary file that is different from any other
existing file and that will automatically be removed when it is closed or at program
termination. If the program terminates abnormally, whether an open temporary file is
removed is implementation-defined. The file is opened for update with &#8220;wb+&#8221; mode.</p>
<p><strong>Recommended practice</strong></p>
<p>It should be possible to open at least <code class="docutils literal"><span class="pre">TMP_MAX</span></code> temporary files during the lifetime of the
program (this limit may be shared with <code class="docutils literal"><span class="pre">tmpnam</span></code>) and there should be no limit on the
number simultaneously open other than this limit and any limit on the number of open
files (<code class="docutils literal"><span class="pre">FOPEN_MAX</span></code>).</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">tmpfile</span></code> function returns a pointer to the stream of the file that it created. If the file
cannot be created, the tmpfile function returns a null pointer.</p>
<p><strong>Forward references:</strong> the <code class="docutils literal"><span class="pre">fopen</span></code> function (<a class="reference internal" href="#id16"><span>The fopen function</span></a>).</p>
</div>
<div class="section" id="the-tmpnam-function">
<span id="tmpnam"></span><span id="id13"></span><span id="index-10"></span><h3>33.4.4. The <code class="docutils literal"><span class="pre">tmpnam</span></code> function<a class="headerlink" href="#the-tmpnam-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">char</span> <span class="o">*</span><span class="nf">tmpnam</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">s</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">tmpnam</span></code> function generates a string that is a valid file name and that is not the same
as the name of an existing file. <a class="footnote-reference" href="#id15" id="id14">[6]</a> The function is potentially capable of generating
<code class="docutils literal"><span class="pre">TMP_MAX</span></code> different strings, but any or all of them may already be in use by existing files
and thus not be suitable return values.</p>
<p>The <code class="docutils literal"><span class="pre">tmpnam</span></code> function generates a different string each time it is called.</p>
<p>The implementation shall behave as if no library function calls the tmpnam function.</p>
<p><strong>Returns</strong></p>
<p>If no suitable string can be generated, the <code class="docutils literal"><span class="pre">tmpnam</span></code> function returns a null pointer.
Otherwise, if the argument is a null pointer, the <code class="docutils literal"><span class="pre">tmpnam</span></code> function leaves its result in an
internal static object and returns a pointer to that object (subsequent calls to the tmpnam
function may modify the same object). If the argument is not a null pointer, it is assumed
to point to an array of at least <code class="docutils literal"><span class="pre">L_tmpnam</span></code> chars; the <code class="docutils literal"><span class="pre">tmpnam</span></code> function writes its result
in that array and returns the argument as its value.</p>
<p><strong>Environmental limits</strong></p>
<p>The value of the macro <code class="docutils literal"><span class="pre">TMP_MAX</span></code> shall be at least 25.</p>
<table class="docutils footnote" frame="void" id="id15" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id14">[6]</a></td><td>Files created using strings generated by the tmpnam function are temporary only in the sense that
their names should not collide with those generated by conventional naming rules for the
implementation. It is still necessary to use the remove function to remove such files when their use
is ended, and before program termination.</td></tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="file-access-functions">
<span id="index-11"></span><h2>33.5. File access functions<a class="headerlink" href="#file-access-functions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="the-fclose-function">
<span id="fclose"></span><span id="index-12"></span><h3>33.5.1. The <code class="docutils literal"><span class="pre">fclose</span></code> function<a class="headerlink" href="#the-fclose-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="nf">fclose</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span><span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>A successful call to the <code class="docutils literal"><span class="pre">fclose</span></code> function causes the stream pointed to by stream to be
flushed and the associated file to be closed. Any unwritten buffered data for the stream
are delivered to the host environment to be written to the file; any unread buffered data
are discarded. Whether or not the call succeeds, the stream is disassociated from the file
and any buffer set by the setbuf or setvbuf function is disassociated from the stream
(and deallocated if it was automatically allocated).</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">fclose</span></code> function returns zero if the stream was successfully closed, or <code class="docutils literal"><span class="pre">EOF</span></code> if any
errors were detected.</p>
</div>
<div class="section" id="the-fflush-function">
<span id="fflush"></span><span id="index-13"></span><h3>33.5.2. The <code class="docutils literal"><span class="pre">fflush</span></code> function<a class="headerlink" href="#the-fflush-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="nf">fflush</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span><span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>If stream points to an output stream or an update stream in which the most recent
operation was not input, the fflush function causes any unwritten data for that stream
to be delivered to the host environment to be written to the file; otherwise, the behavior is
undefined.</p>
<p>If stream is a null pointer, the fflush function performs this flushing action on all
streams for which the behavior is defined above.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">fflush</span></code> function sets the error indicator for the stream and returns <code class="docutils literal"><span class="pre">EOF</span></code> if a write
error occurs, otherwise it returns zero.</p>
<p><strong>Forward references:</strong> the <code class="docutils literal"><span class="pre">fopen</span></code> function (<a class="reference internal" href="#id16"><span>The fopen function</span></a>).</p>
</div>
<div class="section" id="the-fopen-function">
<span id="fopen"></span><span id="id16"></span><span id="index-14"></span><h3>33.5.3. The <code class="docutils literal"><span class="pre">fopen</span></code> function<a class="headerlink" href="#the-fopen-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">FILE</span> <span class="o">*</span><span class="nf">fopen</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">filename</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">mode</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">fopen</span></code> function opens the file whose name is the string pointed to by filename,
and associates a stream with it.</p>
<p id="index-15">The argument mode points to a string. If the string is one of the following, the file is
open in the indicated mode. Otherwise, the behavior is undefined. <a class="footnote-reference" href="#id18" id="id17">[7]</a></p>
<blockquote>
<div><div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">r</span></code>                open text file for reading</div>
<div class="line"><code class="docutils literal"><span class="pre">w</span></code>                truncate to zero length or create text file for writing</div>
<div class="line"><code class="docutils literal"><span class="pre">a</span></code>                append; open or create text file for writing at end-of-file</div>
<div class="line"><code class="docutils literal"><span class="pre">rb</span></code>               open binary file for reading</div>
<div class="line"><code class="docutils literal"><span class="pre">wb</span></code>               truncate to zero length or create binary file for writing</div>
<div class="line"><code class="docutils literal"><span class="pre">ab</span></code>               append; open or create binary file for writing at end-of-file</div>
<div class="line"><code class="docutils literal"><span class="pre">r+</span></code>               open text file for update (reading and writing)</div>
<div class="line"><code class="docutils literal"><span class="pre">w+</span></code>               truncate to zero length or create text file for update</div>
<div class="line"><code class="docutils literal"><span class="pre">a+</span></code>               append; open or create text file for update, writing at end-of-file</div>
<div class="line"><code class="docutils literal"><span class="pre">r+b</span></code> <em>or</em> <code class="docutils literal"><span class="pre">rb+</span></code> open binary file for update (reading and writing)</div>
<div class="line"><code class="docutils literal"><span class="pre">w+b</span></code> <em>or</em> <code class="docutils literal"><span class="pre">wb+</span></code> truncate to zero length or create binary file for update</div>
<div class="line"><code class="docutils literal"><span class="pre">a+b</span></code> <em>or</em> <code class="docutils literal"><span class="pre">ab+</span></code> append; open or create binary file for update, writing at end-of-file</div>
</div>
</div></blockquote>
<p>Opening a file with read mode (<code class="docutils literal"><span class="pre">'r'</span></code> as the first character in the mode argument) fails if
the file does not exist or cannot be read.</p>
<p>Opening a file with append mode (<code class="docutils literal"><span class="pre">'a'</span></code> as the first character in the mode argument)
causes all subsequent writes to the file to be forced to the then current end-of-file,
regardless of intervening calls to the <code class="docutils literal"><span class="pre">fseek</span></code> function. In some implementations, opening
a binary file with append mode (<code class="docutils literal"><span class="pre">'b'</span></code> as the second or third character in the above list of
mode argument values) may initially position the file position indicator for the stream
beyond the last data written, because of null character padding.</p>
<p>When a file is opened with update mode (<code class="docutils literal"><span class="pre">'+'</span></code> as the second or third character in the
above list of mode argument values), both input and output may be performed on the
associated stream. However, output shall not be directly followed by input without an
intervening call to the <code class="docutils literal"><span class="pre">fflush</span></code> function or to a file positioning function (<code class="docutils literal"><span class="pre">fseek,</span>
<span class="pre">``fsetpos</span></code> or <code class="docutils literal"><span class="pre">rewind</span></code>), and input shall not be directly followed by output without an
intervening call to a file positioning function, unless the input operation encounters end-
of-file. Opening (or creating) a text file with update mode may instead open (or create) a
binary stream in some implementations.</p>
<p>When opened, a stream is fully buffered if and only if it can be determined not to refer to
an interactive device. The error and end-of-file indicators for the stream are cleared.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">fopen</span></code> function returns a pointer to the object controlling the stream. If the open
operation fails, fopen returns a null pointer.</p>
<p><strong>Forward references:</strong> file positioning functions (<a class="reference internal" href="#id68"><span>File positioning functions</span></a>).</p>
<table class="docutils footnote" frame="void" id="id18" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id17">[7]</a></td><td>If the string begins with one of the above sequences, the implementation might choose to ignore the
remaining characters, or it might use them to select different kinds of a file (some of which might not
conform to the properties in <a class="reference internal" href="#id3"><span>Streams</span></a>).</td></tr>
</tbody>
</table>
</div>
<div class="section" id="the-freopen-function">
<span id="id19"></span><span id="index-16"></span><h3>33.5.4. The <code class="docutils literal"><span class="pre">freopen</span></code> function<a class="headerlink" href="#the-freopen-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">FILE</span> <span class="o">*</span><span class="nf">freopen</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">filename</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">mode</span><span class="p">,</span> <span class="kt">FILE</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">freopen</span></code> function opens the file whose name is the string pointed to by filename
and associates the stream pointed to by stream with it. The mode argument is used just
as in the <code class="docutils literal"><span class="pre">fopen</span></code> function. <a class="footnote-reference" href="#id21" id="id20">[8]</a></p>
<p>If filename is a null pointer, the <code class="docutils literal"><span class="pre">freopen</span></code> function attempts to change the mode of
the stream to that specified by mode, as if the name of the file currently associated with
the stream had been used. It is implementation-defined which changes of mode are
permitted (if any), and under what circumstances.</p>
<p>The <code class="docutils literal"><span class="pre">freopen</span></code> function first attempts to close any file that is associated with the specified
stream. Failure to close the file is ignored. The error and end-of-file indicators for the
stream are cleared.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">freopen</span></code> function returns a null pointer if the open operation fails. Otherwise,
<code class="docutils literal"><span class="pre">freopen</span></code> returns the value of stream.</p>
<table class="docutils footnote" frame="void" id="id21" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id20">[8]</a></td><td>The primary use of the <code class="docutils literal"><span class="pre">freopen</span></code> function is to change the file associated with a standard text stream
(<code class="docutils literal"><span class="pre">stderr,</span> <span class="pre">stdin</span></code> or <code class="docutils literal"><span class="pre">stdout</span></code>), as those identifiers need not be modifiable lvalues to which the value
returned by the <code class="docutils literal"><span class="pre">fopen</span></code> function may be assigned.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="the-setbuf-function">
<span id="id22"></span><span id="index-17"></span><h3>33.5.5. The <code class="docutils literal"><span class="pre">setbuf</span></code> function<a class="headerlink" href="#the-setbuf-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">void</span> <span class="nf">setbuf</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">stream</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">buf</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>Except that it returns no value, the <code class="docutils literal"><span class="pre">setbuf</span></code> function is equivalent to the <code class="docutils literal"><span class="pre">setvbuf</span></code>
function invoked with the values <code class="docutils literal"><span class="pre">_IOFBF</span></code> for mode and <code class="docutils literal"><span class="pre">BUFSIZ</span></code> for size, or (if <code class="docutils literal"><span class="pre">buf</span></code>
is a null pointer), with the value <code class="docutils literal"><span class="pre">_IONBF</span></code> for mode.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">setbuf</span></code> function returns no value.</p>
<p><strong>Forward references:</strong> the <code class="docutils literal"><span class="pre">setvbuf</span></code> function (<a class="reference internal" href="#id23"><span>The setvbuf function</span></a>).</p>
</div>
<div class="section" id="the-setvbuf-function">
<span id="id23"></span><span id="index-18"></span><h3>33.5.6. The <code class="docutils literal"><span class="pre">setvbuf</span></code> function<a class="headerlink" href="#the-setvbuf-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="nf">setvbuf</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">stream</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">buf</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mode</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">size</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">setvbuf</span></code> function may be used only after the stream pointed to by stream has
been associated with an open file and before any other operation (other than an
unsuccessful call to <code class="docutils literal"><span class="pre">setvbuf</span></code>) is performed on the stream. The argument mode
determines how stream will be buffered, as follows: <code class="docutils literal"><span class="pre">_IOFBF</span></code> causes input/output to be
fully buffered; <code class="docutils literal"><span class="pre">_IOLBF</span></code> causes input/output to be line buffered; <code class="docutils literal"><span class="pre">_IONBF</span></code> causes
input/output to be unbuffered. If buf is not a null pointer, the array it points to may be
used instead of a buffer allocated by the setvbuf function <a class="footnote-reference" href="#id25" id="id24">[9]</a> and the argument size
specifies the size of the array; otherwise, size may determine the size of a buffer
allocated by the <code class="docutils literal"><span class="pre">setvbuf</span></code> function. The contents of the array at any time are
indeterminate.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">setvbuf</span></code> function returns zero on success, or nonzero if an invalid value is given
for mode or if the request cannot be honored.</p>
<table class="docutils footnote" frame="void" id="id25" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id24">[9]</a></td><td>The buffer has to have a lifetime at least as great as the open stream, so the stream should be closed
before a buffer that has automatic storage duration is deallocated upon block exit.</td></tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="formatted-input-output-functions">
<span id="id26"></span><span id="index-19"></span><h2>33.6. Formatted input/output functions<a class="headerlink" href="#formatted-input-output-functions" title="Permalink to this headline">¶</a></h2>
<p>The formatted input/output functions shall behave as if there is a sequence point after the
actions associated with each specifier. <a class="footnote-reference" href="#id28" id="id27">[10]</a></p>
<table class="docutils footnote" frame="void" id="id28" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id27">[10]</a></td><td>The <code class="docutils literal"><span class="pre">fprintf</span></code> functions perform writes to memory for the <code class="docutils literal"><span class="pre">%n</span></code> specifier.</td></tr>
</tbody>
</table>
<div class="section" id="the-fprintf-function">
<span id="id29"></span><span id="index-20"></span><h3>33.6.1. The <code class="docutils literal"><span class="pre">fprintf</span></code> function<a class="headerlink" href="#the-fprintf-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="nf">fprintf</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">stream</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">format</span><span class="p">,</span> <span class="p">...);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">fprintf</span></code> function writes output to the stream pointed to by stream, under control
of the string pointed to by format that specifies how subsequent arguments are
converted for output. If there are insufficient arguments for the format, the behavior is
undefined. If the format is exhausted while arguments remain, the excess arguments are
evaluated (as always) but are otherwise ignored. The <code class="docutils literal"><span class="pre">fprintf</span></code> function returns when
the end of the format string is encountered.</p>
<p>The format shall be a multibyte character sequence, beginning and ending in its initial
shift state. The format is composed of zero or more directives: ordinary multibyte
characters (not <code class="docutils literal"><span class="pre">%</span></code>), which are copied unchanged to the output stream; and conversion
pecifications, each of which results in fetching zero or more subsequent arguments,
converting them, if applicable, according to the corresponding conversion specifier, and
then writing the result to the output stream.</p>
<p>Each conversion specification is introduced by the character <code class="docutils literal"><span class="pre">%</span></code>. After the <code class="docutils literal"><span class="pre">%</span></code>, the following
appear in sequence:</p>
<ul class="simple">
<li>Zero or more flags (in any order) that modify the meaning of the conversion
specification.</li>
<li>An optional minimum field width. If the converted value has fewer characters than the
field width, it is padded with spaces (by default) on the left (or right, if the left
adjustment flag, described later, has been given) to the field width. The field width
takes the form of an asterisk * (described later) or a nonnegative decimal integer. <a class="footnote-reference" href="#id38" id="id30">[11]</a></li>
<li>An optional precision that gives the minimum number of digits to appear for the <code class="docutils literal"><span class="pre">d,</span> <span class="pre">i,</span>
<span class="pre">o,</span> <span class="pre">u,</span> <span class="pre">x</span></code> and <code class="docutils literal"><span class="pre">X</span></code> conversions, the number of digits to appear after the decimal-point
character for <code class="docutils literal"><span class="pre">a,</span> <span class="pre">A,</span> <span class="pre">e,</span> <span class="pre">E,</span> <span class="pre">f</span></code> and <code class="docutils literal"><span class="pre">F</span></code> conversions, the maximum number of significant
digits for the g and G conversions, or the maximum number of bytes to be written for
s conversions. The precision takes the form of a period (<code class="docutils literal"><span class="pre">.</span></code>) followed either by an
asterisk <code class="docutils literal"><span class="pre">*</span></code> (described later) or by an optional decimal integer; if only the period is
specified, the precision is taken as zero. If a precision appears with any other
conversion specifier, the behavior is undefined.</li>
<li>An optional length modifier that specifies the size of the argument.</li>
<li>A conversion specifier character that specifies the type of conversion to be applied.</li>
</ul>
<p>As noted above, a field width, or precision, or both, may be indicated by an asterisk. In
this case, an int argument supplies the field width or precision. The arguments
specifying field width, or precision, or both, shall appear (in that order) before the
argument (if any) to be converted. A negative field width argument is taken as a - flag
followed by a positive field width. A negative precision argument is taken as if the
precision were omitted.</p>
<p>The flag characters and their meanings are:</p>
<p><code class="docutils literal"><span class="pre">-</span></code> The result of the conversion is left-justified within the field. (It is right-justified if
this flag is not specified.)</p>
<p><code class="docutils literal"><span class="pre">+</span></code> The result of a signed conversion always begins with a plus or minus sign. (It
begins with a sign only when a negative value is converted if this flag is not specified.) <a class="footnote-reference" href="#id39" id="id31">[12]</a></p>
<p><em>space</em> If the first character of a signed conversion is not a sign, or if a signed conversion
results in no characters, a space is prefixed to the result. If the <em>space</em> and + flags
both appear, the <em>space</em> flag is ignored.</p>
<p><code class="docutils literal"><span class="pre">#</span></code> The result is converted to an &#8220;alternative form&#8221;. For o conversion, it increases
the precision, if and only if necessary, to force the first digit of the result to be a
zero (if the value and precision are both 0, a single 0 is printed). For <code class="docutils literal"><span class="pre">x</span></code> (or <code class="docutils literal"><span class="pre">X</span></code>)
conversion, a nonzero result has <code class="docutils literal"><span class="pre">0x</span></code> (or <code class="docutils literal"><span class="pre">0X</span></code>) prefixed to it. For <code class="docutils literal"><span class="pre">a,</span> <span class="pre">A,</span> <span class="pre">e,</span> <span class="pre">E,</span> <span class="pre">f,</span> <span class="pre">F,</span> <span class="pre">g</span></code>
and <code class="docutils literal"><span class="pre">G</span></code> conversions, the result of converting a floating-point number always
contains a decimal-point character, even if no digits follow it. (Normally, a
decimal-point character appears in the result of these conversions only if a digit
follows it.) For <code class="docutils literal"><span class="pre">g</span></code> and <code class="docutils literal"><span class="pre">G</span></code> conversions, trailing zeros are not removed from the
result. For other conversions, the behavior is undefined.</p>
<p><code class="docutils literal"><span class="pre">0</span></code> For <code class="docutils literal"><span class="pre">d,</span> <span class="pre">i,</span> <span class="pre">o,</span> <span class="pre">u,</span> <span class="pre">x,</span> <span class="pre">X,</span> <span class="pre">a,</span> <span class="pre">A,</span> <span class="pre">e,</span> <span class="pre">E,</span> <span class="pre">f,</span> <span class="pre">F,</span> <span class="pre">g</span></code> and <code class="docutils literal"><span class="pre">G</span></code> conversions, leading zeros
(following any indication of sign or base) are used to pad to the field width rather
than performing space padding, except when converting an infinity or NaN. If the
0 and - flags both appear, the 0 flag is ignored. For <code class="docutils literal"><span class="pre">d,</span> <span class="pre">i,</span> <span class="pre">o,</span> <span class="pre">u,</span> <span class="pre">x</span></code> and <code class="docutils literal"><span class="pre">X</span></code>
conversions, if a precision is specified, the 0 flag is ignored. For other
conversions, the behavior is undefined.</p>
<p>The length modifiers and their meanings are:</p>
<p><code class="docutils literal"><span class="pre">hh</span></code> Specifies that a following <code class="docutils literal"><span class="pre">d,</span> <span class="pre">i,</span> <span class="pre">o,</span> <span class="pre">u,</span> <span class="pre">x</span></code> or <code class="docutils literal"><span class="pre">X</span></code> conversion specifier applies to a
<code class="docutils literal"><span class="pre">signed</span> <span class="pre">char</span></code> or <code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">char</span></code> argument (the argument will have
been promoted according to the integer promotions, but its value shall be
converted to <code class="docutils literal"><span class="pre">signed</span> <span class="pre">char</span></code> or <code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">char</span></code> before printing); or that
a following n conversion specifier applies to a pointer to a <code class="docutils literal"><span class="pre">signed</span> <span class="pre">char</span></code>
argument.</p>
<p><code class="docutils literal"><span class="pre">h</span></code> Specifies that a following <code class="docutils literal"><span class="pre">d,</span> <span class="pre">i,</span> <span class="pre">o,</span> <span class="pre">u,</span> <span class="pre">x</span></code> or <code class="docutils literal"><span class="pre">X</span></code> conversion specifier applies to a
<code class="docutils literal"><span class="pre">short</span> <span class="pre">int</span></code> or <code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">short</span> <span class="pre">int</span></code> argument (the argument will
have been promoted according to the integer promotions, but its value shall
be converted to short int or unsigned short int before printing);
or that a following n conversion specifier applies to a pointer to a <code class="docutils literal"><span class="pre">short</span>
<span class="pre">int</span></code> argument.</p>
<p><code class="docutils literal"><span class="pre">l</span> <span class="pre">(ell)</span></code> Specifies that a following <code class="docutils literal"><span class="pre">d,</span> <span class="pre">i,</span> <span class="pre">o,</span> <span class="pre">u,</span> <span class="pre">x</span></code> or <code class="docutils literal"><span class="pre">X</span></code> conversion specifier applies to a
<code class="docutils literal"><span class="pre">long</span> <span class="pre">int</span></code> or <code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">int</span></code> argument; that a following <code class="docutils literal"><span class="pre">n</span></code>
conversion specifier applies to a pointer to a <code class="docutils literal"><span class="pre">long</span> <span class="pre">int</span></code> argument; that a
following <code class="docutils literal"><span class="pre">c</span></code> conversion specifier applies to a <code class="docutils literal"><span class="pre">wint_t</span></code> argument; that a
following <code class="docutils literal"><span class="pre">s</span></code> conversion specifier applies to a pointer to a <code class="docutils literal"><span class="pre">wchar_t</span></code>
argument; or has no effect on a following <code class="docutils literal"><span class="pre">a,</span> <span class="pre">A,</span> <span class="pre">e,</span> <span class="pre">E,</span> <span class="pre">f,</span> <span class="pre">F,</span> <span class="pre">g</span></code> or <code class="docutils literal"><span class="pre">G</span></code> conversion
specifier.</p>
<p><code class="docutils literal"><span class="pre">ll</span> <span class="pre">(ell-ell)</span></code> Specifies that a following <code class="docutils literal"><span class="pre">d,</span> <span class="pre">i,</span> <span class="pre">o,</span> <span class="pre">u,</span> <span class="pre">x</span></code> or <code class="docutils literal"><span class="pre">X</span></code> conversion specifier applies to a
<code class="docutils literal"><span class="pre">long</span> <span class="pre">long</span> <span class="pre">int</span></code> or <code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">long</span> <span class="pre">int</span></code> argument; or that a
following <code class="docutils literal"><span class="pre">n</span></code> conversion specifier applies to a pointer to a <code class="docutils literal"><span class="pre">long</span> <span class="pre">long</span> <span class="pre">int</span></code>
argument.</p>
<p><code class="docutils literal"><span class="pre">j</span></code> Specifies that a following <code class="docutils literal"><span class="pre">d,</span> <span class="pre">i,</span> <span class="pre">o,</span> <span class="pre">u,</span> <span class="pre">x</span></code> or <code class="docutils literal"><span class="pre">X</span></code> conversion specifier applies to
an <code class="docutils literal"><span class="pre">intmax_t</span></code> or <code class="docutils literal"><span class="pre">uintmax_t</span></code> argument; or that a following n conversion
specifier applies to a pointer to an <code class="docutils literal"><span class="pre">intmax_t</span></code> argument.</p>
<p><code class="docutils literal"><span class="pre">z</span></code> Specifies that a following <code class="docutils literal"><span class="pre">d,</span> <span class="pre">i,</span> <span class="pre">o,</span> <span class="pre">u,</span> <span class="pre">x</span></code> or <code class="docutils literal"><span class="pre">X</span></code> conversion specifier applies to a
<code class="docutils literal"><span class="pre">size_t</span></code> or the corresponding signed integer type argument; or that a
following <code class="docutils literal"><span class="pre">n</span></code> conversion specifier applies to a pointer to a signed integer type
corresponding to size_t argument.</p>
<p><code class="docutils literal"><span class="pre">t</span></code> Specifies that a following <code class="docutils literal"><span class="pre">d,</span> <span class="pre">i,</span> <span class="pre">o,</span> <span class="pre">u,</span> <span class="pre">x</span></code> or <code class="docutils literal"><span class="pre">X</span></code> conversion specifier applies to a
<code class="docutils literal"><span class="pre">ptrdiff_t</span></code> or the corresponding unsigned integer type argument; or that a
following <code class="docutils literal"><span class="pre">n</span></code> conversion specifier applies to a pointer to a <code class="docutils literal"><span class="pre">ptrdiff_t</span></code>
argument.</p>
<p><code class="docutils literal"><span class="pre">L</span></code> Specifies that a following <code class="docutils literal"><span class="pre">a,</span> <span class="pre">A,</span> <span class="pre">e,</span> <span class="pre">E,</span> <span class="pre">f,</span> <span class="pre">F,</span> <span class="pre">g</span></code> or <code class="docutils literal"><span class="pre">G</span></code> conversion specifier
applies to a <code class="docutils literal"><span class="pre">long</span> <span class="pre">double</span></code> argument.</p>
<p>If a length modifier appears with any conversion specifier other than as specified above,
the behavior is undefined.</p>
<p>The conversion specifiers and their meanings are:</p>
<p><code class="docutils literal"><span class="pre">d,i</span></code> The <code class="docutils literal"><span class="pre">int</span></code> argument is converted to signed decimal in the style <em>[-]dddd</em>. The
precision specifies the minimum number of digits to appear; if the value
being converted can be represented in fewer digits, it is expanded with
leading zeros. The default precision is 1. The result of converting a zero
value with a precision of zero is no characters.</p>
<p><code class="docutils literal"><span class="pre">o,u,x,X</span></code> The <code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">int</span></code> argument is converted to unsigned octal (<code class="docutils literal"><span class="pre">o</span></code>), unsigned
decimal (<code class="docutils literal"><span class="pre">u</span></code>), or unsigned hexadecimal notation (<code class="docutils literal"><span class="pre">x</span></code> or <code class="docutils literal"><span class="pre">X</span></code>) in the style <em>dddd</em>; the
letters abcdef are used for <code class="docutils literal"><span class="pre">x</span></code> conversion and the letters <code class="docutils literal"><span class="pre">ABCDEF</span></code> for <code class="docutils literal"><span class="pre">X</span></code>
conversion. The precision specifies the minimum number of digits to appear;
if the value being converted can be represented in fewer digits, it is expanded
with leading zeros. The default precision is 1. The result of converting a
zero value with a precision of zero is no characters.</p>
<p><code class="docutils literal"><span class="pre">f,F</span></code> A <code class="docutils literal"><span class="pre">double</span></code> argument representing a floating-point number is converted to
decimal notation in the style <em>[-]ddd.ddd</em>, where the number of digits after
the decimal-point character is equal to the precision specification. If the
precision is missing, it is taken as 6; if the precision is zero and the <code class="docutils literal"><span class="pre">#</span></code> flag is
not specified, no decimal-point character appears. If a decimal-point
character appears, at least one digit appears before it. The value is rounded to
the appropriate number of digits.</p>
<p>A <code class="docutils literal"><span class="pre">double</span></code> argument representing an infinity is converted in one of the styles
<strong>[-]inf</strong> or <strong>[-]infinity</strong> &#8212; which style is implementation-defined. A
double argument representing a NaN is converted in one of the styles
<strong>[-]nan</strong> or <strong>[-]nan</strong> <em>(n-char-sequence)</em> &#8212; which style, and the meaning of
any <em>n-char-sequence</em>, is implementation-defined. The <code class="docutils literal"><span class="pre">F</span></code> conversion specifier
produces <code class="docutils literal"><span class="pre">INF,</span> <span class="pre">INFINITY</span></code> or <code class="docutils literal"><span class="pre">NAN</span></code> instead of <code class="docutils literal"><span class="pre">inf,</span> <span class="pre">infinity</span></code> or <code class="docutils literal"><span class="pre">nan</span></code> respectively. <a class="footnote-reference" href="#id40" id="id32">[13]</a></p>
<p><code class="docutils literal"><span class="pre">e,E</span></code> A <code class="docutils literal"><span class="pre">double</span></code> argument representing a floating-point number is converted in the
style <em>[-]d.ddd</em> <strong>e</strong><span class="math">\(\pm dd\)</span> , where there is one digit (which is nonzero if the
argument is nonzero) before the decimal-point character and the number of
digits after it is equal to the precision; if the precision is missing, it is taken as
6; if the precision is zero and the <code class="docutils literal"><span class="pre">#</span></code> flag is not specified, no decimal-point
character appears. The value is rounded to the appropriate number of digits.
The <code class="docutils literal"><span class="pre">E</span></code> conversion specifier produces a number with <code class="docutils literal"><span class="pre">E</span></code> instead of <code class="docutils literal"><span class="pre">e</span></code>
introducing the exponent. The exponent always contains at least two digits,
and only as many more digits as necessary to represent the exponent. If the
value is zero, the exponent is zero.</p>
<p>A <code class="docutils literal"><span class="pre">double</span></code> argument representing an infinity or NaN is converted in the style
of an <code class="docutils literal"><span class="pre">f</span></code> or <code class="docutils literal"><span class="pre">F</span></code> conversion specifier.</p>
<p><code class="docutils literal"><span class="pre">g,G</span></code> A <code class="docutils literal"><span class="pre">double</span></code> argument representing a floating-point number is converted in
style <code class="docutils literal"><span class="pre">f</span></code> or <code class="docutils literal"><span class="pre">e</span></code> (or in style <code class="docutils literal"><span class="pre">F</span></code> or <code class="docutils literal"><span class="pre">E</span></code> in the case of a <code class="docutils literal"><span class="pre">G</span></code> conversion specifier),
depending on the value converted and the precision. Let <span class="math">\(P\)</span> equal the
precision if nonzero, 6 if the precision is omitted, or 1 if the precision is zero.
Then, if a conversion with style <code class="docutils literal"><span class="pre">E</span></code> would have an exponent of <span class="math">\(X\)</span>:</p>
<ul class="simple">
<li>if <span class="math">\(P &gt; X \geq -4\)</span>, the conversion is with style <code class="docutils literal"><span class="pre">f</span></code> (or <code class="docutils literal"><span class="pre">F</span></code>) and precision <span class="math">\(P - (X + 1)\)</span>.</li>
<li>otherwise, the conversion is with style <code class="docutils literal"><span class="pre">e</span></code> (or <code class="docutils literal"><span class="pre">E</span></code>) and precision <span class="math">\(P - 1\)</span>.</li>
</ul>
<p>Finally, unless the <code class="docutils literal"><span class="pre">#</span></code> flag is used, any trailing zeros are removed from the
fractional portion of the result and the decimal-point character is removed if
there is no fractional portion remaining.</p>
<p>A <code class="docutils literal"><span class="pre">double</span></code> argument representing an infinity or NaN is converted in the style
of an <code class="docutils literal"><span class="pre">f</span></code> or <code class="docutils literal"><span class="pre">F</span></code> conversion specifier.</p>
<p><code class="docutils literal"><span class="pre">a,A</span></code> A <code class="docutils literal"><span class="pre">double</span></code> argument representing a floating-point number is converted in the
style <em>[-]0xh.hhhh</em> <span class="math">\(p \pm d\)</span>, where there is one hexadecimal digit (which is
nonzero if the argument is a normalized floating-point number and is
otherwise unspecified) before the decimal-point character <a class="footnote-reference" href="#id41" id="id33">[14]</a> and the number
of hexadecimal digits after it is equal to the precision; if the precision is
missing and <code class="docutils literal"><span class="pre">FLT_RADIX</span></code> is a power of 2, then the precision is sufficient for
an exact representation of the value; if the precision is missing and
<code class="docutils literal"><span class="pre">FLT_RADIX</span></code> is not a power of 2, then the precision is sufficient to
distinguish <a class="footnote-reference" href="#id42" id="id34">[15]</a> values of type double, except that trailing zeros may be
omitted; if the precision is zero and the # flag is not specified, no decimal-point
character appears. The letters <code class="docutils literal"><span class="pre">abcdef</span></code> are used for <code class="docutils literal"><span class="pre">a</span></code> conversion and
the letters <code class="docutils literal"><span class="pre">ABCDEF</span></code> for <code class="docutils literal"><span class="pre">A</span></code> conversion. The A conversion specifier produces a
number with <code class="docutils literal"><span class="pre">X</span></code> and <code class="docutils literal"><span class="pre">P</span></code> instead of <code class="docutils literal"><span class="pre">x</span></code> and <code class="docutils literal"><span class="pre">p</span></code>. The exponent always contains at
least one digit, and only as many more digits as necessary to represent the
decimal exponent of 2. If the value is zero, the exponent is zero.
A <code class="docutils literal"><span class="pre">double</span></code> argument representing an infinity or NaN is converted in the style
of an <code class="docutils literal"><span class="pre">f</span></code> or <code class="docutils literal"><span class="pre">F</span></code> conversion specifier.</p>
<p><code class="docutils literal"><span class="pre">c</span></code> If no <code class="docutils literal"><span class="pre">l</span></code> length modifier is present, the <code class="docutils literal"><span class="pre">int</span></code> argument is converted to an
<code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">char</span></code>, and the resulting character is written.</p>
<p>If an <code class="docutils literal"><span class="pre">l</span></code> length modifier is present, the <code class="docutils literal"><span class="pre">wint_t</span></code> argument is converted as if by
an <code class="docutils literal"><span class="pre">ls</span></code> conversion specification with no precision and an argument that points
to the initial element of a two-element array of <code class="docutils literal"><span class="pre">wchar_t</span></code>, the first element
containing the <code class="docutils literal"><span class="pre">wint_t</span></code> argument to the <code class="docutils literal"><span class="pre">lc</span></code> conversion specification and the
second a null wide character.</p>
<p><code class="docutils literal"><span class="pre">s</span></code> If no <code class="docutils literal"><span class="pre">l</span></code> length modifier is present, the argument shall be a pointer to the initial
element of an array of character type. <a class="footnote-reference" href="#id43" id="id35">[16]</a> Characters from the array are
written up to (but not including) the terminating null character. If the
precision is specified, no more than that many bytes are written. If the
precision is not specified or is greater than the size of the array, the array shall
contain a null character.</p>
<p>If an <code class="docutils literal"><span class="pre">l</span></code> length modifier is present, the argument shall be a pointer to the initial
element of an array of <code class="docutils literal"><span class="pre">wchar_t</span></code> type. Wide characters from the array are
converted to multibyte characters (each as if by a call to the <code class="docutils literal"><span class="pre">wcrtomb</span></code>
function, with the conversion state described by an <code class="docutils literal"><span class="pre">mbstate_t</span></code> object
initialized to zero before the first wide character is converted) up to and
including a terminating null wide character. The resulting multibyte
characters are written up to (but not including) the terminating null character
(byte). If no precision is specified, the array shall contain a null wide
character. If a precision is specified, no more than that many bytes are
written (including shift sequences, if any), and the array shall contain a null
wide character if, to equal the multibyte character sequence length given by
the precision, the function would need to access a wide character one past the
end of the array. In no case is a partial multibyte character written. <a class="footnote-reference" href="#id44" id="id36">[17]</a></p>
<p><code class="docutils literal"><span class="pre">p</span></code> The argument shall be a pointer to void. The value of the pointer is
converted to a sequence of printing characters, in an implementation-defined
manner.</p>
<p><code class="docutils literal"><span class="pre">n</span></code> The argument shall be a pointer to signed integer into which is written the
number of characters written to the output stream so far by this call to
fprintf. No argument is converted, but one is consumed. If the conversion
specification includes any flags, a field width, or a precision, the behavior is
undefined.</p>
<p><code class="docutils literal"><span class="pre">%</span></code> A <code class="docutils literal"><span class="pre">%</span></code> character is written. No argument is converted. The complete
conversion specification shall be <code class="docutils literal"><span class="pre">%%</span></code>.</p>
<p>If a conversion specification is invalid, the behavior is undefined. If any argument is
not the correct type for the corresponding conversion specification, the behavior is
undefined.</p>
<p>In no case does a nonexistent or small field width cause truncation of a field; if the result
of a conversion is wider than the field width, the field is expanded to contain the
conversion result.</p>
<p>For <code class="docutils literal"><span class="pre">a</span></code> and <code class="docutils literal"><span class="pre">A</span></code> conversions, if <code class="docutils literal"><span class="pre">FLT_RADIX</span></code> is a power of 2, the value is correctly rounded
to a hexadecimal floating number with the given precision.</p>
<p><strong>Recommended practice</strong></p>
<p>For <code class="docutils literal"><span class="pre">a</span></code> and <code class="docutils literal"><span class="pre">A</span></code> conversions, if <code class="docutils literal"><span class="pre">FLT_RADIX</span></code> is not a power of 2 and the result is not exactly
representable in the given precision, the result should be one of the two adjacent numbers
in hexadecimal floating style with the given precision, with the extra stipulation that the
error should have a correct sign for the current rounding direction.</p>
<p>For <code class="docutils literal"><span class="pre">e,</span> <span class="pre">E,</span> <span class="pre">f,</span> <span class="pre">F,</span> <span class="pre">g</span></code> and <code class="docutils literal"><span class="pre">G</span></code> conversions, if the number of significant decimal digits is at most
<code class="docutils literal"><span class="pre">DECIMAL_DIG</span></code>, then the result should be correctly rounded. <a class="footnote-reference" href="#id45" id="id37">[18]</a> If the number of
significant decimal digits is more than <code class="docutils literal"><span class="pre">DECIMAL_DIG</span></code> but the source value is exactly
representable with <code class="docutils literal"><span class="pre">DECIMAL_DIG</span></code> digits, then the result should be an exact
representation with trailing zeros. Otherwise, the source value is bounded by two
adjacent decimal strings <span class="math">\(L &lt; U\)</span>, both having <code class="docutils literal"><span class="pre">DECIMAL_DIG</span></code> significant digits; the value
of the resultant decimal string <span class="math">\(D\)</span> should satisfy <span class="math">\(L \leq D \leq U\)</span>, with the extra stipulation that
the error should have a correct sign for the current rounding direction.
Returns</p>
<p>The <code class="docutils literal"><span class="pre">fprintf</span></code> function returns the number of characters transmitted, or a negative value
if an output or encoding error occurred.</p>
<p><strong>Environmental limits</strong></p>
<p>The number of characters that can be produced by any single conversion shall be at least
4095.</p>
<p>EXAMPLE 1 To print a date and time in the form &#8220;Sunday, July 3, 10:02&#8221; followed by <span class="math">\(\pi\)</span> to five decimal places:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;math.h&gt;</span>
<span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cm">/* ... */</span>
<span class="kt">char</span> <span class="o">*</span><span class="n">weekday</span><span class="p">,</span> <span class="o">*</span><span class="n">month</span><span class="p">;</span> <span class="c1">// pointers to strings</span>
<span class="kt">int</span> <span class="n">day</span><span class="p">,</span> <span class="n">hour</span><span class="p">,</span> <span class="n">min</span><span class="p">;</span>
<span class="n">fprintf</span><span class="p">(</span><span class="n">stdout</span><span class="p">,</span> <span class="s">&quot;%s, %s %d, %.2d:%.2d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span>
<span class="n">weekday</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">day</span><span class="p">,</span> <span class="n">hour</span><span class="p">,</span> <span class="n">min</span><span class="p">);</span>
<span class="n">fprintf</span><span class="p">(</span><span class="n">stdout</span><span class="p">,</span> <span class="s">&quot;pi = %.5f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">atan</span><span class="p">(</span><span class="mf">1.0</span><span class="p">));</span>
</pre></div>
</div>
<p>EXAMPLE 2 In this example, multibyte characters do not have a state-dependent encoding, and the
members of the extended character set that consist of more than one byte each consist of exactly two bytes,
the first of which is denoted here by a and the second by an uppercase letter.</p>
<p><strong>Forward references:</strong> conversion state (<a class="reference internal" href="../wchar/#id51"><span>Extended multibyte/wide character conversion utilities</span></a>), the <code class="docutils literal"><span class="pre">wcrtomb</span></code> function (<a class="reference internal" href="../wchar/#id60"><span>The wcrtomb function</span></a>).</p>
<table class="docutils footnote" frame="void" id="id38" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id30">[11]</a></td><td>Note that 0 is taken as a flag, not as the beginning of a field width.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id39" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id31">[12]</a></td><td>The results of all floating conversions of a negative zero, and of negative values that round to zero,
include a minus sign.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id40" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id32">[13]</a></td><td>When applied to infinite and NaN values, the <code class="docutils literal"><span class="pre">-,</span> <span class="pre">+</span></code> and <em>space</em> flag characters have their usual meaning;
the <code class="docutils literal"><span class="pre">#</span></code> and 0 flag characters have no effect.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id41" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id33">[14]</a></td><td>Binary implementations can choose the hexadecimal digit to the left of the decimal-point character so
that subsequent digits align to nibble (4-bit) boundaries.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id42" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id34">[15]</a></td><td>The precision <code class="docutils literal"><span class="pre">p</span></code> is sufficient to distinguish values of the source type if <span class="math">\(16^{p-1} &gt; b^n\)</span> where <span class="math">\(b\)</span> is
<code class="docutils literal"><span class="pre">FLT_RADIX</span></code> and <span class="math">\(n\)</span> is the number of base-b digits in the significand of the source type. A smaller <span class="math">\(p\)</span>
might suffice depending on the implementation&#8217;s scheme for determining the digit to the left of the
decimal-point character.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id43" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id35">[16]</a></td><td>No special provisions are made for multibyte characters.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id44" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id36">[17]</a></td><td>Redundant shift sequences may result if multibyte characters have a state-dependent encoding.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id45" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id37">[18]</a></td><td>For binary-to-decimal conversion, the result format&#8217;s values are the numbers representable with the
given format specifier. The number of significant digits is determined by the format specifier, and in
the case of fixed-point conversion by the source value as well.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="the-fscanf-function">
<span id="id46"></span><span id="index-21"></span><h3>33.6.2. The <code class="docutils literal"><span class="pre">fscanf</span></code> function<a class="headerlink" href="#the-fscanf-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="nf">fscanf</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">stream</span><span class="p">,</span>
<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">format</span><span class="p">,</span> <span class="p">...);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">fscanf</span></code> function reads input from the stream pointed to by stream, under control
of the string pointed to by <code class="docutils literal"><span class="pre">format</span></code> that specifies the admissible input sequences and how
they are to be converted for assignment, using subsequent arguments as pointers to the
objects to receive the converted input. If there are insufficient arguments for the format,
the behavior is undefined. If the format is exhausted while arguments remain, the excess
arguments are evaluated (as always) but are otherwise ignored.</p>
<p>The <code class="docutils literal"><span class="pre">format</span></code> shall be a multibyte character sequence, beginning and ending in its initial
shift state. The format is composed of zero or more directives: one or more white-space
characters, an ordinary multibyte character (neither % nor a white-space character), or a
conversion specification. Each conversion specification is introduced by the character %.
After the %, the following appear in sequence:</p>
<ul class="simple">
<li>An optional assignment-suppressing character *.</li>
<li>An optional decimal integer greater than zero that specifies the maximum field width
(in characters).</li>
<li>An optional <em>length modifier</em> that specifies the size of the receiving object.</li>
<li>A <em>conversion specifier</em> character that specifies the type of conversion to be applied.</li>
</ul>
<p>The <code class="docutils literal"><span class="pre">fscanf</span></code> function executes each directive of the format in turn. If a directive fails, as
detailed below, the function returns. Failures are described as input failures (due to the
occurrence of an encoding error or the unavailability of input characters), or matching
failures (due to inappropriate input).</p>
<p>A directive composed of white-space character(s) is executed by reading input up to the
first non-white-space character (which remains unread), or until no more characters can
be read.</p>
<p>A directive that is an ordinary multibyte character is executed by reading the next
characters of the stream. If any of those characters differ from the ones composing the
directive, the directive fails and the differing and subsequent characters remain unread.
Similarly, if end-of-file, an encoding error, or a read error prevents a character from being
read, the directive fails.</p>
<p>A directive that is a conversion specification defines a set of matching input sequences, as
described below for each specifier. A conversion specification is executed in the
following steps:</p>
<p>Input white-space characters (as specified by the <code class="docutils literal"><span class="pre">isspace</span></code> function) are skipped, unless
the specification includes <code class="docutils literal"><span class="pre">a</span> <span class="pre">[,</span> <span class="pre">c</span></code> or <code class="docutils literal"><span class="pre">n</span></code> specifier. <a class="footnote-reference" href="#id52" id="id47">[19]</a></p>
<p>An input item is read from the stream, unless the specification includes an <code class="docutils literal"><span class="pre">n</span></code> specifier. An
input item is defined as the longest sequence of input characters which does not exceed
any specified field width and which is, or is a prefix of, a matching input sequence. <a class="footnote-reference" href="#id53" id="id48">[20]</a>
The first character, if any, after the input item remains unread. If the length of the input
item is zero, the execution of the directive fails; this condition is a matching failure unless
end-of-file, an encoding error, or a read error prevented input from the stream, in which
case it is an input failure.</p>
<p>Except in the case of a <code class="docutils literal"><span class="pre">%</span></code> specifier, the input item (or, in the case of a <code class="docutils literal"><span class="pre">%n</span></code> directive, the
count of input characters) is converted to a type appropriate to the conversion specifier. If
the input item is not a matching sequence, the execution of the directive fails: this
condition is a matching failure. Unless assignment suppression was indicated by a <code class="docutils literal"><span class="pre">*</span></code>, the
result of the conversion is placed in the object pointed to by the first argument following
the format argument that has not already received a conversion result. If this object
does not have an appropriate type, or if the result of the conversion cannot be represented
in the object, the behavior is undefined.</p>
<p>The length modifiers and their meanings are:</p>
<p><code class="docutils literal"><span class="pre">hh</span></code> Specifies that a following <code class="docutils literal"><span class="pre">d,</span> <span class="pre">i,</span> <span class="pre">o,</span> <span class="pre">u,</span> <span class="pre">x,</span> <span class="pre">X</span></code> or <code class="docutils literal"><span class="pre">n</span></code> conversion specifier applies
to an argument with type pointer to signed char or <code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">char</span></code>.</p>
<p><code class="docutils literal"><span class="pre">h</span></code> Specifies that a following <code class="docutils literal"><span class="pre">d,</span> <span class="pre">i,</span> <span class="pre">o,</span> <span class="pre">u,</span> <span class="pre">x,</span> <span class="pre">X</span></code> or <code class="docutils literal"><span class="pre">n</span></code> conversion specifier applies
to an argument with type pointer to short int or <code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">short</span> <span class="pre">int</span></code>.</p>
<p><code class="docutils literal"><span class="pre">l</span> <span class="pre">(ell)</span></code> Specifies that a following <code class="docutils literal"><span class="pre">d,</span> <span class="pre">i,</span> <span class="pre">o,</span> <span class="pre">u,</span> <span class="pre">x,</span> <span class="pre">X</span></code> or <code class="docutils literal"><span class="pre">n</span></code> conversion specifier applies
to an argument with type pointer to <code class="docutils literal"><span class="pre">long</span> <span class="pre">int</span></code> or <code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">int</span></code>; that a following
<code class="docutils literal"><span class="pre">a,</span> <span class="pre">A,</span> <span class="pre">e,</span> <span class="pre">E,</span> <span class="pre">f,</span> <span class="pre">F,</span> <span class="pre">g</span></code> or <code class="docutils literal"><span class="pre">G</span></code> conversion specifier applies to
an argument with type pointer to <code class="docutils literal"><span class="pre">double</span></code>; or that a following <code class="docutils literal"><span class="pre">c,</span> <span class="pre">s</span></code> or <code class="docutils literal"><span class="pre">[</span></code>
conversion specifier applies to an argument with type pointer to <code class="docutils literal"><span class="pre">wchar_t</span></code>.</p>
<p><code class="docutils literal"><span class="pre">ll</span> <span class="pre">(ell-ell)</span></code> Specifies that a following <code class="docutils literal"><span class="pre">d,</span> <span class="pre">i,</span> <span class="pre">o,</span> <span class="pre">u,</span> <span class="pre">x,</span> <span class="pre">X</span></code> or <code class="docutils literal"><span class="pre">n</span></code> conversion specifier applies
to an argument with type pointer to <code class="docutils literal"><span class="pre">long</span> <span class="pre">long</span> <span class="pre">int</span></code> or <code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">long</span> <span class="pre">int</span></code>.</p>
<p><code class="docutils literal"><span class="pre">j</span></code> Specifies that a following <code class="docutils literal"><span class="pre">d,</span> <span class="pre">i,</span> <span class="pre">o,</span> <span class="pre">u,</span> <span class="pre">x,</span> <span class="pre">X</span></code> or <code class="docutils literal"><span class="pre">n</span></code> conversion specifier applies
to an argument with type pointer to <code class="docutils literal"><span class="pre">intmax_t</span></code> or <code class="docutils literal"><span class="pre">uintmax_t</span></code>.</p>
<p><code class="docutils literal"><span class="pre">z</span></code> Specifies that a following <code class="docutils literal"><span class="pre">d,</span> <span class="pre">i,</span> <span class="pre">o,</span> <span class="pre">u,</span> <span class="pre">x,</span> <span class="pre">X</span></code> or <code class="docutils literal"><span class="pre">n</span></code> conversion specifier applies
to an argument with type pointer to <code class="docutils literal"><span class="pre">size_t</span></code> or the corresponding signed integer type.</p>
<p><code class="docutils literal"><span class="pre">t</span></code> Specifies that a following <code class="docutils literal"><span class="pre">d,</span> <span class="pre">i,</span> <span class="pre">o,</span> <span class="pre">u,</span> <span class="pre">x,</span> <span class="pre">X</span></code> or <code class="docutils literal"><span class="pre">n</span></code> conversion specifier applies
to an argument with type pointer to <code class="docutils literal"><span class="pre">ptrdiff_t</span></code> or the corresponding
unsigned integer type.</p>
<p><code class="docutils literal"><span class="pre">L</span></code> Specifies that a following <code class="docutils literal"><span class="pre">a,</span> <span class="pre">A,</span> <span class="pre">e,</span> <span class="pre">E,</span> <span class="pre">f,</span> <span class="pre">F,</span> <span class="pre">g</span></code> or <code class="docutils literal"><span class="pre">G</span></code> conversion specifier
applies to an argument with type pointer to <code class="docutils literal"><span class="pre">long</span> <span class="pre">double</span></code>.</p>
<p>If a length modifier appears with any conversion specifier other than as specified above,
the behavior is undefined.</p>
<p>The conversion specifiers and their meanings are:</p>
<p><code class="docutils literal"><span class="pre">d</span></code> Matches an optionally signed decimal integer, whose format is the same as
expected for the subject sequence of the <code class="docutils literal"><span class="pre">strtol</span></code> function with the value 10
for the <code class="docutils literal"><span class="pre">base</span></code> argument. The corresponding argument shall be a pointer to
signed integer.</p>
<p><code class="docutils literal"><span class="pre">i</span></code> Matches an optionally signed integer, whose format is the same as expected
for the subject sequence of the strtol function with the value 0 for the
base argument. The corresponding argument shall be a pointer to signed
integer.</p>
<p><code class="docutils literal"><span class="pre">o</span></code> Matches an optionally signed octal integer, whose format is the same as
expected for the subject sequence of the <code class="docutils literal"><span class="pre">strtoul</span></code> function with the value 8
for the <code class="docutils literal"><span class="pre">base</span></code> argument. The corresponding argument shall be a pointer to
unsigned integer.</p>
<p><code class="docutils literal"><span class="pre">u</span></code> Matches an optionally signed decimal integer, whose format is the same as
expected for the subject sequence of the <code class="docutils literal"><span class="pre">strtoul</span></code> function with the value 10
for the <code class="docutils literal"><span class="pre">base</span></code> argument. The corresponding argument shall be a pointer to
unsigned integer.</p>
<p><code class="docutils literal"><span class="pre">x</span></code> Matches an optionally signed hexadecimal integer, whose format is the same
as expected for the subject sequence of the <code class="docutils literal"><span class="pre">strtoul</span></code> function with the value
16 for the <code class="docutils literal"><span class="pre">base</span></code> argument. The corresponding argument shall be a pointer to
unsigned integer.</p>
<p><code class="docutils literal"><span class="pre">a,e,f,g</span></code> Matches an optionally signed floating-point number, infinity, or NaN, whose
format is the same as expected for the subject sequence of the <code class="docutils literal"><span class="pre">strtod</span></code>
function. The corresponding argument shall be a pointer to floating.</p>
<p><code class="docutils literal"><span class="pre">c</span></code> Matches a sequence of characters of exactly the number specified by the field
width (1 if no field width is present in the directive). <a class="footnote-reference" href="#id54" id="id49">[21]</a>
If no <code class="docutils literal"><span class="pre">l</span></code> length modifier is present, the corresponding argument shall be a
pointer to the initial element of a character array large enough to accept the
sequence. No null character is added.</p>
<p>If an <code class="docutils literal"><span class="pre">l</span></code> length modifier is present, the input shall be a sequence of multibyte
characters that begins in the initial shift state. Each multibyte character in the
sequence is converted to a wide character as if by a call to the <code class="docutils literal"><span class="pre">mbrtowc</span></code>
function, with the conversion state described by an <code class="docutils literal"><span class="pre">mbstate_t</span></code> object
initialized to zero before the first multibyte character is converted. The
corresponding argument shall be a pointer to the initial element of an array of
<code class="docutils literal"><span class="pre">wchar_t</span></code> large enough to accept the resulting sequence of wide characters.
No null wide character is added.</p>
<p><code class="docutils literal"><span class="pre">s</span></code> Matches a sequence of non-white-space characters. <a class="footnote-reference" href="#id63" id="id50">[22]</a></p>
<p>If no <code class="docutils literal"><span class="pre">l</span></code> length modifier is present, the corresponding argument shall be a
pointer to the initial element of a character array large enough to accept the
sequence and a terminating null character, which will be added automatically.</p>
<p>If an <code class="docutils literal"><span class="pre">l</span></code> length modifier is present, the input shall be a sequence of multibyte
characters that begins in the initial shift state. Each multibyte character is
converted to a wide character as if by a call to the <code class="docutils literal"><span class="pre">mbrtowc</span></code> function, with
the conversion state described by an <code class="docutils literal"><span class="pre">mbstate_t</span></code> object initialized to zero
before the first multibyte character is converted. The corresponding argument
shall be a pointer to the initial element of an array of <code class="docutils literal"><span class="pre">wchar_t</span></code> large enough
to accept the sequence and the terminating null wide character, which will be
added automatically.</p>
<p><code class="docutils literal"><span class="pre">[</span></code> Matches a nonempty sequence of characters from a set of expected characters
(the <em>scanset</em>). <a class="footnote-reference" href="#id63" id="id51">[22]</a></p>
<p>If no <code class="docutils literal"><span class="pre">l</span></code> length modifier is present, the corresponding argument shall be a
pointer to the initial element of a character array large enough to accept the
sequence and a terminating null character, which will be added automatically.</p>
<p>If an <code class="docutils literal"><span class="pre">l</span></code> length modifier is present, the input shall be a sequence of multibyte
characters that begins in the initial shift state. Each multibyte character is
converted to a wide character as if by a call to the <code class="docutils literal"><span class="pre">mbrtowc</span></code> function, with
the conversion state described by an <code class="docutils literal"><span class="pre">mbstate_t</span></code> object initialized to zero
before the first multibyte character is converted. The corresponding argument
shall be a pointer to the initial element of an array of <code class="docutils literal"><span class="pre">wchar_t</span></code> large enough
to accept the sequence and the terminating null wide character, which will be
added automatically.</p>
<p>The conversion specifier includes all subsequent characters in the format
string, up to and including the matching right bracket (<code class="docutils literal"><span class="pre">]</span></code>). The characters
between the brackets (the <em>scanlist</em>) compose the scanset, unless the character
after the left bracket is a circumflex (<code class="docutils literal"><span class="pre">^</span></code>), in which case the scanset contains all
characters that do not appear in the scanlist between the circumflex and the
right bracket. If the conversion specifier begins with <code class="docutils literal"><span class="pre">[]</span></code> or <code class="docutils literal"><span class="pre">[^]</span></code>, the right
bracket character is in the scanlist and the next following right bracket
character is the matching right bracket that ends the specification; otherwise
the first following right bracket character is the one that ends the
specification. If a - character is in the scanlist and is not the first, nor the
second where the first character is a <code class="docutils literal"><span class="pre">^</span></code>, nor the last character, the behavior is
implementation-defined.</p>
<p><code class="docutils literal"><span class="pre">p</span></code> Matches an implementation-defined set of sequences, which should be the
same as the set of sequences that may be produced by the <code class="docutils literal"><span class="pre">%p</span></code> conversion of
the <code class="docutils literal"><span class="pre">fprintf</span></code> function. The corresponding argument shall be a pointer to a
pointer to <code class="docutils literal"><span class="pre">void</span></code>. The input item is converted to a pointer value in an
implementation-defined manner. If the input item is a value converted earlier
during the same program execution, the pointer that results shall compare
equal to that value; otherwise the behavior of the <code class="docutils literal"><span class="pre">%p</span></code> conversion is undefined.</p>
<p><code class="docutils literal"><span class="pre">n</span></code> No input is consumed. The corresponding argument shall be a pointer to
signed integer into which is to be written the number of characters read from
the input stream so far by this call to the fscanf function. Execution of a
<code class="docutils literal"><span class="pre">%n</span></code> directive does not increment the assignment count returned at the
completion of execution of the fscanf function. No argument is converted,
but one is consumed. If the conversion specification includes an assignment-suppressing
character or a field width, the behavior is undefined.</p>
<p><code class="docutils literal"><span class="pre">%</span></code> Matches a single <code class="docutils literal"><span class="pre">%</span></code> character; no conversion or assignment occurs. The
complete conversion specification shall be <code class="docutils literal"><span class="pre">%%</span></code>.</p>
<p>If a conversion specification is invalid, the behavior is undefined.</p>
<p>The conversion specifiers <code class="docutils literal"><span class="pre">A,</span> <span class="pre">E,</span> <span class="pre">F,</span> <span class="pre">G</span></code> and <code class="docutils literal"><span class="pre">X</span></code> are also valid and behave the same as,
respectively, <code class="docutils literal"><span class="pre">a,</span> <span class="pre">e,</span> <span class="pre">f,</span> <span class="pre">g</span></code> and <code class="docutils literal"><span class="pre">x</span></code>.</p>
<p>Trailing white space (including new-line characters) is left unread unless matched by a
directive. The success of literal matches and suppressed assignments is not directly
determinable other than via the <code class="docutils literal"><span class="pre">%n</span></code> directive.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">fscanf</span></code> function returns the value of the macro <code class="docutils literal"><span class="pre">EOF</span></code> if an input failure occurs
before any conversion. Otherwise, the function returns the number of input items
assigned, which can be fewer than provided for, or even zero, in the event of an early
matching failure.</p>
<p>EXAMPLE 1 The call:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cm">/* ... */</span>
<span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="n">i</span><span class="p">;</span> <span class="kt">float</span> <span class="n">x</span><span class="p">;</span> <span class="kt">char</span> <span class="n">name</span><span class="p">[</span><span class="mi">50</span><span class="p">];</span>
<span class="n">n</span> <span class="o">=</span> <span class="n">fscanf</span><span class="p">(</span><span class="n">stdin</span><span class="p">,</span> <span class="s">&quot;%d%f%s&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">i</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">,</span> <span class="n">name</span><span class="p">);</span>
</pre></div>
</div>
<p>with the input line:</p>
<div class="highlight-python"><div class="highlight"><pre>25 54.32E-1 thompson
</pre></div>
</div>
<p>will assign to <code class="docutils literal"><span class="pre">n</span></code> the value 3, to <code class="docutils literal"><span class="pre">i</span></code> the value 25, to <code class="docutils literal"><span class="pre">x</span></code> the value 5.432, and to <code class="docutils literal"><span class="pre">name</span></code> the sequence
<code class="docutils literal"><span class="pre">thompson\0</span></code>.</p>
<p>EXAMPLE 2 The call:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cm">/* ... */</span>
<span class="kt">int</span> <span class="n">i</span><span class="p">;</span> <span class="kt">float</span> <span class="n">x</span><span class="p">;</span> <span class="kt">char</span> <span class="n">name</span><span class="p">[</span><span class="mi">50</span><span class="p">];</span>
<span class="n">fscanf</span><span class="p">(</span><span class="n">stdin</span><span class="p">,</span> <span class="s">&quot;%2d%f%*d %[0123456789]&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">i</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">,</span> <span class="n">name</span><span class="p">);</span>
</pre></div>
</div>
<p>with input:</p>
<div class="highlight-python"><div class="highlight"><pre>56789 0123 56a72
</pre></div>
</div>
<p>will assign to <code class="docutils literal"><span class="pre">i</span></code> the value <code class="docutils literal"><span class="pre">56</span></code> and to <code class="docutils literal"><span class="pre">x</span></code> the value 789.0, will skip 0123, and will assign to <code class="docutils literal"><span class="pre">name</span></code> the
sequence <code class="docutils literal"><span class="pre">56\0</span></code>. The next character read from the input stream will be <code class="docutils literal"><span class="pre">a</span></code>.</p>
<p>EXAMPLE 3 To accept repeatedly from stdin a quantity, a unit of measure, and an item name:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cm">/* ... */</span>
<span class="kt">int</span> <span class="n">count</span><span class="p">;</span> <span class="kt">float</span> <span class="n">quant</span><span class="p">;</span> <span class="kt">char</span> <span class="n">units</span><span class="p">[</span><span class="mi">21</span><span class="p">],</span> <span class="n">item</span><span class="p">[</span><span class="mi">21</span><span class="p">];</span>
<span class="k">do</span> <span class="p">{</span>
  <span class="n">count</span> <span class="o">=</span> <span class="n">fscanf</span><span class="p">(</span><span class="n">stdin</span><span class="p">,</span> <span class="s">&quot;%f%20s of %20s&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">quant</span><span class="p">,</span> <span class="n">units</span><span class="p">,</span> <span class="n">item</span><span class="p">);</span>
  <span class="n">fscanf</span><span class="p">(</span><span class="n">stdin</span><span class="p">,</span><span class="s">&quot;%*[^</span><span class="se">\n</span><span class="s">]&quot;</span><span class="p">);</span>
<span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">feof</span><span class="p">(</span><span class="n">stdin</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">ferror</span><span class="p">(</span><span class="n">stdin</span><span class="p">));</span>
</pre></div>
</div>
<p>If the stdin stream contains the following lines:</p>
<div class="highlight-python"><div class="highlight"><pre>2 quarts of oil
-12.8degrees Celsius
lots of luck
10.0LBS
of
dirt
100ergs of energy
</pre></div>
</div>
<p>the execution of the above example will be analogous to the following assignments:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">quant</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="n">strcpy</span><span class="p">(</span><span class="n">units</span><span class="p">,</span> <span class="s">&quot;quarts&quot;</span><span class="p">);</span> <span class="n">strcpy</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s">&quot;oil&quot;</span><span class="p">);</span>
<span class="n">count</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="n">quant</span> <span class="o">=</span> <span class="o">-</span><span class="mf">12.8</span><span class="p">;</span> <span class="n">strcpy</span><span class="p">(</span><span class="n">units</span><span class="p">,</span> <span class="s">&quot;degrees&quot;</span><span class="p">);</span>
<span class="n">count</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="c1">// &quot;C&quot; fails to match &quot;o&quot;</span>
<span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// &quot;l&quot; fails to match &quot;%f&quot;</span>
<span class="n">quant</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">;</span> <span class="n">strcpy</span><span class="p">(</span><span class="n">units</span><span class="p">,</span> <span class="s">&quot;LBS&quot;</span><span class="p">);</span> <span class="n">strcpy</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s">&quot;dirt&quot;</span><span class="p">);</span>
<span class="n">count</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// &quot;100e&quot; fails to match &quot;%f&quot;</span>
<span class="n">count</span> <span class="o">=</span> <span class="n">EOF</span><span class="p">;</span>
</pre></div>
</div>
<p>EXAMPLE 4 In:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cm">/* ... */</span>
<span class="kt">int</span> <span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">,</span> <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">i</span><span class="p">;</span>
<span class="n">i</span> <span class="o">=</span> <span class="n">sscanf</span><span class="p">(</span><span class="s">&quot;123&quot;</span><span class="p">,</span> <span class="s">&quot;%d%n%n%d&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">d1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">n1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">n2</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">d2</span><span class="p">);</span>
</pre></div>
</div>
<p>the value 123 is assigned to <code class="docutils literal"><span class="pre">d1</span></code> and the value 3 to <code class="docutils literal"><span class="pre">n1</span></code>. Because <code class="docutils literal"><span class="pre">%n</span></code> can never get an input failure the value
of 3 is also assigned to <code class="docutils literal"><span class="pre">n2`</span></code>. The value of <code class="docutils literal"><span class="pre">d2</span></code> is not affected. The value 1 is assigned to <code class="docutils literal"><span class="pre">i</span></code>.</p>
<p><strong>Forward references:</strong> the <code class="docutils literal"><span class="pre">strtod,</span> <span class="pre">strtof</span></code> and <code class="docutils literal"><span class="pre">strtold</span></code> functions (<a class="reference internal" href="../stdlib/#id2"><span>The strtod, strtof and strtold functions</span></a>), the
<code class="docutils literal"><span class="pre">strtol,</span> <span class="pre">strtoll,</span> <span class="pre">strtoul</span></code> and <code class="docutils literal"><span class="pre">strtoull</span></code> functions (<a class="reference internal" href="../stdlib/#id9"><span>The strtol, strtoll, strtoul and strtoull functions</span></a>), conversion state
(<a class="reference internal" href="../wchar/#id51"><span>Extended multibyte/wide character conversion utilities</span></a>), the <code class="docutils literal"><span class="pre">wcrtomb</span></code> function (<a class="reference internal" href="../wchar/#id60"><span>The wcrtomb function</span></a>).</p>
<table class="docutils footnote" frame="void" id="id52" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id47">[19]</a></td><td>These white-space characters are not counted against a specified field width.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id53" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id48">[20]</a></td><td><code class="docutils literal"><span class="pre">fscanf</span></code> pushes back at most one input character onto the input stream. Therefore, some sequences
that are acceptable to <code class="docutils literal"><span class="pre">strtod,</span> <span class="pre">strtol</span></code> etc. are unacceptable to <code class="docutils literal"><span class="pre">fscanf</span></code>.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id54" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id49">[21]</a></td><td>No special provisions are made for multibyte characters in the matching rules used by the <code class="docutils literal"><span class="pre">c,</span> <span class="pre">s</span></code> and <code class="docutils literal"><span class="pre">[</span></code>
conversion specifiers &#8212; the extent of the input field is determined on a byte-by-byte basis. The
resulting field is nevertheless a sequence of multibyte characters that begins in the initial shift state.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="the-printf-function">
<span id="index-22"></span><h3>33.6.3. The <code class="docutils literal"><span class="pre">printf</span></code> function<a class="headerlink" href="#the-printf-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="nf">printf</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">format</span><span class="p">,</span> <span class="p">...);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">printf</span></code> function is equivalent to <code class="docutils literal"><span class="pre">fprintf</span></code> with the argument <code class="docutils literal"><span class="pre">stdout</span></code> interposed
before the arguments to <code class="docutils literal"><span class="pre">printf</span></code>.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">printf</span></code> function returns the number of characters transmitted, or a negative value if
an output or encoding error occurred.</p>
</div>
<div class="section" id="the-scanf-function">
<span id="index-23"></span><h3>33.6.4. The <code class="docutils literal"><span class="pre">scanf</span></code> function<a class="headerlink" href="#the-scanf-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="nf">scanf</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">format</span><span class="p">,</span> <span class="p">...);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">scanf</span></code> function is equivalent to <code class="docutils literal"><span class="pre">fscanf</span></code> with the argument <code class="docutils literal"><span class="pre">stdin</span></code> interposed
before the arguments to <code class="docutils literal"><span class="pre">scanf</span></code>.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">scanf</span></code> function returns the value of the macro <code class="docutils literal"><span class="pre">EOF</span></code> if an input failure occurs before
any conversion. Otherwise, the <code class="docutils literal"><span class="pre">scanf</span></code> function returns the number of input items
assigned, which can be fewer than provided for, or even zero, in the event of an early
matching failure.</p>
</div>
<div class="section" id="the-snprintf-function">
<span id="index-24"></span><h3>33.6.5. The <code class="docutils literal"><span class="pre">snprintf</span></code> function<a class="headerlink" href="#the-snprintf-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="nf">snprintf</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">s</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">n</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">format</span><span class="p">,</span> <span class="p">...);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">snprintf</span></code> function is equivalent to <code class="docutils literal"><span class="pre">fprintf</span></code>, except that the output is written into
an array (specified by argument <code class="docutils literal"><span class="pre">s</span></code>) rather than to a stream. If <code class="docutils literal"><span class="pre">n</span></code> is zero, nothing is written,
and <code class="docutils literal"><span class="pre">s</span></code> may be a null pointer. Otherwise, output characters beyond the n-1st are
discarded rather than being written to the array, and a null character is written at the end
of the characters actually written into the array. If copying takes place between objects
that overlap, the behavior is undefined.</p>
</div>
<div class="section" id="the-sprintf-function">
<span id="index-25"></span><h3>33.6.6. The <code class="docutils literal"><span class="pre">sprintf</span></code> function<a class="headerlink" href="#the-sprintf-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="nf">sprintf</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">s</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">format</span><span class="p">,</span> <span class="p">...);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">sprintf</span></code> function is equivalent to <code class="docutils literal"><span class="pre">fprintf</span></code>, except that the output is written into
an array (specified by the argument <code class="docutils literal"><span class="pre">s</span></code>) rather than to a stream. A null character is written
at the end of the characters written; it is not counted as part of the returned value. If
copying takes place between objects that overlap, the behavior is undefined.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">sprintf</span></code> function returns the number of characters written in the array, not
counting the terminating null character, or a negative value if an encoding error occurred.</p>
</div>
<div class="section" id="the-sscanf-function">
<span id="index-26"></span><h3>33.6.7. The <code class="docutils literal"><span class="pre">sscanf</span></code> function<a class="headerlink" href="#the-sscanf-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="nf">sscanf</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">s</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">format</span><span class="p">,</span> <span class="p">...);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">sscanf</span></code> function is equivalent to <code class="docutils literal"><span class="pre">fscanf</span></code>, except that input is obtained from a
string (specified by the argument <code class="docutils literal"><span class="pre">s</span></code>) rather than from a stream. Reaching the end of the
string is equivalent to encountering end-of-file for the <code class="docutils literal"><span class="pre">fscanf</span></code> function. If copying
takes place between objects that overlap, the behavior is undefined.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">sscanf</span></code> function returns the value of the macro <code class="docutils literal"><span class="pre">EOF</span></code> if an input failure occurs
before any conversion. Otherwise, the sscanf function returns the number of input
items assigned, which can be fewer than provided for, or even zero, in the event of an
early matching failure.</p>
</div>
<div class="section" id="the-vfprintf-function">
<span id="index-27"></span><h3>33.6.8. The <code class="docutils literal"><span class="pre">vfprintf</span></code> function<a class="headerlink" href="#the-vfprintf-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdarg.h&gt;</span>
<span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="nf">vfprintf</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">stream</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">format</span><span class="p">,</span> <span class="kt">va_list</span> <span class="n">arg</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">vfprintf</span></code> function is equivalent to <code class="docutils literal"><span class="pre">fprintf</span></code>, with the variable argument list
replaced by <code class="docutils literal"><span class="pre">arg</span></code>, which shall have been initialized by the <code class="docutils literal"><span class="pre">va_start</span></code> macro (and
possibly subsequent <code class="docutils literal"><span class="pre">va_arg</span></code> calls). The <code class="docutils literal"><span class="pre">vfprintf</span></code> function does not invoke the
<code class="docutils literal"><span class="pre">va_end</span></code> macro. <a class="footnote-reference" href="#id63" id="id55">[22]</a></p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">vfprintf</span></code> function returns the number of characters transmitted, or a negative
value if an output or encoding error occurred.</p>
<p>EXAMPLE The following shows the use of the <code class="docutils literal"><span class="pre">vfprintf</span></code> function in a general error-reporting routine.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdarg.h&gt;</span>
<span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">void</span> <span class="nf">error</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">function_name</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">format</span><span class="p">,</span> <span class="p">...)</span>
<span class="p">{</span>
  <span class="kt">va_list</span> <span class="n">args</span><span class="p">;</span>
  <span class="n">va_start</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">format</span><span class="p">);</span>
  <span class="c1">// print out name of function causing error</span>
  <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;ERROR in %s: &quot;</span><span class="p">,</span> <span class="n">function_name</span><span class="p">);</span>
  <span class="c1">// print out remainder of message</span>
  <span class="n">vfprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">args</span><span class="p">);</span>
  <span class="n">va_end</span><span class="p">(</span><span class="n">args</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="the-vfscanf-function">
<span id="index-28"></span><h3>33.6.9. The <code class="docutils literal"><span class="pre">vfscanf</span></code> function<a class="headerlink" href="#the-vfscanf-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdarg.h&gt;</span>
<span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="nf">vfscanf</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">stream</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">format</span><span class="p">,</span> <span class="kt">va_list</span> <span class="n">arg</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">vfscanf</span></code> function is equivalent to <code class="docutils literal"><span class="pre">fscanf</span></code>, with the variable argument list
replaced by <code class="docutils literal"><span class="pre">arg</span></code>, which shall have been initialized by the <code class="docutils literal"><span class="pre">va_start</span></code> macro (and
possibly subsequent <code class="docutils literal"><span class="pre">va_arg</span></code> calls). The <code class="docutils literal"><span class="pre">vfscanf</span></code> function does not invoke the
<code class="docutils literal"><span class="pre">va_end</span></code> macro. <a class="footnote-reference" href="#id57" id="id56">[24]</a></p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">vfscanf</span></code> function returns the value of the macro <code class="docutils literal"><span class="pre">EOF</span></code> if an input failure occurs
before any conversion. Otherwise, the <code class="docutils literal"><span class="pre">vfscanf</span></code> function returns the number of input
items assigned, which can be fewer than provided for, or even zero, in the event of an
early matching failure.</p>
<span class="target" id="index-29"></span><table class="docutils footnote" frame="void" id="id57" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[24]</td><td><em>(<a class="fn-backref" href="#id56">1</a>, <a class="fn-backref" href="#id58">2</a>, <a class="fn-backref" href="#id59">3</a>, <a class="fn-backref" href="#id60">4</a>, <a class="fn-backref" href="#id61">5</a>, <a class="fn-backref" href="#id62">6</a>)</em> As the functions <cite>vfprintf, vfscanf, vprintf, vscanf, vsnprintf, vsprintf</cite> and
<cite>vsscanf</cite> invoke the <cite>va_arg</cite> macro, the value of <cite>arg</cite> after the return is indeterminate.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="the-vprintf-function">
<h3>33.6.10. The <code class="docutils literal"><span class="pre">vprintf</span></code> function<a class="headerlink" href="#the-vprintf-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdarg.h&gt;</span>
<span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="nf">vprintf</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">format</span><span class="p">,</span> <span class="kt">va_list</span> <span class="n">arg</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">vprintf</span></code> function is equivalent to <code class="docutils literal"><span class="pre">printf</span></code>, with the variable argument list
replaced by <code class="docutils literal"><span class="pre">arg</span></code>, which shall have been initialized by the <code class="docutils literal"><span class="pre">va_start</span></code> macro (and
possibly subsequent <code class="docutils literal"><span class="pre">va_arg</span></code> calls). The <code class="docutils literal"><span class="pre">vprintf</span></code> function does not invoke the
<code class="docutils literal"><span class="pre">va_end</span></code> macro. <a class="footnote-reference" href="#id57" id="id58">[24]</a></p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">vprintf</span></code> function returns the number of characters transmitted, or a negative value
if an output or encoding error occurred.</p>
</div>
<div class="section" id="the-vscanf-function">
<span id="index-30"></span><h3>33.6.11. The <code class="docutils literal"><span class="pre">vscanf</span></code> function<a class="headerlink" href="#the-vscanf-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdarg.h&gt;</span>
<span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="nf">vscanf</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">format</span><span class="p">,</span> <span class="kt">va_list</span> <span class="n">arg</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">vscanf</span></code> function is equivalent to <code class="docutils literal"><span class="pre">scanf</span></code>, with the variable argument list replaced
by <code class="docutils literal"><span class="pre">arg</span></code>, which shall have been initialized by the <code class="docutils literal"><span class="pre">va_start</span></code> macro (and possibly
subsequent <code class="docutils literal"><span class="pre">va_arg</span></code> calls). The <code class="docutils literal"><span class="pre">vscanf</span></code> function does not invoke the <code class="docutils literal"><span class="pre">va_end</span></code>
macro. <a class="footnote-reference" href="#id57" id="id59">[24]</a></p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">vscanf</span></code> function returns the value of the macro <code class="docutils literal"><span class="pre">EOF</span></code> if an input failure occurs
before any conversion. Otherwise, the <code class="docutils literal"><span class="pre">vscanf</span></code> function returns the number of input
items assigned, which can be fewer than provided for, or even zero, in the event of an
early matching failure.</p>
</div>
<div class="section" id="the-vsnprintf-function">
<span id="index-31"></span><h3>33.6.12. The <code class="docutils literal"><span class="pre">vsnprintf</span></code> function<a class="headerlink" href="#the-vsnprintf-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdarg.h&gt;</span>
<span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="nf">vsnprintf</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">s</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">n</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">format</span><span class="p">,</span> <span class="kt">va_list</span> <span class="n">arg</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">vsnprintf</span></code> function is equivalent to <code class="docutils literal"><span class="pre">snprintf</span></code>, with the variable argument list
replaced by <code class="docutils literal"><span class="pre">arg</span></code>, which shall have been initialized by the <code class="docutils literal"><span class="pre">va_start</span></code> macro (and
possibly subsequent <code class="docutils literal"><span class="pre">va_arg</span></code> calls). The <code class="docutils literal"><span class="pre">vsnprintf</span></code> function does not invoke the
<code class="docutils literal"><span class="pre">va_end</span></code> macro. <a class="footnote-reference" href="#id57" id="id60">[24]</a> If copying takes place between objects that overlap, the behavior is
undefined.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">vsnprintf</span></code> function returns the number of characters that would have been written
had <code class="docutils literal"><span class="pre">n</span></code> been sufficiently large, not counting the terminating null character, or a negative
value if an encoding error occurred. Thus, the null-terminated output has been
completely written if and only if the returned value is nonnegative and less than <code class="docutils literal"><span class="pre">n</span></code>.</p>
</div>
<div class="section" id="the-vsprintf-function">
<span id="index-32"></span><h3>33.6.13. The <code class="docutils literal"><span class="pre">vsprintf</span></code> function<a class="headerlink" href="#the-vsprintf-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdarg.h&gt;</span>
<span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="nf">vsprintf</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">s</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">format</span><span class="p">,</span> <span class="kt">va_list</span> <span class="n">arg</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">vsprintf</span></code> function is equivalent to <code class="docutils literal"><span class="pre">sprintf</span></code>, with the variable argument list
replaced by <code class="docutils literal"><span class="pre">arg</span></code>, which shall have been initialized by the <code class="docutils literal"><span class="pre">va_start</span></code> macro (and
possibly subsequent <code class="docutils literal"><span class="pre">va_arg</span></code> calls). The <code class="docutils literal"><span class="pre">vsprintf</span></code> function does not invoke the
<code class="docutils literal"><span class="pre">va_end</span></code> macro. <a class="footnote-reference" href="#id57" id="id61">[24]</a> If copying takes place between objects that overlap, the behavior is
undefined.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">vsprintf</span></code> function returns the number of characters written in the array, not
counting the terminating null character, or a negative value if an encoding error occurred.</p>
</div>
<div class="section" id="the-vsscanf-function">
<span id="index-33"></span><h3>33.6.14. The <code class="docutils literal"><span class="pre">vsscanf</span></code> function<a class="headerlink" href="#the-vsscanf-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdarg.h&gt;</span>
<span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="nf">vsscanf</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">s</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">format</span><span class="p">,</span> <span class="kt">va_list</span> <span class="n">arg</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">vsscanf</span></code> function is equivalent to <code class="docutils literal"><span class="pre">sscanf</span></code>, with the variable argument list
replaced by <code class="docutils literal"><span class="pre">arg</span></code>, which shall have been initialized by the <code class="docutils literal"><span class="pre">va_start</span></code> macro (and
possibly subsequent <code class="docutils literal"><span class="pre">va_arg</span></code> calls). The <code class="docutils literal"><span class="pre">vsscanf</span></code> function does not invoke the
<code class="docutils literal"><span class="pre">va_end</span></code> macro. <a class="footnote-reference" href="#id57" id="id62">[24]</a></p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">vsscanf</span></code> function returns the value of the macro <code class="docutils literal"><span class="pre">EOF</span></code> if an input failure occurs
before any conversion. Otherwise, the vsscanf function returns the number of input
items assigned, which can be fewer than provided for, or even zero, in the event of an
early matching failure.</p>
<table class="docutils footnote" frame="void" id="id63" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id55">[22]</a></td><td>As the functions <code class="docutils literal"><span class="pre">vfprintf,</span> <span class="pre">vfscanf,</span> <span class="pre">vprintf,</span> <span class="pre">vscanf,</span> <span class="pre">vsnprintf,</span> <span class="pre">vsprintf</span></code> and
<code class="docutils literal"><span class="pre">vsscanf</span></code> invoke the <code class="docutils literal"><span class="pre">va_arg</span></code> macro, the value of <code class="docutils literal"><span class="pre">arg</span></code> after the return is indeterminate.</td></tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="character-input-output-functions">
<span id="index-34"></span><h2>33.7. Character input/output functions<a class="headerlink" href="#character-input-output-functions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="the-fgetc-function">
<span id="fgetc"></span><span id="id64"></span><span id="index-35"></span><h3>33.7.1. The <code class="docutils literal"><span class="pre">fgetc</span></code> function<a class="headerlink" href="#the-fgetc-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="nf">fgetc</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span><span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>If the end-of-file indicator for the input stream pointed to by stream is not set and a
next character is present, the <code class="docutils literal"><span class="pre">fgetc</span></code> function obtains that character as an <code class="docutils literal"><span class="pre">unsigned</span>
<span class="pre">char</span></code> converted to an <code class="docutils literal"><span class="pre">int</span></code> and advances the associated file position indicator for the
stream (if defined).</p>
<p><strong>Returns</strong></p>
<p>If the end-of-file indicator for the stream is set, or if the stream is at end-of-file, the end-of-file
indicator for the stream is set and the <code class="docutils literal"><span class="pre">fgetc</span></code> function returns <code class="docutils literal"><span class="pre">EOF</span></code>. Otherwise, the
<code class="docutils literal"><span class="pre">fgetc</span></code> function returns the next character from the input stream pointed to by stream.
If a read error occurs, the error indicator for the stream is set and the <code class="docutils literal"><span class="pre">fgetc</span></code> function
returns <code class="docutils literal"><span class="pre">EOF</span></code>. <a class="footnote-reference" href="#id66" id="id65">[23]</a></p>
</div>
<div class="section" id="the-fgets-function">
<span id="index-36"></span><h3>33.7.2. The <code class="docutils literal"><span class="pre">fgets</span></code> function<a class="headerlink" href="#the-fgets-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">char</span> <span class="o">*</span><span class="nf">fgets</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">s</span><span class="p">,</span> <span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="kt">FILE</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">fgets</span></code> function reads at most one less than the number of characters specified by <code class="docutils literal"><span class="pre">n</span></code>
from the stream pointed to by stream into the array pointed to by <code class="docutils literal"><span class="pre">s</span></code>. No additional
characters are read after a new-line character (which is retained) or after end-of-file. A
null character is written immediately after the last character read into the array.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">fgets</span></code> function returns <code class="docutils literal"><span class="pre">s</span></code> if successful. If end-of-file is encountered and no
characters have been read into the array, the contents of the array remain unchanged and a
null pointer is returned. If a read error occurs during the operation, the array contents are
indeterminate and a null pointer is returned.</p>
<table class="docutils footnote" frame="void" id="id66" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id65">[23]</a></td><td>An end-of-file and a read error can be distinguished by use of the <code class="docutils literal"><span class="pre">feof</span></code> and <code class="docutils literal"><span class="pre">ferror</span></code> functions.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="the-fputc-function">
<span id="fputc"></span><span id="id67"></span><span id="index-37"></span><h3>33.7.3. The <code class="docutils literal"><span class="pre">fputc</span></code> function<a class="headerlink" href="#the-fputc-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="nf">fputc</span><span class="p">(</span><span class="kt">int</span> <span class="n">c</span><span class="p">,</span> <span class="kt">FILE</span> <span class="o">*</span><span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">fputc</span></code> function writes the character specified by <code class="docutils literal"><span class="pre">c</span></code> (converted to an <code class="docutils literal"><span class="pre">unsigned</span>
<span class="pre">char</span></code> ) to the output stream pointed to by stream, at the position indicated by the
associated file position indicator for the stream (if defined), and advances the indicator
appropriately. If the file cannot support positioning requests, or if the stream was opened
with append mode, the character is appended to the output stream.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">fputc</span></code> function returns the character written. If a write error occurs, the error
indicator for the stream is set and <code class="docutils literal"><span class="pre">fputc</span></code> returns <code class="docutils literal"><span class="pre">EOF</span></code>.</p>
</div>
<div class="section" id="the-fputs-function">
<span id="index-38"></span><h3>33.7.4. The <code class="docutils literal"><span class="pre">fputs</span></code> function<a class="headerlink" href="#the-fputs-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="nf">fputs</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">s</span><span class="p">,</span> <span class="kt">FILE</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">fputs</span></code> function writes the string pointed to by <code class="docutils literal"><span class="pre">s</span></code> to the stream pointed to by
stream. The terminating null character is not written.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">fputs</span></code> function returns <code class="docutils literal"><span class="pre">EOF</span></code> if a write error occurs; otherwise it returns a
nonnegative value.</p>
</div>
<div class="section" id="the-getc-function">
<span id="index-39"></span><h3>33.7.5. The <code class="docutils literal"><span class="pre">getc</span></code> function<a class="headerlink" href="#the-getc-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="nf">getc</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span><span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">getc</span></code> function is equivalent to <code class="docutils literal"><span class="pre">fgetc</span></code>, except that if it is implemented as a macro, it
may evaluate stream more than once, so the argument should never be an expression
with side effects.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">getc</span></code> function returns the next character from the input stream pointed to by
stream. If the stream is at end-of-file, the end-of-file indicator for the stream is set and
<code class="docutils literal"><span class="pre">getc</span></code> returns <code class="docutils literal"><span class="pre">EOF</span></code>. If a read error occurs, the error indicator for the stream is set and
<code class="docutils literal"><span class="pre">getc</span></code> returns <code class="docutils literal"><span class="pre">EOF</span></code>.</p>
</div>
<div class="section" id="the-getchar-function">
<span id="index-40"></span><h3>33.7.6. The <code class="docutils literal"><span class="pre">getchar</span></code> function<a class="headerlink" href="#the-getchar-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="nf">getchar</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">getchar</span></code> function is equivalent to <code class="docutils literal"><span class="pre">getc</span></code> with the argument <code class="docutils literal"><span class="pre">stdin</span></code>.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">getchar</span></code> function returns the next character from the input stream pointed to by
<code class="docutils literal"><span class="pre">stdin</span></code>. If the stream is at end-of-file, the end-of-file indicator for the stream is set and
<code class="docutils literal"><span class="pre">getchar</span></code> returns <code class="docutils literal"><span class="pre">EOF</span></code>. If a read error occurs, the error indicator for the stream is set and
<code class="docutils literal"><span class="pre">getchar</span></code> returns <code class="docutils literal"><span class="pre">EOF</span></code>.</p>
</div>
<div class="section" id="the-gets-function">
<span id="index-41"></span><h3>33.7.7. The <code class="docutils literal"><span class="pre">gets</span></code> function<a class="headerlink" href="#the-gets-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">char</span> <span class="o">*</span><span class="nf">gets</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">s</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">gets</span></code> function reads characters from the input stream pointed to by <code class="docutils literal"><span class="pre">stdin</span></code>, into the
array pointed to by <code class="docutils literal"><span class="pre">s</span></code>, until end-of-file is encountered or a new-line character is read.
Any new-line character is discarded, and a null character is written immediately after the
last character read into the array.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">gets</span></code> function returns <code class="docutils literal"><span class="pre">s</span></code> if successful. If end-of-file is encountered and no
characters have been read into the array, the contents of the array remain unchanged and a
null pointer is returned. If a read error occurs during the operation, the array contents are
indeterminate and a null pointer is returned.</p>
</div>
<div class="section" id="the-putc-function">
<span id="index-42"></span><h3>33.7.8. The <code class="docutils literal"><span class="pre">putc</span></code> function<a class="headerlink" href="#the-putc-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="nf">putc</span><span class="p">(</span><span class="kt">int</span> <span class="n">c</span><span class="p">,</span> <span class="kt">FILE</span> <span class="o">*</span><span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">putc</span></code> function is equivalent to <code class="docutils literal"><span class="pre">fputc</span></code>, except that if it is implemented as a macro, it
may evaluate stream more than once, so that argument should never be an expression
with side effects.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">putc</span></code> function returns the character written. If a write error occurs, the error
indicator for the stream is set and putc returns <code class="docutils literal"><span class="pre">EOF</span></code>.</p>
</div>
<div class="section" id="the-putchar-function">
<span id="index-43"></span><h3>33.7.9. The <code class="docutils literal"><span class="pre">putchar</span></code> function<a class="headerlink" href="#the-putchar-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="nf">putchar</span><span class="p">(</span><span class="kt">int</span> <span class="n">c</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">putchar</span></code> function is equivalent to putc with the second argument <code class="docutils literal"><span class="pre">stdout</span></code>.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">putchar</span></code> function returns the character written. If a write error occurs, the error
indicator for the stream is set and <code class="docutils literal"><span class="pre">putchar</span></code> returns <code class="docutils literal"><span class="pre">EOF</span></code>.</p>
</div>
<div class="section" id="the-puts-function">
<span id="index-44"></span><h3>33.7.10. The <code class="docutils literal"><span class="pre">puts</span></code> function<a class="headerlink" href="#the-puts-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="nf">puts</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">s</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">puts</span></code> function writes the string pointed to by <code class="docutils literal"><span class="pre">s</span></code> to the stream pointed to by <code class="docutils literal"><span class="pre">stdout</span></code>,
and appends a new-line character to the output. The terminating null character is not
written.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">puts</span></code> function returns <code class="docutils literal"><span class="pre">EOF</span></code> if a write error occurs; otherwise it returns a nonnegative
value.</p>
</div>
<div class="section" id="the-ungetc-function">
<span id="index-45"></span><h3>33.7.11. The <code class="docutils literal"><span class="pre">ungetc</span></code> function<a class="headerlink" href="#the-ungetc-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="nf">ungetc</span><span class="p">(</span><span class="kt">int</span> <span class="n">c</span><span class="p">,</span> <span class="kt">FILE</span> <span class="o">*</span><span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">ungetc</span></code> function pushes the character specified by <code class="docutils literal"><span class="pre">c</span></code> (converted to an <code class="docutils literal"><span class="pre">unsigned</span>
<span class="pre">char</span></code> ) back onto the input stream pointed to by stream. Pushed-back characters will be
returned by subsequent reads on that stream in the reverse order of their pushing. A
successful intervening call (with the stream pointed to by stream) to a file positioning
function (<code class="docutils literal"><span class="pre">fseek,</span> <span class="pre">fsetpos</span></code> or <code class="docutils literal"><span class="pre">rewind</span></code>) discards any pushed-back characters for the
stream. The external storage corresponding to the stream is unchanged.</p>
<p>One character of pushback is guaranteed. If the <code class="docutils literal"><span class="pre">ungetc</span></code> function is called too many
times on the same stream without an intervening read or file positioning operation on that
stream, the operation may fail.</p>
<p>If the value of <code class="docutils literal"><span class="pre">c</span></code> equals that of the macro <code class="docutils literal"><span class="pre">EOF</span></code>, the operation fails and the input stream is
unchanged.</p>
<p>A successful call to the <code class="docutils literal"><span class="pre">ungetc</span></code> function clears the end-of-file indicator for the stream.
The value of the file position indicator for the stream after reading or discarding all
pushed-back characters shall be the same as it was before the characters were pushed
back. For a text stream, the value of its file position indicator after a successful call to the
<code class="docutils literal"><span class="pre">ungetc</span></code> function is unspecified until all pushed-back characters are read or discarded.
For a binary stream, its file position indicator is decremented by each successful call to
the ungetc function; if its value was zero before a call, it is indeterminate after the
call.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">ungetc</span></code> function returns the character pushed back after conversion, or <code class="docutils literal"><span class="pre">EOF</span></code> if the
operation fails.</p>
<p><strong>Forward references:</strong> file positioning functions (<a class="reference internal" href="#id68"><span>File positioning functions</span></a>).</p>
</div>
</div>
<div class="section" id="direct-input-output-functions">
<span id="index-46"></span><h2>33.8. Direct input/output functions<a class="headerlink" href="#direct-input-output-functions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="the-fread-function">
<span id="index-47"></span><h3>33.8.1. The <code class="docutils literal"><span class="pre">fread</span></code> function<a class="headerlink" href="#the-fread-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">size_t</span> <span class="nf">fread</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">ptr</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">size</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">nmemb</span><span class="p">,</span> <span class="kt">FILE</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">fread</span></code> function reads, into the array pointed to by <code class="docutils literal"><span class="pre">ptr</span></code>, up to <code class="docutils literal"><span class="pre">nmemb</span></code> elements
whose size is specified by <code class="docutils literal"><span class="pre">size</span></code>, from the stream pointed to by <code class="docutils literal"><span class="pre">stream</span></code>. For each
object, <code class="docutils literal"><span class="pre">size</span></code> calls are made to the <code class="docutils literal"><span class="pre">fgetc</span></code> function and the results stored, in the order
read, in an array of <code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">char</span></code> exactly overlaying the object. The file position
indicator for the stream (if defined) is advanced by the number of characters successfully
read. If an error occurs, the resulting value of the file position indicator for the stream is
indeterminate. If a partial element is read, its value is indeterminate.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">fread</span></code> function returns the number of elements successfully read, which may be
less than <code class="docutils literal"><span class="pre">nmemb</span></code> if a read error or end-of-file is encountered. If <code class="docutils literal"><span class="pre">size</span></code> or <code class="docutils literal"><span class="pre">nmemb</span></code> is zero,
<code class="docutils literal"><span class="pre">fread</span></code> returns zero and the contents of the array and the state of the <code class="docutils literal"><span class="pre">stream</span></code> remain
unchanged.</p>
</div>
<div class="section" id="the-fwrite-function">
<span id="index-48"></span><h3>33.8.2. The <code class="docutils literal"><span class="pre">fwrite</span></code> function<a class="headerlink" href="#the-fwrite-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">size_t</span> <span class="nf">fwrite</span><span class="p">(</span><span class="k">const</span> <span class="kt">void</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">ptr</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">size</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">nmemb</span><span class="p">,</span> <span class="kt">FILE</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">fwrite</span></code> function writes, from the array pointed to by <code class="docutils literal"><span class="pre">ptr</span></code>, up to <code class="docutils literal"><span class="pre">nmemb</span></code> elements
whose size is specified by <code class="docutils literal"><span class="pre">size</span></code>, to the stream pointed to by <code class="docutils literal"><span class="pre">stream</span></code>. For each object,
<code class="docutils literal"><span class="pre">size</span></code> calls are made to the <code class="docutils literal"><span class="pre">fputc</span></code> function, taking the values (in order) from an array of
<code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">char</span></code> exactly overlaying the object. The file position indicator for the
stream (if defined) is advanced by the number of characters successfully written. If an
error occurs, the resulting value of the file position indicator for the stream is
indeterminate.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">fwrite</span></code> function returns the number of elements successfully written, which will be
less than <code class="docutils literal"><span class="pre">nmemb</span></code> only if a write error is encountered. If <code class="docutils literal"><span class="pre">size</span></code> or <code class="docutils literal"><span class="pre">nmemb</span></code> is zero,
fwrite returns zero and the state of the stream remains unchanged.</p>
</div>
</div>
<div class="section" id="file-positioning-functions">
<span id="id68"></span><span id="index-49"></span><h2>33.9. File positioning functions<a class="headerlink" href="#file-positioning-functions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="the-fgetpos-function">
<span id="fgetpos"></span><span id="id69"></span><span id="index-50"></span><h3>33.9.1. The <code class="docutils literal"><span class="pre">fgetpos</span></code> function<a class="headerlink" href="#the-fgetpos-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="nf">fgetpos</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">stream</span><span class="p">,</span> <span class="kt">fpos_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">pos</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">fgetpos</span></code> function stores the current values of the parse state (if any) and file
position indicator for the stream pointed to by stream in the object pointed to by <code class="docutils literal"><span class="pre">pos</span></code>.
The values stored contain unspecified information usable by the <code class="docutils literal"><span class="pre">fsetpos</span></code> function for
repositioning the stream to its position at the time of the call to the <code class="docutils literal"><span class="pre">fgetpos</span></code> function.</p>
<p><strong>Returns</strong></p>
<p>If successful, the <code class="docutils literal"><span class="pre">fgetpos</span></code> function returns zero; on failure, the <code class="docutils literal"><span class="pre">fgetpos</span></code> function
returns nonzero and stores an implementation-defined positive value in <code class="docutils literal"><span class="pre">errno</span></code>.</p>
<p><strong>Forward references:</strong> the <code class="docutils literal"><span class="pre">fsetpos</span></code> function (<a class="reference internal" href="#id71"><span>The fsetpos function</span></a>).</p>
</div>
<div class="section" id="the-fseek-function">
<span id="fseek"></span><span id="id70"></span><span id="index-51"></span><h3>33.9.2. The <code class="docutils literal"><span class="pre">fseek</span></code> function<a class="headerlink" href="#the-fseek-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="nf">fseek</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span><span class="n">stream</span><span class="p">,</span> <span class="kt">long</span> <span class="kt">int</span> <span class="n">offset</span><span class="p">,</span> <span class="kt">int</span> <span class="n">whence</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">fseek</span></code> function sets the file position indicator for the stream pointed to by stream.
If a read or write error occurs, the error indicator for the stream is set and <code class="docutils literal"><span class="pre">fseek</span></code> fails.</p>
<p>For a binary stream, the new position, measured in characters from the beginning of the
file, is obtained by adding offset to the position specified by whence. The specified
position is the beginning of the file if <code class="docutils literal"><span class="pre">whence</span></code> is <code class="docutils literal"><span class="pre">SEEK_SET</span></code>, the current value of the file
position indicator if <code class="docutils literal"><span class="pre">SEEK_CUR</span></code>, or end-of-file if <code class="docutils literal"><span class="pre">SEEK_END</span></code>. A binary stream need not
meaningfully support <code class="docutils literal"><span class="pre">fseek</span></code> calls with a <code class="docutils literal"><span class="pre">whence</span></code> value of <code class="docutils literal"><span class="pre">SEEK_END</span></code>.</p>
<p>For a text stream, either offset shall be zero, or offset shall be a value returned by
an earlier successful call to the ftell function on a stream associated with the same file
and <code class="docutils literal"><span class="pre">whence</span></code> shall be <code class="docutils literal"><span class="pre">SEEK_SET</span></code>.</p>
<p>After determining the new position, a successful call to the <code class="docutils literal"><span class="pre">fseek</span></code> function undoes any
effects of the <code class="docutils literal"><span class="pre">ungetc</span></code> function on the stream, clears the end-of-file indicator for the
stream, and then establishes the new position. After a successful <code class="docutils literal"><span class="pre">fseek</span></code> call, the next
operation on an update stream may be either input or output.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">fseek</span></code> function returns nonzero only for a request that cannot be satisfied.</p>
<p><strong>Forward references:</strong> the ftell function (<a class="reference internal" href="#id72"><span>The ftell function</span></a>).</p>
</div>
<div class="section" id="the-fsetpos-function">
<span id="fsetpos"></span><span id="id71"></span><span id="index-52"></span><h3>33.9.3. The <code class="docutils literal"><span class="pre">fsetpos</span></code> function<a class="headerlink" href="#the-fsetpos-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="nf">fsetpos</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span><span class="n">stream</span><span class="p">,</span> <span class="k">const</span> <span class="kt">fpos_t</span> <span class="o">*</span><span class="n">pos</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">fsetpos</span></code> function sets the <code class="docutils literal"><span class="pre">mbstate_t</span></code> object (if any) and file position indicator
for the stream pointed to by stream according to the value of the object pointed to by
<code class="docutils literal"><span class="pre">pos</span></code>, which shall be a value obtained from an earlier successful call to the <code class="docutils literal"><span class="pre">fgetpos</span></code>
function on a stream associated with the same file. If a read or write error occurs, the
error indicator for the stream is set and <code class="docutils literal"><span class="pre">fsetpos</span></code> fails.</p>
<p>A successful call to the <code class="docutils literal"><span class="pre">fsetpos</span></code> function undoes any effects of the <code class="docutils literal"><span class="pre">ungetc</span></code> function
on the stream, clears the end-of-file indicator for the stream, and then establishes the new
parse state and position. After a successful <code class="docutils literal"><span class="pre">fsetpos</span></code> call, the next operation on an
update stream may be either input or output.</p>
<p><strong>Returns</strong></p>
<p>If successful, the <code class="docutils literal"><span class="pre">fsetpos</span></code> function returns zero; on failure, the <code class="docutils literal"><span class="pre">fsetpos</span></code> function
returns nonzero and stores an implementation-defined positive value in errno.</p>
</div>
<div class="section" id="the-ftell-function">
<span id="ftell"></span><span id="id72"></span><span id="index-53"></span><h3>33.9.4. The <code class="docutils literal"><span class="pre">ftell</span></code> function<a class="headerlink" href="#the-ftell-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">long</span> <span class="kt">int</span> <span class="nf">ftell</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span><span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">ftell</span></code> function obtains the current value of the file position indicator for the stream
pointed to by <code class="docutils literal"><span class="pre">stream</span></code>. For a binary stream, the value is the number of characters from
the beginning of the file. For a text stream, its file position indicator contains unspecified
information, usable by the <code class="docutils literal"><span class="pre">fseek</span></code> function for returning the file position indicator for the
stream to its position at the time of the ftell call; the difference between two such
return values is not necessarily a meaningful measure of the number of characters written
or read.</p>
<p><strong>Returns</strong></p>
<p>If successful, the <code class="docutils literal"><span class="pre">ftell</span></code> function returns the current value of the file position indicator
for the stream. On failure, the ftell function returns <code class="docutils literal"><span class="pre">-1L</span></code> and stores an
implementation-defined positive value in errno.</p>
</div>
<div class="section" id="the-rewind-function">
<span id="rewind"></span><span id="index-54"></span><h3>33.9.5. The <code class="docutils literal"><span class="pre">rewind</span></code> function<a class="headerlink" href="#the-rewind-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">void</span> <span class="nf">rewind</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span><span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">rewind</span></code> function sets the file position indicator for the stream pointed to by
stream to the beginning of the file. It is equivalent to</p>
<div class="highlight-c"><div class="highlight"><pre><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">fseek</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="mi">0L</span><span class="p">,</span> <span class="n">SEEK_SET</span><span class="p">)</span>
</pre></div>
</div>
<p>except that the error indicator for the <code class="docutils literal"><span class="pre">stream</span></code> is also cleared.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">rewind</span></code> function returns no value.</p>
</div>
</div>
<div class="section" id="error-handling-functions">
<span id="index-55"></span><h2>33.10. Error-handling functions<a class="headerlink" href="#error-handling-functions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="the-clearerr-function">
<span id="index-56"></span><h3>33.10.1. The <code class="docutils literal"><span class="pre">clearerr</span></code> function<a class="headerlink" href="#the-clearerr-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">void</span> <span class="nf">clearerr</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span><span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">clearerr</span></code> function clears the end-of-file and error indicators for the stream pointed
to by <code class="docutils literal"><span class="pre">stream</span></code>.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">clearerr</span></code> function returns no value.</p>
</div>
<div class="section" id="the-feof-function">
<span id="index-57"></span><h3>33.10.2. The <code class="docutils literal"><span class="pre">feof</span></code> function<a class="headerlink" href="#the-feof-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="nf">feof</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span><span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">feof</span></code> function tests the end-of-file indicator for the stream pointed to by <code class="docutils literal"><span class="pre">stream</span></code>.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">feof</span></code> function returns nonzero if and only if the end-of-file indicator is set for
<code class="docutils literal"><span class="pre">stream</span></code>.</p>
</div>
<div class="section" id="the-ferror-function">
<span id="index-58"></span><h3>33.10.3. The <code class="docutils literal"><span class="pre">ferror</span></code> function<a class="headerlink" href="#the-ferror-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">int</span> <span class="nf">ferror</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span><span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">ferror</span></code> function tests the error indicator for the stream pointed to by <code class="docutils literal"><span class="pre">stream</span></code>.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">ferror</span></code> function returns nonzero if and only if the error indicator is set for
<code class="docutils literal"><span class="pre">stream</span></code>.</p>
</div>
<div class="section" id="the-perror-function">
<span id="index-59"></span><h3>33.10.4. The <code class="docutils literal"><span class="pre">perror</span></code> function<a class="headerlink" href="#the-perror-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="kt">void</span> <span class="nf">perror</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">s</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">perror</span></code> function maps the error number in the integer expression <code class="docutils literal"><span class="pre">errno</span></code> to an
error message. It writes a sequence of characters to the standard error stream thus: first
(if <code class="docutils literal"><span class="pre">s</span></code> is not a null pointer and the character pointed to by <code class="docutils literal"><span class="pre">s</span></code> is not the null character), the
string pointed to by <code class="docutils literal"><span class="pre">s</span></code> followed by a colon (:) and a space; then an appropriate error
message string followed by a new-line character. The contents of the error message
strings are the same as those returned by the <code class="docutils literal"><span class="pre">strerror</span></code> function with argument errno.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">perror</span></code> function returns no value.</p>
<p><strong>Forward references:</strong> the <code class="docutils literal"><span class="pre">strerror</span></code> function (<a class="reference internal" href="../string/#id10"><span>The strerror function</span></a>).</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../stdlib/" class="btn btn-neutral float-right" title="34. General utilities &lt;stdlib.h&gt;" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../stdint/" class="btn btn-neutral" title="32. Integer types &lt;stdint.h&gt;" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2012-2015, Shiv S. Dayal.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>