<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>8. Structures and Unions &mdash; C99  documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="C99  documentation" href="../" />
    <link rel="next" title="9. Following Specification" href="../fs/" />
    <link rel="prev" title="7. Functions" href="../func/" />
<script src="../_static/analytics.js" type="text/javascript"></script>
<link rel="stylesheet" href="../../../css/math.css" type="text/css" />

  </head>
  <body>




  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">Home</a>
        <a class="navbar-brand" href="../">
          C99</a>
        <span class="navbar-text navbar-version pull-left"><b>0.2</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics/">2. Basics of C</a></li>
<li class="toctree-l1"><a class="reference internal" href="../io/">3. Console I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../oae/">4. Operators and Expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cf/">5. Control Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ap/">6. Arrays and Pointers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../func/">7. Functions</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">8. Structures and Unions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fs/">9. Following Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../env/">10. Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lang/">11. Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../macros/">12. Preprocessing Directives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../std/">13. The C Standard Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../assert/">14. Diagnostics <tt class="docutils literal"><span class="pre">&lt;assert.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../complex/">15. Complex arithmetic <tt class="docutils literal"><span class="pre">&lt;complex.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../ctypes/">16. Character Handling <tt class="docutils literal"><span class="pre">&lt;ctype.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../errno/">17. Errors <tt class="docutils literal"><span class="pre">&lt;errno.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../fenv/">18. Floating-point environment <tt class="docutils literal"><span class="pre">&lt;fenv.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../float/">19. Characteristics of floating types <tt class="docutils literal"><span class="pre">&lt;float.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../inttypes/">20. Format conversion of integer types <tt class="docutils literal"><span class="pre">&lt;inttypes.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../iso646/">21. Alternative spellings <tt class="docutils literal"><span class="pre">&lt;iso646.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../limits/">22. Sizes of integer types <tt class="docutils literal"><span class="pre">&lt;limits.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../locale/">23. Localization &lt;locale.h&gt;</a></li>
<li class="toctree-l1"><a class="reference internal" href="../math/">24. Mathematics <tt class="docutils literal"><span class="pre">&lt;math.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../setjmp/">25. Nonlocal jumps <tt class="docutils literal"><span class="pre">&lt;setjmp.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../signal/">26. Signal handling <tt class="docutils literal"><span class="pre">&lt;signal.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stdarg/">27. Variable arguments <tt class="docutils literal"><span class="pre">&lt;stdarg.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stdbool/">28. Boolean type and values <tt class="docutils literal"><span class="pre">&lt;stdbool.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stddef/">29. Common definitions <tt class="docutils literal"><span class="pre">&lt;stddef.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stdint/">30. Integer types <tt class="docutils literal"><span class="pre">&lt;stdint.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stdio/">31. Input/output <tt class="docutils literal"><span class="pre">&lt;stdio.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stdlib/">32. General utilities <tt class="docutils literal"><span class="pre">&lt;stdlib.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../string/">33. String handling <tt class="docutils literal"><span class="pre">&lt;string.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../tgmath/">34. Type-generic math <tt class="docutils literal"><span class="pre">&lt;tgmath.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../time/">35. Date and time <tt class="docutils literal"><span class="pre">&lt;time.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../wchar/">36. Extended multibyte and wide character utilities <tt class="docutils literal"><span class="pre">&lt;wchar.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../wtype/">37. Wide character classification and mapping utilities <tt class="docutils literal"><span class="pre">&lt;wctype.h&gt;</span></tt></a></li>
<li class="toctree-l1"><a class="reference internal" href="../problems/">38. Problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license/">39. License</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">8. Structures and Unions</a><ul>
<li><a class="reference internal" href="#pointer-members-of-a-structure">8.1. Pointer members of a Structure</a></li>
<li><a class="reference internal" href="#usage-of-structures-and-unions">8.2. Usage of Structures and Unions</a></li>
<li><a class="reference internal" href="#structures-and-arrays">8.3. Structures and Arrays</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="../func/" title="Previous Chapter: 7. Functions"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; 7. Functions</span>
    </a>
  </li>
  <li>
    <a href="../fs/" title="Next Chapter: 9. Following Specification"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">9. Following Spe... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../_sources/su.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search/" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="structures-and-unions">
<h1>8. Structures and Unions<a class="headerlink" href="#structures-and-unions" title="Permalink to this headline">¶</a></h1>
<p>So far what we have seen are data types defiend by the language itself. However,
there are times when these simple types are not enough. For this C has defined
two types which can be defined by the user or programmer. The two keywords are
struct and union. A structure or union is basically a composite type. These may
consist of one more types of C. That is they may contain one or more basic types
like <tt class="docutils literal"><span class="pre">int,</span> <span class="pre">char</span></tt> etc or other structures or unions. Consider following
examples:</p>
<div class="highlight-c" id="index-0"><div class="highlight"><pre><span class="k">struct</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
  <span class="kt">char</span> <span class="n">c</span><span class="p">;</span>
  <span class="kt">int</span><span class="o">*</span> <span class="n">p</span><span class="p">;</span>
  <span class="kt">char</span><span class="o">*</span> <span class="n">s</span><span class="p">;</span>
<span class="p">}</span> <span class="n">mystruct</span><span class="p">;</span>

<span class="k">struct</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
  <span class="k">struct</span> <span class="n">mystruct</span> <span class="n">S</span><span class="p">;</span>
  <span class="p">}</span> <span class="n">another_struct</span><span class="p">;</span>

<span class="k">union</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
  <span class="kt">char</span> <span class="n">c</span><span class="p">;</span>
  <span class="kt">int</span><span class="o">*</span> <span class="n">p</span><span class="p">;</span>
  <span class="n">char8</span> <span class="n">s</span><span class="p">;</span>
<span class="p">}</span> <span class="n">myunion</span><span class="p">;</span>

<span class="k">union</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
  <span class="k">union</span> <span class="n">myunion</span> <span class="n">S</span><span class="p">;</span>
<span class="p">}</span> <span class="n">another_union</span><span class="p">;</span>
</pre></div>
</div>
<p>As you see from the declarations there is no difference between structures and
unions. However, there is a subtle difference. Consider following program:</p>
<div class="highlight-c" id="index-1"><div class="highlight"><pre><span class="c1">// Author: Shiv Shankar Dayal</span>
<span class="c1">// Description: Difference between strutures and unions.</span>

<span class="cp">#include &lt;stdio.h&gt;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
  <span class="kt">double</span> <span class="n">d</span><span class="p">;</span>
<span class="p">}</span> <span class="n">mystruct</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">union</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
  <span class="kt">double</span> <span class="n">d</span><span class="p">;</span>
<span class="p">}</span> <span class="n">myunion</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">mystruct</span> <span class="n">s</span><span class="p">;</span>
  <span class="n">myunion</span> <span class="n">u</span><span class="p">;</span>

  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Size of structure is %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">s</span><span class="p">));</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Size of union is %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">u</span><span class="p">));</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>and the output is:</p>
<div class="highlight-python"><div class="highlight"><pre>Size of structure is 12
Size of union is 8
</pre></div>
</div>
<p>Before explaining the output let me tell you this that using typedef is mandatory
here to get the sizeof operator working. If you try something like
<tt class="docutils literal"><span class="pre">sizeof(struct</span> <span class="pre">mystruct);</span></tt> then you will get this as error. invalid application
of <tt class="docutils literal"><span class="pre">sizeof</span></tt> to incomplete type <tt class="docutils literal"><span class="pre">struct</span> <span class="pre">mystruct</span></tt>.</p>
<p>By using <tt class="docutils literal"><span class="pre">typedef</span></tt> we let the compiler recognize them as complete types. Now
let us see the output. Size of structure is simple. It is equal to size of an
integer plus size of a double. However, size of union is equal to size of double.
Basically, size of a structure is equal to size of all its elements. For unions
size of union is equal to size of biggest element. This means that elements for a
union overlap on the same memory area. We can use this fact to write a very
clever program. Before writing the program let me give you some background.</p>
<p id="index-2">There is something called endianness of a machine. What it means that how bytes
are stored. If a machine is little endian like most intel processors then the
bytes are stoerd in reverse order. What this means that they are not in there
natural order. On big endian machines like PPC architecture the bytes are in
natural order. In other words if the least significant byte of an integer is
stored at the lowest memory address then it is called little-endian. If the least
significant byte is stored at the highest address then it is called big-endian.
For example my machine is intel so let us see what output we get from this
program.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="c1">//Author: Shiv S. Dayal</span>
<span class="c1">//Description: Demo of endianness,</span>

<span class="cp">#include &lt;stdio.h&gt;</span>

<span class="k">typedef</span> <span class="k">union</span> <span class="p">{</span>
  <span class="kt">short</span> <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
  <span class="kt">char</span> <span class="n">c</span><span class="p">;</span>
<span class="p">}</span> <span class="n">myunion</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">myunion</span> <span class="n">u</span><span class="p">;</span>

  <span class="n">u</span><span class="p">.</span><span class="n">i</span> <span class="o">=</span> <span class="mi">258</span><span class="p">;</span>

  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">u</span><span class="p">.</span><span class="n">c</span><span class="p">);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>and the output is:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="mi">2</span>
</pre></div>
</div>
<p>So as you can see the extra 2 i.e. 258 - 256 is getting stored in c. Now 2 is the
high order byte. Hence we can conclude that my machine is little-endian.</p>
<p>More ways to initialize a structure are given below:</p>
<div class="highlight-c" id="index-3"><div class="highlight"><pre><span class="c1">//Author: Shiv S. Dayal</span>
<span class="c1">//Description: Structure initialization</span>

<span class="cp">#include &lt;stdio.h&gt;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="kt">short</span> <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
  <span class="kt">char</span> <span class="n">c</span><span class="p">;</span>
<span class="p">}</span> <span class="n">mystruct</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">mystruct</span> <span class="n">s1</span> <span class="o">=</span> <span class="p">{</span><span class="mi">34</span><span class="p">,</span> <span class="sc">&#39;c&#39;</span><span class="p">},</span> <span class="n">s2</span><span class="p">;</span>

  <span class="n">s2</span><span class="p">.</span><span class="n">i</span> <span class="o">=</span> <span class="mi">43</span><span class="p">;</span>
  <span class="n">s2</span><span class="p">.</span><span class="n">c</span> <span class="o">=</span> <span class="sc">&#39;e&#39;</span><span class="p">;</span>

  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d %d %c %c</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">s1</span><span class="p">.</span><span class="n">i</span><span class="p">,</span> <span class="n">s2</span><span class="p">.</span><span class="n">i</span><span class="p">,</span> <span class="n">s1</span><span class="p">.</span><span class="n">c</span><span class="p">,</span> <span class="n">s2</span><span class="p">.</span><span class="n">c</span><span class="p">);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>and the output is:</p>
<div class="highlight-python"><div class="highlight"><pre>34 43 c e
</pre></div>
</div>
<div class="section" id="pointer-members-of-a-structure">
<span id="index-4"></span><h2>8.1. Pointer members of a Structure<a class="headerlink" href="#pointer-members-of-a-structure" title="Permalink to this headline">¶</a></h2>
<p>Sometime structures will contain pointer members. Obviously, you will have to
allocate memory to them or point them to some existing variable&#8217;s address. Let us
see how this is done.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="c1">//Author:Shiv S. Dayal</span>
<span class="c1">//Descrition: Pointer members of a structure</span>

<span class="cp">#include&lt;stdio.h&gt;</span>
<span class="cp">#include&lt;stdlib.h&gt;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="kt">int</span><span class="o">*</span> <span class="n">i</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">j</span><span class="p">;</span>
  <span class="p">}</span><span class="n">s</span><span class="p">;</span>

  <span class="n">s</span><span class="o">*</span> <span class="n">s1</span><span class="p">;</span>

  <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">s</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">s</span><span class="p">));</span>
  <span class="n">s1</span><span class="o">-&gt;</span><span class="n">i</span><span class="o">=</span><span class="p">(</span><span class="kt">int</span><span class="o">*</span><span class="p">)</span><span class="mi">4</span><span class="p">;</span>
  <span class="n">s1</span><span class="o">-&gt;</span><span class="n">j</span><span class="o">=</span><span class="mi">5</span><span class="p">;</span>

  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;s1-&gt;i=%p s1-&gt;j=%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">s1</span><span class="o">-&gt;</span><span class="n">i</span><span class="p">,</span> <span class="n">s1</span><span class="o">-&gt;</span><span class="n">j</span><span class="p">);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>and the output is:</p>
<div class="highlight-python"><div class="highlight"><pre>s1-&gt;i=0x4 s1-&gt;j=5
</pre></div>
</div>
<p>You might be wondering why I have casted <tt class="docutils literal"><span class="pre">(int*)</span></tt> to 4 and used a <tt class="docutils literal"><span class="pre">%p</span></tt> format
specifier. The reason is <tt class="docutils literal"><span class="pre">*i</span></tt> is a pointer to an interger and hence <tt class="docutils literal"><span class="pre">s1-&gt;i</span></tt>
is a pointer and will accept only an integer pointer. Therefore, cating is
mandatory else you will get a warning. Again, at the time of assignment I have
assigned value 4 which is an address actully. Therefore <tt class="docutils literal"><span class="pre">%p</span></tt> is needed for
conversion. However, this program is a bad, wrong program to death. The reason is
the address 4 may be out of program&#8217;s segmenst and touching it in the sense of
trying to read from it or write to it may doom your day. Try to burn your hands.
Let us see the correct version.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="c1">//Author:Shiv S. Dayal</span>
<span class="c1">//Descrition: Pointer members of a structure</span>

<span class="cp">#include&lt;stdio.h&gt;</span>
<span class="cp">#include&lt;stdlib.h&gt;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="kt">int</span><span class="o">*</span> <span class="n">i</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">j</span><span class="p">;</span>
  <span class="p">}</span><span class="n">s</span><span class="p">;</span>

  <span class="n">s</span><span class="o">*</span> <span class="n">s1</span><span class="p">;</span>

  <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">s</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">s</span><span class="p">));</span>
  <span class="n">s1</span><span class="o">-&gt;</span><span class="n">i</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span>
  <span class="o">*</span><span class="p">(</span><span class="n">s1</span><span class="o">-&gt;</span><span class="n">i</span><span class="p">)</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
  <span class="n">s1</span><span class="o">-&gt;</span><span class="n">j</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>

  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;s1-&gt;i = %d s1-&gt;j = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="o">*</span><span class="p">(</span><span class="n">s1</span><span class="o">-&gt;</span><span class="n">i</span><span class="p">),</span> <span class="n">s1</span><span class="o">-&gt;</span><span class="n">j</span><span class="p">);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>and the output is:</p>
<div class="highlight-python"><div class="highlight"><pre>s1-&gt;i=4 s1-&gt;j=5
</pre></div>
</div>
</div>
<div class="section" id="usage-of-structures-and-unions">
<h2>8.2. Usage of Structures and Unions<a class="headerlink" href="#usage-of-structures-and-unions" title="Permalink to this headline">¶</a></h2>
<p>A structure can be used to represent rather complex entities. For example, a car.
Consider a car. It has weight, power, cost, mileage etc. All this can be combined
and represented as a structure. Structures can be categorized in two categories.
One will be normal structures and second is seld-referential structures.
Self-referential structures contain a pointer to a structure of its own type. You
will see its usage in the book when we deal with data structures. We have already
shown you normal structures. The data members of a structure are referenced using
<tt class="docutils literal"><span class="pre">.</span></tt> operator or <tt class="docutils literal"><span class="pre">-&gt;</span></tt> if they are pointer type as we have already seen. The
rule of using structures or unions is simple. When you cannot represent any
entity using provided data types then combine the basic entities and use them in
an structure or union. Union has one distiction which you already know. Consider
you know that your entity can have multiple type of values but only one at a
time. Then you can use unions.</p>
<p>Structures and unions can be nested as well. I will just give a simple example
and leave rest to your imagination and previously told facts.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">j</span><span class="p">;</span>
<span class="p">}</span><span class="n">t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span><span class="p">{</span>
  <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
  <span class="n">t</span> <span class="n">t1</span><span class="p">;</span>
<span class="p">}</span><span class="n">s</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">s</span> <span class="n">s1</span><span class="p">;</span>

  <span class="n">s1</span><span class="p">.</span><span class="n">i</span><span class="o">=</span><span class="mi">4</span><span class="p">;</span>
  <span class="n">s1</span><span class="p">.</span><span class="n">t1</span><span class="p">.</span><span class="n">j</span><span class="o">=</span><span class="mi">5</span><span class="p">;</span>

  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d %d&quot;</span><span class="p">,</span> <span class="n">s1</span><span class="p">.</span><span class="n">i</span><span class="p">,</span> <span class="n">s1</span><span class="p">.</span><span class="n">t1</span><span class="p">.</span><span class="n">j</span><span class="p">);</span>

<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>and the output is:</p>
<div class="highlight-python"><div class="highlight"><pre>4 5
</pre></div>
</div>
</div>
<div class="section" id="structures-and-arrays">
<span id="index-5"></span><h2>8.3. Structures and Arrays<a class="headerlink" href="#structures-and-arrays" title="Permalink to this headline">¶</a></h2>
<p>There are two posiibilities here. Structures containing arrays and arrays of
structure. Let us see an example which combines both:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="c1">//Author: Shiv S. Dayal</span>
<span class="c1">//Description: Arrays as structure elements</span>

<span class="cp">#include &lt;stdio.h&gt;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">i</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="p">}</span><span class="n">ais</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">ais</span> <span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>

  <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
  <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
  <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>

  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d %d %d %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>and the output is:</p>
<div class="highlight-python"><div class="highlight"><pre>1 2 3 4
</pre></div>
</div>
<p>Similarly, more complex objects can be constructed.</p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2012, Shiv S. Dayal.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>