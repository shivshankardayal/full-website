

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-17487464-6']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>8. Structures and Unions &mdash; C Programming  documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="C Programming  documentation" href="../"/>
        <link rel="next" title="9. Strings" href="../strings/"/>
        <link rel="prev" title="7. Functions" href="../func/"/>
<link rel="stylesheet" href="../../css/math.css" type="text/css" />


  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../" class="icon icon-home"> C Programming
          

          
          </a>

          
            
            
              <div class="version">
                0.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics/">2. Basics of C</a></li>
<li class="toctree-l1"><a class="reference internal" href="../io/">3. Console I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../oae/">4. Operators and Expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cf/">5. Control Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ap/">6. Arrays and Pointers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../func/">7. Functions</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">8. Structures and Unions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#pointer-members-of-a-structure">8.1. Pointer members of a Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="#usage-of-structures-and-unions">8.2. Usage of Structures and Unions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#structures-and-arrays">8.3. Structures and Arrays</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../strings/">9. Strings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fileio/">10. File Input/Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fs/">11. Following Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../env/">12. Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lang/">13. Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../macros/">14. Preprocessing Directives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../std/">15. The C Standard Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../assert/">16. Diagnostics <code class="docutils literal"><span class="pre">&lt;assert.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../complex/">17. Complex arithmetic <code class="docutils literal"><span class="pre">&lt;complex.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../ctypes/">18. Character Handling <code class="docutils literal"><span class="pre">&lt;ctype.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../errno/">19. Errors <code class="docutils literal"><span class="pre">&lt;errno.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../fenv/">20. Floating-point environment <code class="docutils literal"><span class="pre">&lt;fenv.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../float/">21. Characteristics of floating types <code class="docutils literal"><span class="pre">&lt;float.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../inttypes/">22. Format conversion of integer types <code class="docutils literal"><span class="pre">&lt;inttypes.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../iso646/">23. Alternative spellings <code class="docutils literal"><span class="pre">&lt;iso646.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../limits/">24. Sizes of integer types <code class="docutils literal"><span class="pre">&lt;limits.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../locale/">25. Localization &lt;locale.h&gt;</a></li>
<li class="toctree-l1"><a class="reference internal" href="../math/">26. Mathematics <code class="docutils literal"><span class="pre">&lt;math.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../setjmp/">27. Nonlocal jumps <code class="docutils literal"><span class="pre">&lt;setjmp.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../signal/">28. Signal handling <code class="docutils literal"><span class="pre">&lt;signal.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stdarg/">29. Variable arguments <code class="docutils literal"><span class="pre">&lt;stdarg.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stdbool/">30. Boolean type and values <code class="docutils literal"><span class="pre">&lt;stdbool.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stddef/">31. Common definitions <code class="docutils literal"><span class="pre">&lt;stddef.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stdint/">32. Integer types <code class="docutils literal"><span class="pre">&lt;stdint.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stdio/">33. Input/output <code class="docutils literal"><span class="pre">&lt;stdio.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stdlib/">34. General utilities <code class="docutils literal"><span class="pre">&lt;stdlib.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../string/">35. String handling <code class="docutils literal"><span class="pre">&lt;string.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../tgmath/">36. Type-generic math <code class="docutils literal"><span class="pre">&lt;tgmath.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../time/">37. Date and time <code class="docutils literal"><span class="pre">&lt;time.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../wchar/">38. Extended multibyte and wide character utilities <code class="docutils literal"><span class="pre">&lt;wchar.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../wtype/">39. Wide character classification and mapping utilities <code class="docutils literal"><span class="pre">&lt;wctype.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../problems/">40. Problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license/">41. License</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../">C Programming</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../">Docs</a> &raquo;</li>
      
    <li>8. Structures and Unions</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/su.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="structures-and-unions">
<h1>8. Structures and Unions<a class="headerlink" href="#structures-and-unions" title="Permalink to this headline">Â¶</a></h1>
<p>So far what we have seen are data types defiend by the language itself. However,
there are times when these simple types are not enough. For this C has defined
two types which can be defined by the user or programmer. The two keywords are
struct and union. A structure or union is basically a composite type. These may
consist of one more types of C. That is they may contain one or more basic types
like <code class="docutils literal"><span class="pre">int,</span> <span class="pre">char</span></code> etc or other structures or unions. Consider following
examples:</p>
<div class="highlight-c" id="index-0"><div class="highlight"><pre><span class="k">struct</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
  <span class="kt">char</span> <span class="n">c</span><span class="p">;</span>
  <span class="kt">int</span><span class="o">*</span> <span class="n">p</span><span class="p">;</span>
  <span class="kt">char</span><span class="o">*</span> <span class="n">s</span><span class="p">;</span>
<span class="p">}</span> <span class="n">mystruct</span><span class="p">;</span>

<span class="k">struct</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
  <span class="k">struct</span> <span class="n">mystruct</span> <span class="n">S</span><span class="p">;</span>
  <span class="p">}</span> <span class="n">another_struct</span><span class="p">;</span>

<span class="k">union</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
  <span class="kt">char</span> <span class="n">c</span><span class="p">;</span>
  <span class="kt">int</span><span class="o">*</span> <span class="n">p</span><span class="p">;</span>
  <span class="n">char8</span> <span class="n">s</span><span class="p">;</span>
<span class="p">}</span> <span class="n">myunion</span><span class="p">;</span>

<span class="k">union</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
  <span class="k">union</span> <span class="n">myunion</span> <span class="n">S</span><span class="p">;</span>
<span class="p">}</span> <span class="n">another_union</span><span class="p">;</span>
</pre></div>
</div>
<p>As you see from the declarations there is no difference between structures and
unions. However, there is a subtle difference. Consider following program:</p>
<div class="highlight-c" id="index-1"><div class="highlight"><pre><span class="c1">// Author: Shiv Shankar Dayal</span>
<span class="c1">// Description: Difference between strutures and unions.</span>

<span class="cp">#include &lt;stdio.h&gt;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
  <span class="kt">double</span> <span class="n">d</span><span class="p">;</span>
<span class="p">}</span> <span class="n">mystruct</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">union</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
  <span class="kt">double</span> <span class="n">d</span><span class="p">;</span>
<span class="p">}</span> <span class="n">myunion</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">mystruct</span> <span class="n">s</span><span class="p">;</span>
  <span class="n">myunion</span> <span class="n">u</span><span class="p">;</span>

  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Size of structure is %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">s</span><span class="p">));</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Size of union is %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">u</span><span class="p">));</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>and the output is:</p>
<div class="highlight-python"><div class="highlight"><pre>Size of structure is 12
Size of union is 8
</pre></div>
</div>
<p>Before explaining the output let me tell you this that using typedef is mandatory
here to get the sizeof operator working. If you try something like
<code class="docutils literal"><span class="pre">sizeof(struct</span> <span class="pre">mystruct);</span></code> then you will get this as error. invalid application
of <code class="docutils literal"><span class="pre">sizeof</span></code> to incomplete type <code class="docutils literal"><span class="pre">struct</span> <span class="pre">mystruct</span></code>.</p>
<p>By using <code class="docutils literal"><span class="pre">typedef</span></code> we let the compiler recognize them as complete types. Now
let us see the output. Size of structure is simple. It is equal to size of an
integer plus size of a double. However, size of union is equal to size of double.
Basically, size of a structure is equal to size of all its elements. For unions
size of union is equal to size of biggest element. This means that elements for a
union overlap on the same memory area. We can use this fact to write a very
clever program. Before writing the program let me give you some background.</p>
<p id="index-2">There is something called endianness of a machine. What it means that how bytes
are stored. If a machine is little endian like most intel processors then the
bytes are stoerd in reverse order. What this means that they are not in there
natural order. On big endian machines like PPC architecture the bytes are in
natural order. In other words if the least significant byte of an integer is
stored at the lowest memory address then it is called little-endian. If the least
significant byte is stored at the highest address then it is called big-endian.
For example my machine is intel so let us see what output we get from this
program.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="c1">//Author: Shiv S. Dayal</span>
<span class="c1">//Description: Demo of endianness,</span>

<span class="cp">#include &lt;stdio.h&gt;</span>

<span class="k">typedef</span> <span class="k">union</span> <span class="p">{</span>
  <span class="kt">short</span> <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
  <span class="kt">char</span> <span class="n">c</span><span class="p">;</span>
<span class="p">}</span> <span class="n">myunion</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">myunion</span> <span class="n">u</span><span class="p">;</span>

  <span class="n">u</span><span class="p">.</span><span class="n">i</span> <span class="o">=</span> <span class="mi">258</span><span class="p">;</span>

  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">u</span><span class="p">.</span><span class="n">c</span><span class="p">);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>and the output is:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="mi">2</span>
</pre></div>
</div>
<p>So as you can see the extra 2 i.e. 258 - 256 is getting stored in c. Now 2 is the
high order byte. Hence we can conclude that my machine is little-endian.</p>
<p>More ways to initialize a structure are given below:</p>
<div class="highlight-c" id="index-3"><div class="highlight"><pre><span class="c1">//Author: Shiv S. Dayal</span>
<span class="c1">//Description: Structure initialization</span>

<span class="cp">#include &lt;stdio.h&gt;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="kt">short</span> <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
  <span class="kt">char</span> <span class="n">c</span><span class="p">;</span>
<span class="p">}</span> <span class="n">mystruct</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">mystruct</span> <span class="n">s1</span> <span class="o">=</span> <span class="p">{</span><span class="mi">34</span><span class="p">,</span> <span class="sc">&#39;c&#39;</span><span class="p">},</span> <span class="n">s2</span><span class="p">;</span>

  <span class="n">s2</span><span class="p">.</span><span class="n">i</span> <span class="o">=</span> <span class="mi">43</span><span class="p">;</span>
  <span class="n">s2</span><span class="p">.</span><span class="n">c</span> <span class="o">=</span> <span class="sc">&#39;e&#39;</span><span class="p">;</span>

  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d %d %c %c</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">s1</span><span class="p">.</span><span class="n">i</span><span class="p">,</span> <span class="n">s2</span><span class="p">.</span><span class="n">i</span><span class="p">,</span> <span class="n">s1</span><span class="p">.</span><span class="n">c</span><span class="p">,</span> <span class="n">s2</span><span class="p">.</span><span class="n">c</span><span class="p">);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>and the output is:</p>
<div class="highlight-python"><div class="highlight"><pre>34 43 c e
</pre></div>
</div>
<div class="section" id="pointer-members-of-a-structure">
<span id="index-4"></span><h2>8.1. Pointer members of a Structure<a class="headerlink" href="#pointer-members-of-a-structure" title="Permalink to this headline">Â¶</a></h2>
<p>Sometime structures will contain pointer members. Obviously, you will have to
allocate memory to them or point them to some existing variable&#8217;s address. Let us
see how this is done.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="c1">//Author:Shiv S. Dayal</span>
<span class="c1">//Descrition: Pointer members of a structure</span>

<span class="cp">#include&lt;stdio.h&gt;</span>
<span class="cp">#include&lt;stdlib.h&gt;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="kt">int</span><span class="o">*</span> <span class="n">i</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">j</span><span class="p">;</span>
  <span class="p">}</span><span class="n">s</span><span class="p">;</span>

  <span class="n">s</span><span class="o">*</span> <span class="n">s1</span><span class="p">;</span>

  <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">s</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">s</span><span class="p">));</span>
  <span class="n">s1</span><span class="o">-&gt;</span><span class="n">i</span><span class="o">=</span><span class="p">(</span><span class="kt">int</span><span class="o">*</span><span class="p">)</span><span class="mi">4</span><span class="p">;</span>
  <span class="n">s1</span><span class="o">-&gt;</span><span class="n">j</span><span class="o">=</span><span class="mi">5</span><span class="p">;</span>

  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;s1-&gt;i=%p s1-&gt;j=%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">s1</span><span class="o">-&gt;</span><span class="n">i</span><span class="p">,</span> <span class="n">s1</span><span class="o">-&gt;</span><span class="n">j</span><span class="p">);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>and the output is:</p>
<div class="highlight-python"><div class="highlight"><pre>s1-&gt;i=0x4 s1-&gt;j=5
</pre></div>
</div>
<p>You might be wondering why I have casted <code class="docutils literal"><span class="pre">(int*)</span></code> to 4 and used a <code class="docutils literal"><span class="pre">%p</span></code> format
specifier. The reason is <code class="docutils literal"><span class="pre">*i</span></code> is a pointer to an interger and hence <code class="docutils literal"><span class="pre">s1-&gt;i</span></code>
is a pointer and will accept only an integer pointer. Therefore, cating is
mandatory else you will get a warning. Again, at the time of assignment I have
assigned value 4 which is an address actully. Therefore <code class="docutils literal"><span class="pre">%p</span></code> is needed for
conversion. However, this program is a bad, wrong program to death. The reason is
the address 4 may be out of program&#8217;s segmenst and touching it in the sense of
trying to read from it or write to it may doom your day. Try to burn your hands.
Let us see the correct version.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="c1">//Author:Shiv S. Dayal</span>
<span class="c1">//Descrition: Pointer members of a structure</span>

<span class="cp">#include&lt;stdio.h&gt;</span>
<span class="cp">#include&lt;stdlib.h&gt;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="kt">int</span><span class="o">*</span> <span class="n">i</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">j</span><span class="p">;</span>
  <span class="p">}</span><span class="n">s</span><span class="p">;</span>

  <span class="n">s</span><span class="o">*</span> <span class="n">s1</span><span class="p">;</span>

  <span class="n">s1</span> <span class="o">=</span> <span class="p">(</span><span class="n">s</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">s</span><span class="p">));</span>
  <span class="n">s1</span><span class="o">-&gt;</span><span class="n">i</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span>
  <span class="o">*</span><span class="p">(</span><span class="n">s1</span><span class="o">-&gt;</span><span class="n">i</span><span class="p">)</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
  <span class="n">s1</span><span class="o">-&gt;</span><span class="n">j</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>

  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;s1-&gt;i = %d s1-&gt;j = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="o">*</span><span class="p">(</span><span class="n">s1</span><span class="o">-&gt;</span><span class="n">i</span><span class="p">),</span> <span class="n">s1</span><span class="o">-&gt;</span><span class="n">j</span><span class="p">);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>and the output is:</p>
<div class="highlight-python"><div class="highlight"><pre>s1-&gt;i=4 s1-&gt;j=5
</pre></div>
</div>
</div>
<div class="section" id="usage-of-structures-and-unions">
<h2>8.2. Usage of Structures and Unions<a class="headerlink" href="#usage-of-structures-and-unions" title="Permalink to this headline">Â¶</a></h2>
<p>A structure can be used to represent rather complex entities. For example, a car.
Consider a car. It has weight, power, cost, mileage etc. All this can be combined
and represented as a structure. Structures can be categorized in two categories.
One will be normal structures and second is seld-referential structures.
Self-referential structures contain a pointer to a structure of its own type. You
will see its usage in the book when we deal with data structures. We have already
shown you normal structures. The data members of a structure are referenced using
<code class="docutils literal"><span class="pre">.</span></code> operator or <code class="docutils literal"><span class="pre">-&gt;</span></code> if they are pointer type as we have already seen. The
rule of using structures or unions is simple. When you cannot represent any
entity using provided data types then combine the basic entities and use them in
an structure or union. Union has one distiction which you already know. Consider
you know that your entity can have multiple type of values but only one at a
time. Then you can use unions.</p>
<p>Structures and unions can be nested as well. I will just give a simple example
and leave rest to your imagination and previously told facts.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">j</span><span class="p">;</span>
<span class="p">}</span><span class="n">t</span><span class="p">;</span>

<span class="k">typedef</span> <span class="k">struct</span><span class="p">{</span>
  <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
  <span class="n">t</span> <span class="n">t1</span><span class="p">;</span>
<span class="p">}</span><span class="n">s</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">s</span> <span class="n">s1</span><span class="p">;</span>

  <span class="n">s1</span><span class="p">.</span><span class="n">i</span><span class="o">=</span><span class="mi">4</span><span class="p">;</span>
  <span class="n">s1</span><span class="p">.</span><span class="n">t1</span><span class="p">.</span><span class="n">j</span><span class="o">=</span><span class="mi">5</span><span class="p">;</span>

  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d %d&quot;</span><span class="p">,</span> <span class="n">s1</span><span class="p">.</span><span class="n">i</span><span class="p">,</span> <span class="n">s1</span><span class="p">.</span><span class="n">t1</span><span class="p">.</span><span class="n">j</span><span class="p">);</span>

<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>and the output is:</p>
<div class="highlight-python"><div class="highlight"><pre>4 5
</pre></div>
</div>
</div>
<div class="section" id="structures-and-arrays">
<span id="index-5"></span><h2>8.3. Structures and Arrays<a class="headerlink" href="#structures-and-arrays" title="Permalink to this headline">Â¶</a></h2>
<p>There are two posiibilities here. Structures containing arrays and arrays of
structure. Let us see an example which combines both:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="c1">//Author: Shiv S. Dayal</span>
<span class="c1">//Description: Arrays as structure elements</span>

<span class="cp">#include &lt;stdio.h&gt;</span>

<span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">i</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="p">}</span><span class="n">ais</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">ais</span> <span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>

  <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
  <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
  <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>

  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d %d %d %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">i</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">i</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>and the output is:</p>
<div class="highlight-python"><div class="highlight"><pre>1 2 3 4
</pre></div>
</div>
<p>Similarly, more complex objects can be constructed.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../strings/" class="btn btn-neutral float-right" title="9. Strings" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../func/" class="btn btn-neutral" title="7. Functions" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2012-2015, Shiv S. Dayal.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>