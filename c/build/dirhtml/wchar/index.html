

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-17487464-6']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>38. Extended multibyte and wide character utilities &lt;wchar.h&gt; &mdash; C Programming  documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="C Programming  documentation" href="../"/>
        <link rel="next" title="39. Wide character classification and mapping utilities &lt;wctype.h&gt;" href="../wtype/"/>
        <link rel="prev" title="37. Date and time &lt;time.h&gt;" href="../time/"/>
<link rel="stylesheet" href="../../css/math.css" type="text/css" />


  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../" class="icon icon-home"> C Programming
          

          
          </a>

          
            
            
              <div class="version">
                0.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics/">2. Basics of C</a></li>
<li class="toctree-l1"><a class="reference internal" href="../io/">3. Console I/O</a></li>
<li class="toctree-l1"><a class="reference internal" href="../oae/">4. Operators and Expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cf/">5. Control Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ap/">6. Arrays and Pointers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../func/">7. Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../su/">8. Structures and Unions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../strings/">9. Strings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fileio/">10. File Input/Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fs/">11. Following Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../env/">12. Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lang/">13. Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../macros/">14. Preprocessing Directives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../std/">15. The C Standard Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../assert/">16. Diagnostics <code class="docutils literal"><span class="pre">&lt;assert.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../complex/">17. Complex arithmetic <code class="docutils literal"><span class="pre">&lt;complex.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../ctypes/">18. Character Handling <code class="docutils literal"><span class="pre">&lt;ctype.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../errno/">19. Errors <code class="docutils literal"><span class="pre">&lt;errno.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../fenv/">20. Floating-point environment <code class="docutils literal"><span class="pre">&lt;fenv.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../float/">21. Characteristics of floating types <code class="docutils literal"><span class="pre">&lt;float.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../inttypes/">22. Format conversion of integer types <code class="docutils literal"><span class="pre">&lt;inttypes.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../iso646/">23. Alternative spellings <code class="docutils literal"><span class="pre">&lt;iso646.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../limits/">24. Sizes of integer types <code class="docutils literal"><span class="pre">&lt;limits.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../locale/">25. Localization &lt;locale.h&gt;</a></li>
<li class="toctree-l1"><a class="reference internal" href="../math/">26. Mathematics <code class="docutils literal"><span class="pre">&lt;math.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../setjmp/">27. Nonlocal jumps <code class="docutils literal"><span class="pre">&lt;setjmp.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../signal/">28. Signal handling <code class="docutils literal"><span class="pre">&lt;signal.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stdarg/">29. Variable arguments <code class="docutils literal"><span class="pre">&lt;stdarg.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stdbool/">30. Boolean type and values <code class="docutils literal"><span class="pre">&lt;stdbool.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stddef/">31. Common definitions <code class="docutils literal"><span class="pre">&lt;stddef.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stdint/">32. Integer types <code class="docutils literal"><span class="pre">&lt;stdint.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stdio/">33. Input/output <code class="docutils literal"><span class="pre">&lt;stdio.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stdlib/">34. General utilities <code class="docutils literal"><span class="pre">&lt;stdlib.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../string/">35. String handling <code class="docutils literal"><span class="pre">&lt;string.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../tgmath/">36. Type-generic math <code class="docutils literal"><span class="pre">&lt;tgmath.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../time/">37. Date and time <code class="docutils literal"><span class="pre">&lt;time.h&gt;</span></code></a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">38. Extended multibyte and wide character utilities <code class="docutils literal"><span class="pre">&lt;wchar.h&gt;</span></code></a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">38.1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#formatted-wide-character-input-output-functions">38.2. Formatted wide character input/output functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-fwprintf-function">38.2.1. The <code class="docutils literal"><span class="pre">fwprintf</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-fwscanf-function">38.2.2. The <code class="docutils literal"><span class="pre">fwscanf</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-swprintf-function">38.2.3. The <code class="docutils literal"><span class="pre">swprintf</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-swscanf-function">38.2.4. The <code class="docutils literal"><span class="pre">swscanf</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-vfwprintf-function">38.2.5. The <code class="docutils literal"><span class="pre">vfwprintf</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-vfwscanf-function">38.2.6. The <code class="docutils literal"><span class="pre">vfwscanf</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-vswprintf-function">38.2.7. The <code class="docutils literal"><span class="pre">vswprintf</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-vswscanf-function">38.2.8. The <code class="docutils literal"><span class="pre">vswscanf</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-vwprintf-function">38.2.9. The <code class="docutils literal"><span class="pre">vwprintf</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-vwscanf-function">38.2.10. The <code class="docutils literal"><span class="pre">vwscanf</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-wprintf-function">38.2.11. The <code class="docutils literal"><span class="pre">wprintf</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-wscanf-function">38.2.12. The <code class="docutils literal"><span class="pre">wscanf</span></code> function</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#wide-character-input-output-functions">38.3. Wide character input/output functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-fgetwc-function">38.3.1. The <code class="docutils literal"><span class="pre">fgetwc</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-fgetws-function">38.3.2. The <code class="docutils literal"><span class="pre">fgetws</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-fputwc-function">38.3.3. The <code class="docutils literal"><span class="pre">fputwc</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-fputws-function">38.3.4. The <code class="docutils literal"><span class="pre">fputws</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-fwide-function">38.3.5. The <code class="docutils literal"><span class="pre">fwide</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-getwc-function">38.3.6. The <code class="docutils literal"><span class="pre">getwc</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-getwchar-function">38.3.7. The <code class="docutils literal"><span class="pre">getwchar</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-putwc-function">38.3.8. The <code class="docutils literal"><span class="pre">putwc</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-putwchar-function">38.3.9. The <code class="docutils literal"><span class="pre">putwchar</span></code> function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-ungetwc-function">38.3.10. The <code class="docutils literal"><span class="pre">ungetwc</span></code> function</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#general-wide-string-utilities">38.4. General wide string utilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#wide-string-numeric-conversion-functions">38.4.1. Wide string numeric conversion functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#the-wcstod-wcstof-and-wcstold-functions">38.4.1.1. The <code class="docutils literal"><span class="pre">wcstod,</span> <span class="pre">wcstof</span></code> and <code class="docutils literal"><span class="pre">wcstold</span></code> functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-wcstol-wcstoll-wcstoul-and-wcstoull-functions">38.4.1.2. The <code class="docutils literal"><span class="pre">wcstol,</span> <span class="pre">wcstoll,</span> <span class="pre">wcstoul</span></code> and <code class="docutils literal"><span class="pre">wcstoull</span></code> functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#wide-string-copying-functions">38.4.2. Wide string copying functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#the-wcscpy-function">38.4.2.1. The <code class="docutils literal"><span class="pre">wcscpy</span></code> function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-wcsncpy-function">38.4.2.2. The <code class="docutils literal"><span class="pre">wcsncpy</span></code> function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-wmemcpy-function">38.4.2.3. The <code class="docutils literal"><span class="pre">wmemcpy</span></code> function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-wmemmove-function">38.4.2.4. The <code class="docutils literal"><span class="pre">wmemmove</span></code> function</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#wide-string-concatenation-functions">38.4.3. Wide string concatenation functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#the-wcscat-function">38.4.3.1. The <code class="docutils literal"><span class="pre">wcscat</span></code> function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-wcsncat-function">38.4.3.2. The <code class="docutils literal"><span class="pre">wcsncat</span></code> function</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#wide-string-comparison-functions">38.4.4. Wide string comparison functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#the-wcscmp-function">38.4.4.1. The <code class="docutils literal"><span class="pre">wcscmp</span></code> function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-wcscoll-function">38.4.4.2. The <code class="docutils literal"><span class="pre">wcscoll</span></code> function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-wcsncmp-function">38.4.4.3. The <code class="docutils literal"><span class="pre">wcsncmp</span></code> function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-wcsxfrm-function">38.4.4.4. The <code class="docutils literal"><span class="pre">wcsxfrm</span></code> function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-wmemcmp-function">38.4.4.5. The <code class="docutils literal"><span class="pre">wmemcmp</span></code> function</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#wide-string-search-functions">38.4.5. Wide string search functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#the-wcschr-function">38.4.5.1. The <code class="docutils literal"><span class="pre">wcschr</span></code> function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-wcscspn-function">38.4.5.2. The <code class="docutils literal"><span class="pre">wcscspn</span></code> function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-wcspbrk-function">38.4.5.3. The <code class="docutils literal"><span class="pre">wcspbrk</span></code> function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-wcsrchr-function">38.4.5.4. The <code class="docutils literal"><span class="pre">wcsrchr</span></code> function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-wcsspn-function">38.4.5.5. The <code class="docutils literal"><span class="pre">wcsspn</span></code> function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-wcsstr-function">38.4.5.6. The <code class="docutils literal"><span class="pre">wcsstr</span></code> function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-wcstok-function">38.4.5.7. The <code class="docutils literal"><span class="pre">wcstok</span></code> function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-wmemchr-function">38.4.5.8. The <code class="docutils literal"><span class="pre">wmemchr</span></code> function</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#miscellaneous-functions">38.4.6. Miscellaneous functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#the-wcslen-function">38.4.6.1. The <code class="docutils literal"><span class="pre">wcslen</span></code> function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-wmemset-function">38.4.6.2. The <code class="docutils literal"><span class="pre">wmemset</span></code> function</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#wide-character-time-conversion-functions">38.5. Wide character time conversion functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-wcsftime-function">38.5.1. The <code class="docutils literal"><span class="pre">wcsftime</span></code> function</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#extended-multibyte-wide-character-conversion-utilities">38.6. Extended multibyte/wide character conversion utilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#single-byte-wide-character-conversion-functions">38.6.1. Single-byte/wide character conversion functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#the-btowc-function">38.6.1.1. The <code class="docutils literal"><span class="pre">btowc</span></code> function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-wctob-function">38.6.1.2. The <code class="docutils literal"><span class="pre">wctob</span></code> function</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#conversion-state-functions">38.6.2. Conversion state functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#the-mbsinit-function">38.6.2.1. The <code class="docutils literal"><span class="pre">mbsinit</span></code> function</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#restartable-multibyte-wide-character-conversion-functions">38.6.3. Restartable multibyte/wide character conversion functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#the-mbrlen-function">38.6.3.1. The <code class="docutils literal"><span class="pre">mbrlen</span></code> function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-mbrtowc-function">38.6.3.2. The <code class="docutils literal"><span class="pre">mbrtowc</span></code> function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-wcrtomb-function">38.6.3.3. The <code class="docutils literal"><span class="pre">wcrtomb</span></code> function</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#restartable-multibyte-wide-string-conversion-functions">38.6.4. Restartable multibyte/wide string conversion functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#the-mbsrtowcs-function">38.6.4.1. The <code class="docutils literal"><span class="pre">mbsrtowcs</span></code> function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-wcsrtombs-function">38.6.4.2. The <code class="docutils literal"><span class="pre">wcsrtombs</span></code> function</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../wtype/">39. Wide character classification and mapping utilities <code class="docutils literal"><span class="pre">&lt;wctype.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../problems/">40. Problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license/">41. License</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../">C Programming</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../">Docs</a> &raquo;</li>
      
    <li>38. Extended multibyte and wide character utilities <code class="docutils literal"><span class="pre">&lt;wchar.h&gt;</span></code></li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/wchar.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="extended-multibyte-and-wide-character-utilities-wchar-h">
<span id="wchar"></span><span id="index-0"></span><h1>38. Extended multibyte and wide character utilities <code class="docutils literal"><span class="pre">&lt;wchar.h&gt;</span></code><a class="headerlink" href="#extended-multibyte-and-wide-character-utilities-wchar-h" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<span id="id1"></span><h2>38.1. Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p id="index-1">The header <code class="docutils literal"><span class="pre">&lt;wchar.h&gt;</span></code> declares four data types, one tag, four macros, and many
functions.</p>
<p>The types declared are <code class="docutils literal"><span class="pre">wchar_t</span></code> and <code class="docutils literal"><span class="pre">size_t</span></code> (both described in <a class="reference internal" href="../stddef/#stddef"><span>Common definitions &lt;stddef.h&gt;</span></a>);</p>
<blockquote>
<div>mbstate_t</div></blockquote>
<p>which is an object type other than an array type that can hold the conversion state
information necessary to convert between sequences of multibyte characters and wide
characters;</p>
<blockquote>
<div>wint_t</div></blockquote>
<p>which is an integer type unchanged by default argument promotions that can hold any
value corresponding to members of the extended character set, as well as at least one
value that does not correspond to any member of the extended character set (see <code class="docutils literal"><span class="pre">WEOF</span></code>
below); <a class="footnote-reference" href="#id4" id="id2">[1]</a> and</p>
<blockquote>
<div>struct tm</div></blockquote>
<p>which is declared as an incomplete structure type (the contents are described in <a class="reference internal" href="../time/#id1"><span>Components of time</span></a>).</p>
<p id="index-2">The macros defined are <code class="docutils literal"><span class="pre">NULL</span></code> (described in <a class="reference internal" href="../stddef/#stddef"><span>Common definitions &lt;stddef.h&gt;</span></a>); <code class="docutils literal"><span class="pre">WCHAR_MIN</span></code> and <code class="docutils literal"><span class="pre">WCHAR_MAX</span></code>
(described in <a class="reference internal" href="../stdint/#id11"><span>Limits of other integer types</span></a>); and</p>
<blockquote>
<div>WEOF</div></blockquote>
<p>which expands to a constant expression of type <code class="docutils literal"><span class="pre">wint_t</span></code> whose value does not
correspond to any member of the extended character set. <a class="footnote-reference" href="#id5" id="id3">[2]</a> It is accepted (and returned)
by several functions in this subclause to indicate <em>end-of-file</em>, that is, no more input from a
stream. It is also used as a wide character value that does not correspond to any member
of the extended character set.</p>
<p>The functions declared are grouped as follows:</p>
<ul class="simple">
<li>Functions that perform input and output of wide characters, or multibyte characters,
or both;</li>
<li>Functions that provide wide string numeric conversion;</li>
<li>Functions that perform general wide string manipulation;</li>
<li>Functions for wide string date and time conversion; and</li>
<li>Functions that provide extended capabilities for conversion between multibyte and
wide character sequences.</li>
</ul>
<p>Unless explicitly stated otherwise, if the execution of a function described in this
subclause causes copying to take place between objects that overlap, the behavior is
undefined.</p>
<table class="docutils footnote" frame="void" id="id4" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[1]</a></td><td><code class="docutils literal"><span class="pre">wchar_t</span></code> and <code class="docutils literal"><span class="pre">wint_t</span></code> can be the same integer type.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id5" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[2]</a></td><td>The value of the macro <code class="docutils literal"><span class="pre">WEOF</span></code> may differ from that of <code class="docutils literal"><span class="pre">EOF</span></code> and need not be negative.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="formatted-wide-character-input-output-functions">
<span id="id6"></span><span id="index-3"></span><h2>38.2. Formatted wide character input/output functions<a class="headerlink" href="#formatted-wide-character-input-output-functions" title="Permalink to this headline">¶</a></h2>
<p>The formatted wide character input/output functions shall behave as if there is a sequence
point after the actions associated with each specifier. <a class="footnote-reference" href="#id14" id="id7">[3]</a></p>
<div class="section" id="the-fwprintf-function">
<span id="index-4"></span><h3>38.2.1. The <code class="docutils literal"><span class="pre">fwprintf</span></code> function<a class="headerlink" href="#the-fwprintf-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">int</span> <span class="nf">fwprintf</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">stream</span><span class="p">,</span> <span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">format</span><span class="p">,</span> <span class="p">...);</span>
</pre></div>
</div>
<p><strong>Description</strong>
The <code class="docutils literal"><span class="pre">fwprintf</span></code> function writes output to the stream pointed to by <code class="docutils literal"><span class="pre">stream</span></code>, under
control of the wide string pointed to by <code class="docutils literal"><span class="pre">format</span></code> that specifies how subsequent arguments
are converted for output. If there are insufficient arguments for the format, the behavior
is undefined. If the format is exhausted while arguments remain, the excess arguments
are evaluated (as always) but are otherwise ignored. The <code class="docutils literal"><span class="pre">fwprintf</span></code> function returns
when the end of the format string is encountered.</p>
<p>The format is composed of zero or more directives: ordinary wide characters (not %),
which are copied unchanged to the output stream; and conversion specifications, each of
which results in fetching zero or more subsequent arguments, converting them, if
applicable, according to the corresponding conversion specifier, and then writing the
result to the output stream.</p>
<p>Each conversion specification is introduced by the wide character <code class="docutils literal"><span class="pre">%</span></code>. After the <code class="docutils literal"><span class="pre">%</span></code>, the
following appear in sequence:</p>
<ul class="simple">
<li>Zero or more <em>flags</em> (in any order) that modify the meaning of the conversion
specification.</li>
<li>An optional minimum <em>field width</em>. If the converted value has fewer wide characters
than the field width, it is padded with spaces (by default) on the left (or right, if the
left adjustment flag, described later, has been given) to the field width. The field
width takes the form of an asterisk <code class="docutils literal"><span class="pre">*</span></code> (described later) or a nonnegative decimal
integer. <a class="footnote-reference" href="#id15" id="id8">[4]</a></li>
<li>An optional <em>precision</em> that gives the minimum number of digits to appear for the <code class="docutils literal"><span class="pre">d,</span> <span class="pre">i,</span>
<span class="pre">o,</span> <span class="pre">u,</span> <span class="pre">x</span></code> and <code class="docutils literal"><span class="pre">X</span></code> conversions, the number of digits to appear after the decimal-point
wide character for <code class="docutils literal"><span class="pre">a,</span> <span class="pre">A,</span> <span class="pre">e,</span> <span class="pre">E,</span> <span class="pre">f</span></code> and <code class="docutils literal"><span class="pre">F</span></code> conversions, the maximum number of
significant digits for the <code class="docutils literal"><span class="pre">g</span></code> and <code class="docutils literal"><span class="pre">G</span></code> conversions, or the maximum number of wide
characters to be written for <code class="docutils literal"><span class="pre">s</span></code> conversions. The precision takes the form of a period
(<code class="docutils literal"><span class="pre">.</span></code>) followed either by an asterisk <code class="docutils literal"><span class="pre">*</span></code> (described later) or by an optional decimal
integer; if only the period is specified, the precision is taken as zero. If a precision
appears with any other conversion specifier, the behavior is undefined.</li>
<li>An optional <em>length modifier</em> that specifies the size of the argument.</li>
<li>A <em>conversion specifier</em> wide character that specifies the type of conversion to be
applied.</li>
</ul>
<p>As noted above, a field width, or precision, or both, may be indicated by an asterisk. In
this case, an <em>int</em> argument supplies the field width or precision. The arguments
specifying field width, or precision, or both, shall appear (in that order) before the
argument (if any) to be converted. A negative field width argument is taken as a - flag
followed by a positive field width. A neg ative precision argument is taken as if the
precision were omitted.</p>
<p>The flag wide characters and their meanings are:</p>
<p><code class="docutils literal"><span class="pre">-</span></code> The result of the conversion is left-justified within the field. (It is right-justified if
this flag is not specified.)</p>
<p><code class="docutils literal"><span class="pre">+</span></code> The result of a signed conversion always begins with a plus or minus sign. (It
begins with a sign only when a negative value is converted if this flag is not
specified.) <a class="footnote-reference" href="#id16" id="id9">[5]</a></p>
<p><em>space</em> If the first wide character of a signed conversion is not a sign, or if a signed
conversion results in no wide characters, a space is prefixed to the result. If the
<em>space</em> and + flags both appear, the <em>space</em> flag is ignored.</p>
<p><code class="docutils literal"><span class="pre">#</span></code> The result is converted to an &#8220;alternative form&#8221;. For o conversion, it increases
the precision, if and only if necessary, to force the first digit of the result to be a
zero (if the value and precision are both 0, a single 0 is printed). For <code class="docutils literal"><span class="pre">x</span></code> (or <code class="docutils literal"><span class="pre">X</span></code>)
conversion, a nonzero result has <code class="docutils literal"><span class="pre">0x</span></code> (or <code class="docutils literal"><span class="pre">0X</span></code>) prefixed to it. For <code class="docutils literal"><span class="pre">a,</span> <span class="pre">A,</span> <span class="pre">e,</span> <span class="pre">E,</span> <span class="pre">f,</span> <span class="pre">F,</span> <span class="pre">g</span></code>
and <code class="docutils literal"><span class="pre">G</span></code> conversions, the result of converting a floating-point number always
contains a decimal-point wide character, even if no digits follow it. (Normally, a
decimal-point wide character appears in the result of these conversions only if a
digit follows it.) For <code class="docutils literal"><span class="pre">g</span></code> and <code class="docutils literal"><span class="pre">G</span></code> conversions, trailing zeros are <em>not</em> removed from the
result. For other conversions, the behavior is undefined.</p>
<p><code class="docutils literal"><span class="pre">0</span></code> For <code class="docutils literal"><span class="pre">d,</span> <span class="pre">i,</span> <span class="pre">o,</span> <span class="pre">u,</span> <span class="pre">x,</span> <span class="pre">X,</span> <span class="pre">a,</span> <span class="pre">A,</span> <span class="pre">e,</span> <span class="pre">E,</span> <span class="pre">f,</span> <span class="pre">F,</span> <span class="pre">g</span></code> and <code class="docutils literal"><span class="pre">G</span></code> conversions, leading zeros
(following any indication of sign or base) are used to pad to the field width rather
than performing space padding, except when converting an infinity or NaN. If the
<code class="docutils literal"><span class="pre">0</span></code> and - flags both appear, the 0 flag is ignored. For <code class="docutils literal"><span class="pre">d,</span> <span class="pre">i,</span> <span class="pre">o,</span> <span class="pre">u,</span> <span class="pre">x</span></code> and <code class="docutils literal"><span class="pre">X</span></code>
conversions, if a precision is specified, the 0 flag is ignored. For other
conversions, the behavior is undefined.</p>
<p>The length modifiers and their meanings are:</p>
<p><code class="docutils literal"><span class="pre">hh</span></code> Specifies that a following <code class="docutils literal"><span class="pre">d,</span> <span class="pre">i,</span> <span class="pre">o,</span> <span class="pre">u,</span> <span class="pre">x</span></code> or <code class="docutils literal"><span class="pre">X</span></code> conversion specifier applies to a
<code class="docutils literal"><span class="pre">signed</span> <span class="pre">char</span></code> or <code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">char</span></code> argument (the argument will have
been promoted according to the integer promotions, but its value shall be
converted to <code class="docutils literal"><span class="pre">signed</span> <span class="pre">char</span></code> or <code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">char</span></code> before printing); or that
a following <code class="docutils literal"><span class="pre">n</span></code> conversion specifier applies to a pointer to a <code class="docutils literal"><span class="pre">signed</span> <span class="pre">char</span></code>
argument.</p>
<p><code class="docutils literal"><span class="pre">h</span></code> Specifies that a following <code class="docutils literal"><span class="pre">d,</span> <span class="pre">i,</span> <span class="pre">o,</span> <span class="pre">u,</span> <span class="pre">x</span></code> or <code class="docutils literal"><span class="pre">X</span></code> conversion specifier applies to a
<code class="docutils literal"><span class="pre">short</span> <span class="pre">int</span></code> or <code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">short</span> <span class="pre">int</span></code> argument (the argument will
have been promoted according to the integer promotions, but its value shall
be converted to <code class="docutils literal"><span class="pre">short</span> <span class="pre">int</span></code> or <code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">short</span> <span class="pre">int</span></code> before printing);
or that a following <code class="docutils literal"><span class="pre">n</span></code> conversion specifier applies to a pointer to a <code class="docutils literal"><span class="pre">short</span>
<span class="pre">int</span></code> argument.</p>
<p><code class="docutils literal"><span class="pre">l</span> <span class="pre">(ell)</span></code> Specifies that a following <code class="docutils literal"><span class="pre">d,</span> <span class="pre">i,</span> <span class="pre">o,</span> <span class="pre">u,</span> <span class="pre">x</span></code> or <code class="docutils literal"><span class="pre">X</span></code> conversion specifier applies to a
<code class="docutils literal"><span class="pre">long</span> <span class="pre">int</span></code> or <code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">int</span></code> argument; that a following <code class="docutils literal"><span class="pre">n</span></code>
conversion specifier applies to a pointer to a <code class="docutils literal"><span class="pre">long</span> <span class="pre">int</span></code> argument; that a
following <code class="docutils literal"><span class="pre">c</span></code> conversion specifier applies to a <code class="docutils literal"><span class="pre">wint_t</span></code> argument; that a
following <code class="docutils literal"><span class="pre">s</span></code> conversion specifier applies to a pointer to a <code class="docutils literal"><span class="pre">wchar_t</span></code>
argument; or has no effect on a following <code class="docutils literal"><span class="pre">a,</span> <span class="pre">A,</span> <span class="pre">e,</span> <span class="pre">E,</span> <span class="pre">f,</span> <span class="pre">F,</span> <span class="pre">g</span></code> or <code class="docutils literal"><span class="pre">G</span></code> conversion
specifier.</p>
<p><code class="docutils literal"><span class="pre">ll</span> <span class="pre">(ell-ell)</span></code> Specifies that a following <code class="docutils literal"><span class="pre">d,</span> <span class="pre">i,</span> <span class="pre">o,</span> <span class="pre">u,</span> <span class="pre">x</span></code> or <code class="docutils literal"><span class="pre">X</span></code> conversion specifier applies to a
<code class="docutils literal"><span class="pre">long</span> <span class="pre">long</span> <span class="pre">int</span></code> or <code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">long</span> <span class="pre">int</span></code> argument; or that a
following <code class="docutils literal"><span class="pre">n</span></code> conversion specifier applies to a pointer to a <code class="docutils literal"><span class="pre">long</span> <span class="pre">long</span> <span class="pre">int</span></code>
argument.</p>
<p><code class="docutils literal"><span class="pre">j</span></code> Specifies that a following <code class="docutils literal"><span class="pre">d,</span> <span class="pre">i,</span> <span class="pre">o,</span> <span class="pre">u,</span> <span class="pre">x</span></code> or <code class="docutils literal"><span class="pre">X</span></code> conversion specifier applies to
an <code class="docutils literal"><span class="pre">intmax_t</span></code> or <code class="docutils literal"><span class="pre">uintmax_t</span></code> argument; or that a following <code class="docutils literal"><span class="pre">n</span></code> conversion
specifier applies to a pointer to an <code class="docutils literal"><span class="pre">intmax_t</span></code> argument.</p>
<p><code class="docutils literal"><span class="pre">z</span></code> Specifies that a following <code class="docutils literal"><span class="pre">d,</span> <span class="pre">i,</span> <span class="pre">o,</span> <span class="pre">u,</span> <span class="pre">x</span></code> or <code class="docutils literal"><span class="pre">X</span></code> conversion specifier applies to a
<code class="docutils literal"><span class="pre">size_t</span></code> or the corresponding signed integer type argument; or that a
following <code class="docutils literal"><span class="pre">n</span></code> conversion specifier applies to a pointer to a signed integer type
corresponding to <code class="docutils literal"><span class="pre">size_t</span></code> argument.</p>
<p><code class="docutils literal"><span class="pre">t</span></code> Specifies that a following <code class="docutils literal"><span class="pre">d,</span> <span class="pre">i,</span> <span class="pre">o,</span> <span class="pre">u,</span> <span class="pre">x</span></code> or <code class="docutils literal"><span class="pre">X</span></code> conversion specifier applies to a
<code class="docutils literal"><span class="pre">ptrdiff_t</span></code> or the corresponding unsigned integer type argument; or that a
following <code class="docutils literal"><span class="pre">n</span></code> conversion specifier applies to a pointer to a <code class="docutils literal"><span class="pre">ptrdiff_t</span></code>
argument.</p>
<p><code class="docutils literal"><span class="pre">L</span></code> Specifies that a following <code class="docutils literal"><span class="pre">a,</span> <span class="pre">A,</span> <span class="pre">e,</span> <span class="pre">E,</span> <span class="pre">f,</span> <span class="pre">F,</span> <span class="pre">g</span></code> or <code class="docutils literal"><span class="pre">G</span></code> conversion specifier
applies to a <code class="docutils literal"><span class="pre">long</span> <span class="pre">double</span></code> argument.</p>
<p>If a length modifier appears with any conversion specifier other than as specified above,
the behavior is undefined.</p>
<p>The conversion specifiers and their meanings are:</p>
<p><code class="docutils literal"><span class="pre">d,i</span></code> The <code class="docutils literal"><span class="pre">int</span></code> argument is converted to signed decimal in the style <em>[-]dddd</em>. The
precision specifies the minimum number of digits to appear; if the value
being converted can be represented in fewer digits, it is expanded with
leading zeros. The default precision is 1. The result of converting a zero
value with a precision of zero is no wide characters.</p>
<p><code class="docutils literal"><span class="pre">o,u,x,X</span></code> The <code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">int</span></code> argument is converted to unsigned octal (<code class="docutils literal"><span class="pre">o</span></code>), unsigned
decimal (<code class="docutils literal"><span class="pre">u</span></code>), or unsigned hexadecimal notation (<code class="docutils literal"><span class="pre">x</span></code> or <code class="docutils literal"><span class="pre">X</span></code>) in the style <em>dddd</em>; the
letters <code class="docutils literal"><span class="pre">abcdef</span></code> are used for <code class="docutils literal"><span class="pre">x</span></code> conversion and the letters <code class="docutils literal"><span class="pre">ABCDEF</span></code> for <code class="docutils literal"><span class="pre">X</span></code>
conversion. The precision specifies the minimum number of digits to appear;
if the value being converted can be represented in fewer digits, it is expanded
with leading zeros. The default precision is 1. The result of converting a
zero value with a precision of zero is no wide characters.</p>
<p><code class="docutils literal"><span class="pre">f,F</span></code> A <code class="docutils literal"><span class="pre">double</span></code> argument representing a floating-point number is converted to
decimal notation in the style <em>[-]ddd.ddd</em>, where the number of digits after
the decimal-point wide character is equal to the precision specification. If the
precision is missing, it is taken as 6; if the precision is zero and the <code class="docutils literal"><span class="pre">#</span></code> flag is
not specified, no decimal-point wide character appears. If a decimal-point
wide character appears, at least one digit appears before it. The value is
rounded to the appropriate number of digits.</p>
<p>A <code class="docutils literal"><span class="pre">double</span></code> argument representing an infinity is converted in one of the styles
<code class="docutils literal"><span class="pre">[-]inf</span></code> or <code class="docutils literal"><span class="pre">[-]infinity</span></code> - which style is implementation-defined. A
double argument representing a NaN is converted in one of the styles
<code class="docutils literal"><span class="pre">[-]nan</span></code> or <code class="docutils literal"><span class="pre">[-]nan(n-wchar-sequence)</span></code> - which style, and the meaning of
any <code class="docutils literal"><span class="pre">n-wchar-sequence</span></code>, is implementation-defined. The <code class="docutils literal"><span class="pre">F</span></code> conversion
specifier produces <code class="docutils literal"><span class="pre">INF,</span> <span class="pre">INFINITY</span></code> or <code class="docutils literal"><span class="pre">NAN</span></code> instead of <code class="docutils literal"><span class="pre">inf,</span> <span class="pre">infinity</span></code> or
<code class="docutils literal"><span class="pre">nan</span></code> respectively. <a class="footnote-reference" href="#id17" id="id10">[6]</a></p>
<p><code class="docutils literal"><span class="pre">e,E</span></code> A <code class="docutils literal"><span class="pre">double</span></code> argument representing a floating-point number is converted in the
style <code class="docutils literal"><span class="pre">[-]d.ddd</span> <span class="pre">e</span></code><span class="math">\(\pm\)</span> dd, where there is one digit (which is nonzero if the
argument is nonzero) before the decimal-point wide character and the number
of digits after it is equal to the precision; if the precision is missing, it is taken
as 6; if the precision is zero and the <code class="docutils literal"><span class="pre">#</span></code> flag is not specified, no decimal-point
wide character appears. The value is rounded to the appropriate number of
digits. The <code class="docutils literal"><span class="pre">E</span></code> conversion specifier produces a number with <code class="docutils literal"><span class="pre">E</span></code> instead of <code class="docutils literal"><span class="pre">e</span></code>
introducing the exponent. The exponent always contains at least two digits,
and only as many more digits as necessary to represent the exponent. If the
value is zero, the exponent is zero.</p>
<p>A <code class="docutils literal"><span class="pre">double</span></code> argument representing an infinity or NaN is converted in the style
of an <code class="docutils literal"><span class="pre">f</span></code> or <code class="docutils literal"><span class="pre">F</span></code> conversion specifier.</p>
<p><code class="docutils literal"><span class="pre">g,G</span></code> A <code class="docutils literal"><span class="pre">double</span></code> argument representing a floating-point number is converted in
style <code class="docutils literal"><span class="pre">f</span></code> or <code class="docutils literal"><span class="pre">e</span></code> (or in style <code class="docutils literal"><span class="pre">F</span></code> or <code class="docutils literal"><span class="pre">E</span></code> in the case of a <code class="docutils literal"><span class="pre">G</span></code> conversion specifier),
depending on the value converted and the precision. Let <span class="math">\(P\)</span> equal the
precision if nonzero, 6 if the precision is omitted, or 1 if the precision is zero.
Then, if a conversion with style <code class="docutils literal"><span class="pre">E</span></code> would have an exponent of <span class="math">\(X\)</span>:</p>
<ul class="simple">
<li>if <span class="math">\(P &gt; X \geq~-4\)</span>, the conversion is with style <code class="docutils literal"><span class="pre">f</span></code> (or <code class="docutils literal"><span class="pre">F</span></code>) and precision
<span class="math">\(P - (X + 1)\)</span>.</li>
<li>otherwise, the conversion is with style <code class="docutils literal"><span class="pre">e</span></code> (or <code class="docutils literal"><span class="pre">E</span></code>) and precision <span class="math">\(P - 1\)</span>.</li>
</ul>
<p>Finally, unless the <code class="docutils literal"><span class="pre">#</span></code> flag is used, any trailing zeros are removed from the
fractional portion of the result and the decimal-point wide character is
removed if there is no fractional portion remaining.</p>
<p>A <code class="docutils literal"><span class="pre">double</span></code> argument representing an infinity or NaN is converted in the style
of an <code class="docutils literal"><span class="pre">f</span></code> or <code class="docutils literal"><span class="pre">F</span></code> conversion specifier.</p>
<p><code class="docutils literal"><span class="pre">a,A</span></code> A double argument representing a floating-point number is converted in the
style <code class="docutils literal"><span class="pre">[-]0xh.hhhh</span> <span class="pre">p</span></code><span class="math">\(\pm\)</span> d, where there is one hexadecimal digit (which is
nonzero if the argument is a normalized floating-point number and is
otherwise unspecified) before the decimal-point wide character <a class="footnote-reference" href="#id18" id="id11">[7]</a> and the
number of hexadecimal digits after it is equal to the precision; if the precision
is missing and <code class="docutils literal"><span class="pre">FLT_RADIX</span></code> is a power of 2, then the precision is sufficient
for an exact representation of the value; if the precision is missing and
<code class="docutils literal"><span class="pre">FLT_RADIX</span></code> is not a power of 2, then the precision is sufficient to
distinguish <a class="footnote-reference" href="#id19" id="id12">[8]</a> values of type double, except that trailing zeros may be
omitted; if the precision is zero and the <code class="docutils literal"><span class="pre">#</span></code> flag is not specified, no decimal-point
wide character appears. The letters abcdef are used for a conversion
and the letters <code class="docutils literal"><span class="pre">ABCDEF</span></code> for <code class="docutils literal"><span class="pre">A</span></code> conversion. The <code class="docutils literal"><span class="pre">A</span></code> conversion specifier
produces a number with <code class="docutils literal"><span class="pre">X</span></code> and <code class="docutils literal"><span class="pre">P</span></code> instead of <code class="docutils literal"><span class="pre">x</span></code> and <code class="docutils literal"><span class="pre">p</span></code>. The exponent always
contains at least one digit, and only as many more digits as necessary to
represent the decimal exponent of 2. If the value is zero, the exponent is
zero.</p>
<p>A <code class="docutils literal"><span class="pre">double</span></code> argument representing an infinity or NaN is converted in the style
of an <code class="docutils literal"><span class="pre">f</span></code> or <code class="docutils literal"><span class="pre">F</span></code> conversion specifier.</p>
<p><code class="docutils literal"><span class="pre">c</span></code> If no <code class="docutils literal"><span class="pre">l</span></code> length modifier is present, the <code class="docutils literal"><span class="pre">int</span></code> argument is converted to a wide
character as if by calling <code class="docutils literal"><span class="pre">btowc</span></code> and the resulting wide character is written.</p>
<p>If an <code class="docutils literal"><span class="pre">l</span></code> length modifier is present, the <code class="docutils literal"><span class="pre">wint_t</span></code> argument is converted to
<code class="docutils literal"><span class="pre">wchar_t</span></code> and written.</p>
<p><code class="docutils literal"><span class="pre">s</span></code> If no <code class="docutils literal"><span class="pre">l</span></code> length modifier is present, the argument shall be a pointer to the initial
element of a character array containing a multibyte character sequence
beginning in the initial shift state. Characters from the array are converted as
if by repeated calls to the <code class="docutils literal"><span class="pre">mbrtowc</span></code> function, with the conversion state
described by an <code class="docutils literal"><span class="pre">mbstate_t</span></code> object initialized to zero before the first
multibyte character is converted, and written up to (but not including) the
terminating null wide character. If the precision is specified, no more than
that many wide characters are written. If the precision is not specified or is
greater than the size of the converted array, the converted array shall contain a
null wide character.</p>
<p>If an <code class="docutils literal"><span class="pre">l</span></code> length modifier is present, the argument shall be a pointer to the initial
element of an array of <code class="docutils literal"><span class="pre">wchar_t</span></code> type. Wide characters from the array are
written up to (but not including) a terminating null wide character. If the
precision is specified, no more than that many wide characters are written. If
the precision is not specified or is greater than the size of the array, the array
shall contain a null wide character.</p>
<p><code class="docutils literal"><span class="pre">p</span></code> The argument shall be a pointer to <code class="docutils literal"><span class="pre">void</span></code>. The value of the pointer is
converted to a sequence of printing wide characters, in an implementation-defined manner.</p>
<p><code class="docutils literal"><span class="pre">n</span></code> The argument shall be a pointer to signed integer into which is written the
number of wide characters written to the output stream so far by this call to
fwprintf. No argument is converted, but one is consumed. If the
conversion specification includes any flags, a field width, or a precision, the
behavior is undefined.</p>
<p><code class="docutils literal"><span class="pre">%</span></code> A <code class="docutils literal"><span class="pre">%</span></code> wide character is written. No argument is converted. The complete
conversion specification shall be <code class="docutils literal"><span class="pre">%%</span></code>.</p>
<p>If a conversion specification is invalid, the behavior is undefined. If any argument is
not the correct type for the corresponding conversion specification, the behavior is
undefined.</p>
<p>In no case does a nonexistent or small field width cause truncation of a field; if the result
of a conversion is wider than the field width, the field is expanded to contain the
conversion result.</p>
<p>For <code class="docutils literal"><span class="pre">a</span></code> and <code class="docutils literal"><span class="pre">A</span></code> conversions, if <code class="docutils literal"><span class="pre">FLT_RADIX</span></code> is a power of 2, the value is correctly rounded
to a hexadecimal floating number with the given precision.</p>
<p><strong>Recommended practice</strong></p>
<p>For <code class="docutils literal"><span class="pre">a</span></code> and <code class="docutils literal"><span class="pre">A</span></code> conversions, if <code class="docutils literal"><span class="pre">FLT_RADIX</span></code> is not a power of 2 and the result is not exactly
representable in the given precision, the result should be one of the two adjacent numbers
in hexadecimal floating style with the given precision, with the extra stipulation that the
error should have a correct sign for the current rounding direction.</p>
<p>For <code class="docutils literal"><span class="pre">e,</span> <span class="pre">E,</span> <span class="pre">f,</span> <span class="pre">F,</span> <span class="pre">g</span></code> and <code class="docutils literal"><span class="pre">G</span></code> conversions, if the number of significant decimal digits is at most
<code class="docutils literal"><span class="pre">DECIMAL_DIG</span></code>, then the result should be correctly rounded. <a class="footnote-reference" href="#id20" id="id13">[9]</a> If the number of
significant decimal digits is more than <code class="docutils literal"><span class="pre">DECIMAL_DIG</span></code> but the source value is exactly
representable with <code class="docutils literal"><span class="pre">DECIMAL_DIG</span></code> digits, then the result should be an exact
representation with trailing zeros. Otherwise, the source value is bounded by two
adjacent decimal strings <span class="math">\(L &lt; U\)</span>, both having <code class="docutils literal"><span class="pre">DECIMAL_DIG</span></code> significant digits; the value
of the resultant decimal string <code class="docutils literal"><span class="pre">D</span></code> should satisfy <span class="math">\(L \leq~D \leq~U\)</span>, with the extra stipulation that
the error should have a correct sign for the current rounding direction.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">fwprintf</span></code> function returns the number of wide characters transmitted, or a negative
value if an output or encoding error occurred.</p>
<p><strong>Environmental limits</strong></p>
<p>The number of wide characters that can be produced by any single conversion shall be at
least 4095.</p>
<p>EXAMPLE To print a date and time in the form &#8220;Sunday, July 3, 10:02&#8221; followed by <span class="math">\(\pi\)</span> to five decimal
places:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;math.h&gt;</span>
<span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;wchar.h&gt;</span>
<span class="cm">/* ... */</span>
<span class="kt">wchar_t</span> <span class="o">*</span><span class="n">weekday</span><span class="p">,</span> <span class="o">*</span><span class="n">month</span><span class="p">;</span> <span class="c1">// pointers to wide strings</span>
<span class="kt">int</span> <span class="n">day</span><span class="p">,</span> <span class="n">hour</span><span class="p">,</span> <span class="n">min</span><span class="p">;</span>
<span class="n">fwprintf</span><span class="p">(</span><span class="n">stdout</span><span class="p">,</span> <span class="s">L&quot;%ls, %ls %d, %.2d:%.2d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">weekday</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">day</span><span class="p">,</span> <span class="n">hour</span><span class="p">,</span> <span class="n">min</span><span class="p">);</span>
<span class="n">fwprintf</span><span class="p">(</span><span class="n">stdout</span><span class="p">,</span> <span class="s">L&quot;pi = %.5f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">atan</span><span class="p">(</span><span class="mf">1.0</span><span class="p">));</span>
</pre></div>
</div>
<p><strong>Forward references:</strong> the <code class="docutils literal"><span class="pre">btowc</span></code> function (<a class="reference internal" href="#id54"><span>The btowc function</span></a>), the <code class="docutils literal"><span class="pre">mbrtowc</span></code> function
(<a class="reference internal" href="#id57"><span>The mbrtowc function</span></a>).</p>
<table class="docutils footnote" frame="void" id="id14" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id7">[3]</a></td><td>The <code class="docutils literal"><span class="pre">fwprintf</span></code> functions perform writes to memory for the <code class="docutils literal"><span class="pre">%n</span></code> specifier.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id15" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id8">[4]</a></td><td>Note that 0 is taken as a flag, not as the beginning of a field width.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id16" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id9">[5]</a></td><td>The results of all floating conversions of a negative zero, and of negative values that round to zero,
include a minus sign.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id17" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id10">[6]</a></td><td>When applied to infinite and NaN values, the -, +, and space flag wide characters have their usual
meaning; the <code class="docutils literal"><span class="pre">#</span></code> and 0 flag wide characters have no effect.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id18" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id11">[7]</a></td><td>Binary implementations can choose the hexadecimal digit to the left of the decimal-point wide
character so that subsequent digits align to nibble (4-bit) boundaries.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id19" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id12">[8]</a></td><td>The precision <span class="math">\(p\)</span> is sufficient to distinguish values of the source type if <span class="math">\(16^{p-1} &gt; b^n\)</span> where <span class="math">\(b\)</span> is
<code class="docutils literal"><span class="pre">FLT_RADIX</span></code> and n is the number of base-<span class="math">\(b\)</span> digits in the significand of the source type. A smaller <span class="math">\(p\)</span>
might suffice depending on the implementation&#8217;s scheme for determining the digit to the left of the
decimal-point wide character.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id20" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id13">[9]</a></td><td>For binary-to-decimal conversion, the result format&#8217;s values are the numbers representable with the
given format specifier. The number of significant digits is determined by the format specifier, and in
the case of fixed-point conversion by the source value as well.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="the-fwscanf-function">
<span id="index-5"></span><h3>38.2.2. The <code class="docutils literal"><span class="pre">fwscanf</span></code> function<a class="headerlink" href="#the-fwscanf-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">int</span> <span class="nf">fwscanf</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">stream</span><span class="p">,</span> <span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">format</span><span class="p">,</span> <span class="p">...);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">fwscanf</span></code> function reads input from the stream pointed to by <code class="docutils literal"><span class="pre">stream</span></code>, under
control of the wide string pointed to by <code class="docutils literal"><span class="pre">format</span></code> that specifies the admissible input
sequences and how they are to be converted for assignment, using subsequent arguments
as pointers to the objects to receive the converted input. If there are insufficient
arguments for the format, the behavior is undefined. If the format is exhausted while
arguments remain, the excess arguments are evaluated (as always) but are otherwise
ignored.</p>
<p>The <code class="docutils literal"><span class="pre">format</span></code> is composed of zero or more directives: one or more white-space wide
characters, an ordinary wide character (neither <code class="docutils literal"><span class="pre">%</span></code> nor a white-space wide character), or a
conversion specification. Each conversion specification is introduced by the wide
character <code class="docutils literal"><span class="pre">%</span></code>. After the <code class="docutils literal"><span class="pre">%</span></code>, the following appear in sequence:</p>
<ul class="simple">
<li>An optional assignment-suppressing wide character *.</li>
<li>An optional decimal integer greater than zero that specifies the maximum field width
(in wide characters).</li>
<li>An optional <em>length modifier</em> that specifies the size of the receiving object.</li>
<li>A <em>conversion specifier</em> wide character that specifies the type of conversion to be
applied.</li>
</ul>
<p>The <code class="docutils literal"><span class="pre">fwscanf</span></code> function executes each directive of the format in turn. If a directive fails,
as detailed below, the function returns. Failures are described as input failures (due to the
occurrence of an encoding error or the unavailability of input characters), or matching
failures (due to inappropriate input).</p>
<p>A directive composed of white-space wide character(s) is executed by reading input up to
the first non-white-space wide character (which remains unread), or until no more wide
characters can be read.</p>
<p>A directive that is an ordinary wide character is executed by reading the next wide
character of the stream. If that wide character differs from the directive, the directive
fails and the differing and subsequent wide characters remain unread. Similarly, if endof-
file, an encoding error, or a read error prevents a wide character from being read, the
directive fails.</p>
<p>A directive that is a conversion specification defines a set of matching input sequences, as
described below for each specifier. A conversion specification is executed in the
following steps:</p>
<p>Input white-space wide characters (as specified by the <code class="docutils literal"><span class="pre">iswspace</span></code> function) are skipped,
unless the specification includes a <code class="docutils literal"><span class="pre">[,</span> <span class="pre">c</span></code> or <code class="docutils literal"><span class="pre">n</span></code> specifier. <a class="footnote-reference" href="#id23" id="id21">[10]</a></p>
<p>An input item is read from the stream, unless the specification includes an n specifier. An
input item is defined as the longest sequence of input wide characters which does not
exceed any specified field width and which is, or is a prefix of, a matching input
sequence. <a class="footnote-reference" href="#id24" id="id22">[11]</a> The first wide character, if any, after the input item remains unread. If the
length of the input item is zero, the execution of the directive fails; this condition is a
matching failure unless end-of-file, an encoding error, or a read error prevented input
from the stream, in which case it is an input failure.</p>
<p>Except in the case of a <code class="docutils literal"><span class="pre">%</span></code> specifier, the input item (or, in the case of a <code class="docutils literal"><span class="pre">%n</span></code> directive, the
count of input wide characters) is converted to a type appropriate to the conversion
specifier. If the input item is not a matching sequence, the execution of the directive fails:
this condition is a matching failure. Unless assignment suppression was indicated by a *,
the result of the conversion is placed in the object pointed to by the first argument
following the <code class="docutils literal"><span class="pre">format</span></code> argument that has not already received a conversion result. If this
object does not have an appropriate type, or if the result of the conversion cannot be
represented in the object, the behavior is undefined.</p>
<p>The length modifiers and their meanings are:</p>
<p><code class="docutils literal"><span class="pre">hh</span></code> Specifies that a following <code class="docutils literal"><span class="pre">d,</span> <span class="pre">i,</span> <span class="pre">o,</span> <span class="pre">u,</span> <span class="pre">x,</span> <span class="pre">X</span></code> or <code class="docutils literal"><span class="pre">n</span></code> conversion specifier applies
to an argument with type pointer to <code class="docutils literal"><span class="pre">signed</span> <span class="pre">char</span></code> or <code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">char</span></code>.</p>
<p><code class="docutils literal"><span class="pre">h</span></code> Specifies that a following <code class="docutils literal"><span class="pre">d,</span> <span class="pre">i,</span> <span class="pre">o,</span> <span class="pre">u,</span> <span class="pre">x,</span> <span class="pre">X</span></code> or <code class="docutils literal"><span class="pre">n</span></code> conversion specifier applies
to an argument with type pointer to <code class="docutils literal"><span class="pre">short</span> <span class="pre">int</span></code> or <code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">short</span>
<span class="pre">int</span></code>.</p>
<p><code class="docutils literal"><span class="pre">l</span> <span class="pre">(ell)</span></code> Specifies that a following <code class="docutils literal"><span class="pre">d,</span> <span class="pre">i,</span> <span class="pre">o,</span> <span class="pre">u,</span> <span class="pre">x,</span> <span class="pre">X</span></code> or <code class="docutils literal"><span class="pre">n</span></code> conversion specifier applies
to an argument with type pointer to <code class="docutils literal"><span class="pre">long</span> <span class="pre">int</span></code> or <code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">long</span>
<span class="pre">int</span></code>; that a following <code class="docutils literal"><span class="pre">a,</span> <span class="pre">A,</span> <span class="pre">e,</span> <span class="pre">E,</span> <span class="pre">f,</span> <span class="pre">F,</span> <span class="pre">g</span></code> or <code class="docutils literal"><span class="pre">G</span></code> conversion specifier applies to
an argument with type pointer to <code class="docutils literal"><span class="pre">double</span></code>; or that a following <code class="docutils literal"><span class="pre">c,</span> <span class="pre">s``or</span> <span class="pre">``[</span></code>
conversion specifier applies to an argument with type pointer to <code class="docutils literal"><span class="pre">wchar_t</span></code>.</p>
<p><code class="docutils literal"><span class="pre">ll</span> <span class="pre">(ell-ell)</span></code> Specifies that a following <code class="docutils literal"><span class="pre">d,</span> <span class="pre">i,</span> <span class="pre">o,</span> <span class="pre">u,</span> <span class="pre">x,</span> <span class="pre">X</span></code> or <code class="docutils literal"><span class="pre">n</span></code> conversion specifier applies
to an argument with type pointer to <code class="docutils literal"><span class="pre">long</span> <span class="pre">long</span> <span class="pre">int</span></code> or <code class="docutils literal"><span class="pre">unsigned</span>
<span class="pre">long</span> <span class="pre">long</span> <span class="pre">int</span></code>.</p>
<p><code class="docutils literal"><span class="pre">j</span></code> Specifies that a following <code class="docutils literal"><span class="pre">d,</span> <span class="pre">i,</span> <span class="pre">o,</span> <span class="pre">u,</span> <span class="pre">x,</span> <span class="pre">X</span></code> or <code class="docutils literal"><span class="pre">n</span></code> conversion specifier applies
to an argument with type pointer to <code class="docutils literal"><span class="pre">intmax_t</span></code> or <code class="docutils literal"><span class="pre">uintmax_t</span></code>.</p>
<p><code class="docutils literal"><span class="pre">z</span></code> Specifies that a following <code class="docutils literal"><span class="pre">d,</span> <span class="pre">i,</span> <span class="pre">o,</span> <span class="pre">u,</span> <span class="pre">x,</span> <span class="pre">X</span></code> or <code class="docutils literal"><span class="pre">n</span></code> conversion specifier applies
to an argument with type pointer to <code class="docutils literal"><span class="pre">size_t</span></code> or the corresponding signed
integer type.</p>
<p><code class="docutils literal"><span class="pre">t</span></code> Specifies that a following <code class="docutils literal"><span class="pre">d,</span> <span class="pre">i,</span> <span class="pre">o,</span> <span class="pre">u,</span> <span class="pre">x,</span> <span class="pre">X</span></code> or <code class="docutils literal"><span class="pre">n</span></code> conversion specifier applies
to an argument with type pointer to <code class="docutils literal"><span class="pre">ptrdiff_t</span></code> or the corresponding
unsigned integer type.</p>
<p><code class="docutils literal"><span class="pre">L</span></code> Specifies that a following <code class="docutils literal"><span class="pre">a,</span> <span class="pre">A,</span> <span class="pre">e,</span> <span class="pre">E,</span> <span class="pre">f,</span> <span class="pre">F,</span> <span class="pre">g</span></code> or <code class="docutils literal"><span class="pre">G</span></code> conversion specifier
applies to an argument with type pointer to <code class="docutils literal"><span class="pre">long</span> <span class="pre">double</span></code>.</p>
<p>If a length modifier appears with any conversion specifier other than as specified above,
the behavior is undefined.</p>
<p>The conversion specifiers and their meanings are:</p>
<p><code class="docutils literal"><span class="pre">d</span></code> Matches an optionally signed decimal integer, whose format is the same as
expected for the subject sequence of the <code class="docutils literal"><span class="pre">wcstol</span></code> function with the value 10
for the base argument. The corresponding argument shall be a pointer to
signed integer.</p>
<p><code class="docutils literal"><span class="pre">i</span></code> Matches an optionally signed integer, whose format is the same as expected
for the subject sequence of the <code class="docutils literal"><span class="pre">wcstol</span></code> function with the value 0 for the
base argument. The corresponding argument shall be a pointer to signed
integer.</p>
<p><code class="docutils literal"><span class="pre">o</span></code> Matches an optionally signed octal integer, whose format is the same as
expected for the subject sequence of the <code class="docutils literal"><span class="pre">wcstoul</span></code> function with the value 8
for the <code class="docutils literal"><span class="pre">base</span></code> argument. The corresponding argument shall be a pointer to
unsigned integer.</p>
<p><code class="docutils literal"><span class="pre">u</span></code> Matches an optionally signed decimal integer, whose format is the same as
expected for the subject sequence of the <code class="docutils literal"><span class="pre">wcstoul</span></code> function with the value 10
for the <code class="docutils literal"><span class="pre">base</span></code> argument. The corresponding argument shall be a pointer to
unsigned integer.</p>
<p><code class="docutils literal"><span class="pre">x</span></code> Matches an optionally signed hexadecimal integer, whose format is the same
as expected for the subject sequence of the <code class="docutils literal"><span class="pre">wcstoul</span></code> function with the value
16 for the <code class="docutils literal"><span class="pre">base</span></code> argument. The corresponding argument shall be a pointer to
unsigned integer.</p>
<p><code class="docutils literal"><span class="pre">a,e,f,g</span></code> Matches an optionally signed floating-point number, infinity, or NaN, whose
format is the same as expected for the subject sequence of the <code class="docutils literal"><span class="pre">wcstod</span></code>
function. The corresponding argument shall be a pointer to floating.</p>
<p><code class="docutils literal"><span class="pre">c</span></code> Matches a sequence of wide characters of exactly the number specified by the
field width (1 if no field width is present in the directive).</p>
<p>If no <code class="docutils literal"><span class="pre">l</span></code> length modifier is present, characters from the input field are
converted as if by repeated calls to the <code class="docutils literal"><span class="pre">wcrtomb</span></code> function, with the
conversion state described by an <code class="docutils literal"><span class="pre">mbstate_t</span></code> object initialized to zero
before the first wide character is converted. The corresponding argument
shall be a pointer to the initial element of a character array large enough to
accept the sequence. No null character is added.</p>
<p>If an <code class="docutils literal"><span class="pre">l</span></code> length modifier is present, the corresponding argument shall be a
pointer to the initial element of an array of <code class="docutils literal"><span class="pre">wchar_t</span></code> large enough to accept
the sequence. No null wide character is added.</p>
<p><code class="docutils literal"><span class="pre">s</span></code> Matches a sequence of non-white-space wide characters.</p>
<p>If no <code class="docutils literal"><span class="pre">l</span></code> length modifier is present, characters from the input field are
converted as if by repeated calls to the <code class="docutils literal"><span class="pre">wcrtomb</span></code> function, with the
conversion state described by an <code class="docutils literal"><span class="pre">mbstate_t</span></code> object initialized to zero
before the first wide character is converted. The corresponding argument
shall be a pointer to the initial element of a character array large enough to
accept the sequence and a terminating null character, which will be added
automatically.</p>
<p>If an <code class="docutils literal"><span class="pre">l</span></code> length modifier is present, the corresponding argument shall be a
pointer to the initial element of an array of <code class="docutils literal"><span class="pre">wchar_t</span></code> large enough to accept
the sequence and the terminating null wide character, which will be added
automatically.</p>
<p><code class="docutils literal"><span class="pre">[</span></code> Matches a nonempty sequence of wide characters from a set of expected
characters (the <em>scanset</em>).</p>
<p>If no <code class="docutils literal"><span class="pre">l</span></code> length modifier is present, characters from the input field are
converted as if by repeated calls to the <code class="docutils literal"><span class="pre">wcrtomb</span></code> function, with the
conversion state described by an <code class="docutils literal"><span class="pre">mbstate_t</span></code> object initialized to zero
before the first wide character is converted. The corresponding argument
shall be a pointer to the initial element of a character array large enough to
accept the sequence and a terminating null character, which will be added
automatically.</p>
<p>If an <code class="docutils literal"><span class="pre">l</span></code> length modifier is present, the corresponding argument shall be a
pointer to the initial element of an array of <code class="docutils literal"><span class="pre">wchar_t</span></code> large enough to accept
the sequence and the terminating null wide character, which will be added
automatically.</p>
<p>The conversion specifier includes all subsequent wide characters in the
<code class="docutils literal"><span class="pre">format</span></code> string, up to and including the matching right bracket (<code class="docutils literal"><span class="pre">]</span></code>). The wide
characters between the brackets (the <em>scanlist</em>) compose the scanset, unless the
wide character after the left bracket is a circumflex (<code class="docutils literal"><span class="pre">^</span></code>), in which case the
scanset contains all wide characters that do not appear in the scanlist between
the circumflex and the right bracket. If the conversion specifier begins with
<code class="docutils literal"><span class="pre">[]</span></code> or <code class="docutils literal"><span class="pre">[^]</span></code>, the right bracket wide character is in the scanlist and the next
following right bracket wide character is the matching right bracket that ends
the specification; otherwise the first following right bracket wide character is
the one that ends the specification. If a - wide character is in the scanlist and
is not the first, nor the second where the first wide character is a <code class="docutils literal"><span class="pre">^</span></code>, nor the
last character, the behavior is implementation-defined.</p>
<p><code class="docutils literal"><span class="pre">p</span></code> Matches an implementation-defined set of sequences, which should be the
same as the set of sequences that may be produced by the <code class="docutils literal"><span class="pre">%p</span></code> conversion of
the <code class="docutils literal"><span class="pre">fwprintf</span></code> function. The corresponding argument shall be a pointer to a
pointer to void. The input item is converted to a pointer value in an
implementation-defined manner. If the input item is a value converted earlier
during the same program execution, the pointer that results shall compare
equal to that value; otherwise the behavior of the <code class="docutils literal"><span class="pre">%p</span></code> conversion is undefined.</p>
<p><code class="docutils literal"><span class="pre">n</span></code> No input is consumed. The corresponding argument shall be a pointer to
signed integer into which is to be written the number of wide characters read
from the input stream so far by this call to the <code class="docutils literal"><span class="pre">fwscanf</span></code> function. Execution
of a <code class="docutils literal"><span class="pre">%n</span></code> directive does not increment the assignment count returned at the
completion of execution of the <code class="docutils literal"><span class="pre">fwscanf</span></code> function. No argument is
converted, but one is consumed. If the conversion specification includes an
assignment-suppressing wide character or a field width, the behavior is
undefined.</p>
<p><code class="docutils literal"><span class="pre">%</span></code> Matches a single <code class="docutils literal"><span class="pre">%</span></code> wide character; no conversion or assignment occurs. The
complete conversion specification shall be <code class="docutils literal"><span class="pre">%%</span></code>.</p>
<p>If a conversion specification is invalid, the behavior is undefined.</p>
<p>The conversion specifiers <code class="docutils literal"><span class="pre">A,</span> <span class="pre">E,</span> <span class="pre">F,</span> <span class="pre">G</span></code> and <code class="docutils literal"><span class="pre">X</span></code> are also valid and behave the same as,
respectively, <code class="docutils literal"><span class="pre">a,</span> <span class="pre">e,</span> <span class="pre">f,</span> <span class="pre">g</span></code> and <code class="docutils literal"><span class="pre">x</span></code>.</p>
<p>Trailing white space (including new-line wide characters) is left unread unless matched
by a directive. The success of literal matches and suppressed assignments is not directly
determinable other than via the <code class="docutils literal"><span class="pre">%n</span></code> directive.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">fwscanf</span></code> function returns the value of the macro <code class="docutils literal"><span class="pre">EOF</span></code> if an input failure occurs
before any conversion. Otherwise, the function returns the number of input items
assigned, which can be fewer than provided for, or even zero, in the event of an early
matching failure.</p>
<p>17 EXAMPLE 1 The call:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;wchar.h&gt;</span>
<span class="cm">/* ... */</span>
<span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="n">i</span><span class="p">;</span> <span class="kt">float</span> <span class="n">x</span><span class="p">;</span> <span class="kt">wchar_t</span> <span class="n">name</span><span class="p">[</span><span class="mi">50</span><span class="p">];</span>
<span class="n">n</span> <span class="o">=</span> <span class="n">fwscanf</span><span class="p">(</span><span class="n">stdin</span><span class="p">,</span> <span class="s">L&quot;%d%f%ls&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">i</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">,</span> <span class="n">name</span><span class="p">);</span>
</pre></div>
</div>
<p>with the input line:</p>
<blockquote>
<div>25 54.32E-1 thompson</div></blockquote>
<p>will assign to <code class="docutils literal"><span class="pre">n</span></code> the value 3, to <code class="docutils literal"><span class="pre">i</span></code> the value 25, to <code class="docutils literal"><span class="pre">x</span></code> the value 5.432, and to name the sequence
<code class="docutils literal"><span class="pre">thompson\0</span></code>.</p>
<p>EXAMPLE 2 The call:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;wchar.h&gt;</span>
<span class="cm">/* ... */</span>
<span class="kt">int</span> <span class="n">i</span><span class="p">;</span> <span class="kt">float</span> <span class="n">x</span><span class="p">;</span> <span class="kt">double</span> <span class="n">y</span><span class="p">;</span>
<span class="n">fwscanf</span><span class="p">(</span><span class="n">stdin</span><span class="p">,</span> <span class="s">L&quot;%2d%f%*d %lf&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">i</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">y</span><span class="p">);</span>
</pre></div>
</div>
<p>with input:</p>
<blockquote>
<div>56789 0123 56a72</div></blockquote>
<p>will assign to <code class="docutils literal"><span class="pre">i</span></code> the value 56 and to <code class="docutils literal"><span class="pre">x</span></code> the value 789.0, will skip past 0123, and will assign to <code class="docutils literal"><span class="pre">y</span></code> the value
56.0. The next wide character read from the input stream will be <code class="docutils literal"><span class="pre">a</span></code>.</p>
<p><strong>Forward references:</strong> the <code class="docutils literal"><span class="pre">wcstod,</span> <span class="pre">wcstof</span></code> and <code class="docutils literal"><span class="pre">wcstold</span></code> functions (<a class="reference internal" href="#id39"><span>The wcstod, wcstof and wcstold functions</span></a>), the
<code class="docutils literal"><span class="pre">wcstol,</span> <span class="pre">wcstoll,</span> <span class="pre">wcstoul</span></code> and <code class="docutils literal"><span class="pre">wcstoull</span></code> functions (<a class="reference internal" href="#id46"><span>The wcstol, wcstoll, wcstoul and wcstoull functions</span></a>), the <code class="docutils literal"><span class="pre">wcrtomb</span></code>
function (<a class="reference internal" href="#id60"><span>The wcrtomb function</span></a>).</p>
<table class="docutils footnote" frame="void" id="id23" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id21">[10]</a></td><td>These white-space wide characters are not counted against a specified field width.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id24" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id22">[11]</a></td><td><code class="docutils literal"><span class="pre">fwscanf</span></code> pushes back at most one input wide character onto the input stream. Therefore, some
sequences that are acceptable to <code class="docutils literal"><span class="pre">wcstod,</span> <span class="pre">wcstol</span></code> etc., are unacceptable to <code class="docutils literal"><span class="pre">fwscanf</span></code>.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="the-swprintf-function">
<span id="index-6"></span><h3>38.2.3. The <code class="docutils literal"><span class="pre">swprintf</span></code> function<a class="headerlink" href="#the-swprintf-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">int</span> <span class="nf">swprintf</span><span class="p">(</span><span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">s</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">n</span><span class="p">,</span>
             <span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">format</span><span class="p">,</span> <span class="p">...);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">swprintf</span></code> function is equivalent to <code class="docutils literal"><span class="pre">fwprintf</span></code>, except that the argument <code class="docutils literal"><span class="pre">s</span></code>
specifies an array of wide characters into which the generated output is to be written,
rather than written to a stream. No more than <code class="docutils literal"><span class="pre">n</span></code> wide characters are written, including a
terminating null wide character, which is always added (unless <code class="docutils literal"><span class="pre">n</span></code> is zero).</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">swprintf</span></code> function returns the number of wide characters written in the array, not
counting the terminating null wide character, or a neg ative value if an encoding error
occurred or if <code class="docutils literal"><span class="pre">n</span></code> or more wide characters were requested to be written.</p>
</div>
<div class="section" id="the-swscanf-function">
<span id="index-7"></span><h3>38.2.4. The <code class="docutils literal"><span class="pre">swscanf</span></code> function<a class="headerlink" href="#the-swscanf-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">int</span> <span class="nf">swscanf</span><span class="p">(</span><span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">s</span><span class="p">,</span>
            <span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">format</span><span class="p">,</span> <span class="p">...);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">swscanf</span></code> function is equivalent to fwscanf, except that the argument <code class="docutils literal"><span class="pre">s</span></code> specifies a
wide string from which the input is to be obtained, rather than from a stream. Reaching
the end of the wide string is equivalent to encountering end-of-file for the <code class="docutils literal"><span class="pre">fwscanf</span></code>
function.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">swscanf</span></code> function returns the value of the macro <code class="docutils literal"><span class="pre">EOF</span></code> if an input failure occurs
before any conversion. Otherwise, the swscanf function returns the number of input
items assigned, which can be fewer than provided for, or even zero, in the event of an
early matching failure.</p>
</div>
<div class="section" id="the-vfwprintf-function">
<span id="index-8"></span><h3>38.2.5. The <code class="docutils literal"><span class="pre">vfwprintf</span></code> function<a class="headerlink" href="#the-vfwprintf-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdarg.h&gt;</span>
<span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">int</span> <span class="nf">vfwprintf</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">stream</span><span class="p">,</span>
              <span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">format</span><span class="p">,</span> <span class="kt">va_list</span> <span class="n">arg</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">vfwprintf</span></code> function is equivalent to <code class="docutils literal"><span class="pre">fwprintf</span></code>, with the variable argument list
replaced by <code class="docutils literal"><span class="pre">arg</span></code>, which shall have been initialized by the <code class="docutils literal"><span class="pre">va_start</span></code> macro (and
possibly subsequent <code class="docutils literal"><span class="pre">va_arg</span></code> calls). The vfwprintf function does not invoke the
<code class="docutils literal"><span class="pre">va_end</span></code> macro. <a class="footnote-reference" href="#id26" id="id25">[12]</a></p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">vfwprintf</span></code> function returns the number of wide characters transmitted, or a
negative value if an output or encoding error occurred.</p>
<p>EXAMPLE The following shows the use of the vfwprintf function in a general error-reporting
routine.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdarg.h&gt;</span>
<span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;wchar.h&gt;</span>

<span class="kt">void</span> <span class="nf">error</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">function_name</span><span class="p">,</span> <span class="kt">wchar_t</span> <span class="o">*</span><span class="n">format</span><span class="p">,</span> <span class="p">...)</span>
<span class="p">{</span>
  <span class="kt">va_list</span> <span class="n">args</span><span class="p">;</span>
  <span class="n">va_start</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">format</span><span class="p">);</span>
  <span class="c1">// print out name of function causing error</span>
  <span class="n">fwprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">L&quot;ERROR in %s: &quot;</span><span class="p">,</span> <span class="n">function_name</span><span class="p">);</span>
  <span class="c1">// print out remainder of message</span>
  <span class="n">vfwprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="n">format</span><span class="p">,</span> <span class="n">args</span><span class="p">);</span>
  <span class="n">va_end</span><span class="p">(</span><span class="n">args</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="docutils footnote" frame="void" id="id26" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id25">[12]</a></td><td>As the functions <code class="docutils literal"><span class="pre">vfwprintf,</span> <span class="pre">vswprintf,</span> <span class="pre">vfwscanf,</span> <span class="pre">vwprintf,</span> <span class="pre">vwscanf</span></code> and <code class="docutils literal"><span class="pre">vswscanf</span></code>
invoke the <code class="docutils literal"><span class="pre">va_arg</span></code> macro, the value of <code class="docutils literal"><span class="pre">arg</span></code> after the return is indeterminate.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="the-vfwscanf-function">
<span id="index-9"></span><h3>38.2.6. The <code class="docutils literal"><span class="pre">vfwscanf</span></code> function<a class="headerlink" href="#the-vfwscanf-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdarg.h&gt;</span>
<span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">int</span> <span class="nf">vfwscanf</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">stream</span><span class="p">,</span>
             <span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">format</span><span class="p">,</span> <span class="kt">va_list</span> <span class="n">arg</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">vfwscanf</span></code> function is equivalent to <code class="docutils literal"><span class="pre">fwscanf</span></code>, with the variable argument list
replaced by <code class="docutils literal"><span class="pre">arg</span></code>, which shall have been initialized by the <code class="docutils literal"><span class="pre">va_start</span></code> macro (and
possibly subsequent <code class="docutils literal"><span class="pre">va_arg</span></code> calls). The vfwscanf function does not invoke the
<code class="docutils literal"><span class="pre">va_end</span></code> macro. <a class="footnote-reference" href="#id43" id="id27">[15]</a></p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">vfwscanf</span></code> function returns the value of the macro <code class="docutils literal"><span class="pre">EOF</span></code> if an input failure occurs
before any conversion. Otherwise, the <code class="docutils literal"><span class="pre">vfwscanf</span></code> function returns the number of input
items assigned, which can be fewer than provided for, or even zero, in the event of an
early matching failure.</p>
</div>
<div class="section" id="the-vswprintf-function">
<span id="index-10"></span><h3>38.2.7. The <code class="docutils literal"><span class="pre">vswprintf</span></code> function<a class="headerlink" href="#the-vswprintf-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdarg.h&gt;</span>
<span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">int</span> <span class="nf">vswprintf</span><span class="p">(</span><span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">s</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">n</span><span class="p">,</span>
              <span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">format</span><span class="p">,</span> <span class="kt">va_list</span> <span class="n">arg</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">vswprintf</span></code> function is equivalent to <code class="docutils literal"><span class="pre">swprintf</span></code>, with the variable argument list
replaced by <code class="docutils literal"><span class="pre">arg</span></code>, which shall have been initialized by the <code class="docutils literal"><span class="pre">va_start</span></code> macro (and
possibly subsequent <code class="docutils literal"><span class="pre">va_arg</span></code> calls). The <code class="docutils literal"><span class="pre">vswprintf</span></code> function does not invoke the
<code class="docutils literal"><span class="pre">va_end</span></code> macro. <a class="footnote-reference" href="#id43" id="id28">[15]</a></p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">vswprintf</span></code> function returns the number of wide characters written in the array, not
counting the terminating null wide character, or a neg ative value if an encoding error
occurred or if <code class="docutils literal"><span class="pre">n</span></code> or more wide characters were requested to be generated.</p>
</div>
<div class="section" id="the-vswscanf-function">
<span id="index-11"></span><h3>38.2.8. The <code class="docutils literal"><span class="pre">vswscanf</span></code> function<a class="headerlink" href="#the-vswscanf-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdarg.h&gt;</span>
<span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">int</span> <span class="nf">vswscanf</span><span class="p">(</span><span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">s</span><span class="p">,</span>
             <span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">format</span><span class="p">,</span> <span class="kt">va_list</span> <span class="n">arg</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">vswscanf</span></code> function is equivalent to <code class="docutils literal"><span class="pre">swscanf</span></code>, with the variable argument list
replaced by <code class="docutils literal"><span class="pre">arg</span></code>, which shall have been initialized by the <code class="docutils literal"><span class="pre">va_start</span></code> macro (and
possibly subsequent <code class="docutils literal"><span class="pre">va_arg</span></code> calls). The vswscanf function does not invoke the
<code class="docutils literal"><span class="pre">va_end</span></code> macro. <a class="footnote-reference" href="#id43" id="id29">[15]</a></p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">vswscanf</span></code> function returns the value of the macro <code class="docutils literal"><span class="pre">EOF</span></code> if an input failure occurs
before any conversion. Otherwise, the <code class="docutils literal"><span class="pre">vswscanf</span></code> function returns the number of input
items assigned, which can be fewer than provided for, or even zero, in the event of an
early matching failure.</p>
</div>
<div class="section" id="the-vwprintf-function">
<span id="index-12"></span><h3>38.2.9. The <code class="docutils literal"><span class="pre">vwprintf</span></code> function<a class="headerlink" href="#the-vwprintf-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdarg.h&gt;</span>
<span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">int</span> <span class="nf">vwprintf</span><span class="p">(</span><span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">format</span><span class="p">,</span> <span class="kt">va_list</span> <span class="n">arg</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">vwprintf</span></code> function is equivalent to <code class="docutils literal"><span class="pre">wprintf</span></code>, with the variable argument list
replaced by <code class="docutils literal"><span class="pre">arg</span></code>, which shall have been initialized by the <code class="docutils literal"><span class="pre">va_start</span></code> macro (and
possibly subsequent <code class="docutils literal"><span class="pre">va_arg</span></code> calls). The vwprintf function does not invoke the
<code class="docutils literal"><span class="pre">va_end</span></code> macro. <a class="footnote-reference" href="#id43" id="id30">[15]</a></p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">vwprintf</span></code> function returns the number of wide characters transmitted, or a negative
value if an output or encoding error occurred.</p>
</div>
<div class="section" id="the-vwscanf-function">
<span id="index-13"></span><h3>38.2.10. The <code class="docutils literal"><span class="pre">vwscanf</span></code> function<a class="headerlink" href="#the-vwscanf-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdarg.h&gt;</span>
<span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">int</span> <span class="nf">vwscanf</span><span class="p">(</span><span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">format</span><span class="p">,</span> <span class="kt">va_list</span> <span class="n">arg</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">vwscanf</span></code> function is equivalent to <code class="docutils literal"><span class="pre">wscanf</span></code>, with the variable argument list
replaced by <code class="docutils literal"><span class="pre">arg</span></code>, which shall have been initialized by the <code class="docutils literal"><span class="pre">va_start</span></code> macro (and
possibly subsequent <code class="docutils literal"><span class="pre">va_arg</span></code> calls). The <code class="docutils literal"><span class="pre">vwscanf</span></code> function does not invoke the
<code class="docutils literal"><span class="pre">va_end</span></code> macro. <a class="footnote-reference" href="#id43" id="id31">[15]</a></p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">vwscanf</span></code> function returns the value of the macro <code class="docutils literal"><span class="pre">EOF</span></code> if an input failure occurs
before any conversion. Otherwise, the <code class="docutils literal"><span class="pre">vwscanf</span></code> function returns the number of input
items assigned, which can be fewer than provided for, or even zero, in the event of an
early matching failure.</p>
</div>
<div class="section" id="the-wprintf-function">
<span id="index-14"></span><h3>38.2.11. The <code class="docutils literal"><span class="pre">wprintf</span></code> function<a class="headerlink" href="#the-wprintf-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">int</span> <span class="nf">wprintf</span><span class="p">(</span><span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">format</span><span class="p">,</span> <span class="p">...);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">wprintf</span></code> function is equivalent to <code class="docutils literal"><span class="pre">fwprintf</span></code> with the argument <code class="docutils literal"><span class="pre">stdout</span></code>
interposed before the arguments to <code class="docutils literal"><span class="pre">wprintf</span></code>.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">wprintf</span></code> function returns the number of wide characters transmitted, or a negative
value if an output or encoding error occurred.</p>
</div>
<div class="section" id="the-wscanf-function">
<span id="index-15"></span><h3>38.2.12. The <code class="docutils literal"><span class="pre">wscanf</span></code> function<a class="headerlink" href="#the-wscanf-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">int</span> <span class="nf">wscanf</span><span class="p">(</span><span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">format</span><span class="p">,</span> <span class="p">...);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">wscanf</span></code> function is equivalent to <code class="docutils literal"><span class="pre">fwscanf</span></code> with the argument <code class="docutils literal"><span class="pre">stdin</span></code> interposed
before the arguments to <code class="docutils literal"><span class="pre">wscanf</span></code>.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">wscanf</span></code> function returns the value of the macro <code class="docutils literal"><span class="pre">EOF</span></code> if an input failure occurs
before any conversion. Otherwise, the <code class="docutils literal"><span class="pre">wscanf</span></code> function returns the number of input
items assigned, which can be fewer than provided for, or even zero, in the event of an
early matching failure.</p>
</div>
</div>
<div class="section" id="wide-character-input-output-functions">
<span id="index-16"></span><h2>38.3. Wide character input/output functions<a class="headerlink" href="#wide-character-input-output-functions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="the-fgetwc-function">
<span id="id32"></span><span id="index-17"></span><h3>38.3.1. The <code class="docutils literal"><span class="pre">fgetwc</span></code> function<a class="headerlink" href="#the-fgetwc-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">wint_t</span> <span class="nf">fgetwc</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span><span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>If the end-of-file indicator for the input stream pointed to by <code class="docutils literal"><span class="pre">stream</span></code> is not set and a
next wide character is present, the <code class="docutils literal"><span class="pre">fgetwc</span></code> function obtains that wide character as a
<code class="docutils literal"><span class="pre">wchar_t</span></code> converted to a <code class="docutils literal"><span class="pre">wint_t</span></code> and advances the associated file position indicator for
the <code class="docutils literal"><span class="pre">stream</span></code> (if defined).</p>
<p><strong>Returns</strong></p>
<p>If the end-of-file indicator for the <code class="docutils literal"><span class="pre">stream</span></code> is set, or if the <code class="docutils literal"><span class="pre">stream</span></code> is at end-of-file, the
end-of-file indicator for the <code class="docutils literal"><span class="pre">stream</span></code> is set and the <code class="docutils literal"><span class="pre">fgetwc</span></code> function returns <code class="docutils literal"><span class="pre">WEOF</span></code>. Otherwise,
the <code class="docutils literal"><span class="pre">fgetwc</span></code> function returns the next wide character from the input stream pointed to by
stream. If a read error occurs, the error indicator for the stream is set and the <code class="docutils literal"><span class="pre">fgetwc</span></code>
function returns <code class="docutils literal"><span class="pre">WEOF</span></code>. If an encoding error occurs (including too few bytes), the value of
the macro <code class="docutils literal"><span class="pre">EILSEQ</span></code> is stored in errno and the fgetwc function returns <code class="docutils literal"><span class="pre">WEOF</span></code>. <a class="footnote-reference" href="#id34" id="id33">[13]</a></p>
<table class="docutils footnote" frame="void" id="id34" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id33">[13]</a></td><td>An end-of-file and a read error can be distinguished by use of the <code class="docutils literal"><span class="pre">feof</span></code> and <code class="docutils literal"><span class="pre">ferror</span></code> functions.
Also, <code class="docutils literal"><span class="pre">errno</span></code> will be set to <code class="docutils literal"><span class="pre">EILSEQ</span></code> by input/output functions only if an encoding error occurs.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="the-fgetws-function">
<span id="index-18"></span><h3>38.3.2. The <code class="docutils literal"><span class="pre">fgetws</span></code> function<a class="headerlink" href="#the-fgetws-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">wchar_t</span> <span class="o">*</span><span class="nf">fgetws</span><span class="p">(</span><span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">s</span><span class="p">,</span>
                <span class="kt">int</span> <span class="n">n</span><span class="p">,</span> <span class="kt">FILE</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">fgetws</span></code> function reads at most one less than the number of wide characters
specified by <code class="docutils literal"><span class="pre">n</span></code> from the stream pointed to by <code class="docutils literal"><span class="pre">stream</span></code> into the array pointed to by <code class="docutils literal"><span class="pre">s</span></code>. No
additional wide characters are read after a new-line wide character (which is retained) or
after end-of-file. A null wide character is written immediately after the last wide
character read into the array.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">fgetws</span></code> function returns s if successful. If end-of-file is encountered and no
characters have been read into the array, the contents of the array remain unchanged and a
null pointer is returned. If a read or encoding error occurs during the operation, the array
contents are indeterminate and a null pointer is returned.</p>
</div>
<div class="section" id="the-fputwc-function">
<span id="id35"></span><span id="index-19"></span><h3>38.3.3. The <code class="docutils literal"><span class="pre">fputwc</span></code> function<a class="headerlink" href="#the-fputwc-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">wint_t</span> <span class="nf">fputwc</span><span class="p">(</span><span class="kt">wchar_t</span> <span class="n">c</span><span class="p">,</span> <span class="kt">FILE</span> <span class="o">*</span><span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">fputwc</span></code> function writes the wide character specified by <code class="docutils literal"><span class="pre">c</span></code> to the output stream
pointed to by <code class="docutils literal"><span class="pre">stream</span></code>, at the position indicated by the associated file position indicator
for the stream (if defined), and advances the indicator appropriately. If the file cannot
support positioning requests, or if the stream was opened with append mode, the
character is appended to the output stream.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">fputwc</span></code> function returns the wide character written. If a write error occurs, the
error indicator for the stream is set and <code class="docutils literal"><span class="pre">fputwc</span></code> returns <code class="docutils literal"><span class="pre">WEOF</span></code>. If an encoding error
occurs, the value of the macro <code class="docutils literal"><span class="pre">EILSEQ</span></code> is stored in errno and fputwc returns <code class="docutils literal"><span class="pre">WEOF</span></code>.</p>
</div>
<div class="section" id="the-fputws-function">
<span id="index-20"></span><h3>38.3.4. The <code class="docutils literal"><span class="pre">fputws</span></code> function<a class="headerlink" href="#the-fputws-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">int</span> <span class="nf">fputws</span><span class="p">(</span><span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">s</span><span class="p">,</span>
           <span class="kt">FILE</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">fputws</span></code> function writes the wide string pointed to by <code class="docutils literal"><span class="pre">s</span></code> to the stream pointed to by
<code class="docutils literal"><span class="pre">stream</span></code>. The terminating null wide character is not written.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">fputws</span></code> function returns <code class="docutils literal"><span class="pre">EOF</span></code> if a write or encoding error occurs; otherwise, it
returns a nonnegative value.</p>
</div>
<div class="section" id="the-fwide-function">
<span id="id36"></span><span id="index-21"></span><h3>38.3.5. The <code class="docutils literal"><span class="pre">fwide</span></code> function<a class="headerlink" href="#the-fwide-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">int</span> <span class="nf">fwide</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span><span class="n">stream</span><span class="p">,</span> <span class="kt">int</span> <span class="n">mode</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">fwide</span></code> function determines the orientation of the stream pointed to by <code class="docutils literal"><span class="pre">stream</span></code>. If
<code class="docutils literal"><span class="pre">mode</span></code> is greater than zero, the function first attempts to make the stream wide oriented. If
<code class="docutils literal"><span class="pre">mode</span></code> is less than zero, the function first attempts to make the stream byte oriented. <a class="footnote-reference" href="#id38" id="id37">[14]</a>
Otherwise, <code class="docutils literal"><span class="pre">mode</span></code> is zero and the function does not alter the orientation of the stream.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">fwide</span></code> function returns a value greater than zero if, after the call, the stream has
wide orientation, a value less than zero if the stream has byte orientation, or zero if the
stream has no orientation.</p>
<table class="docutils footnote" frame="void" id="id38" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id37">[14]</a></td><td>If the orientation of the stream has already been determined, <code class="docutils literal"><span class="pre">fwide</span></code> does not change it.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="the-getwc-function">
<span id="index-22"></span><h3>38.3.6. The <code class="docutils literal"><span class="pre">getwc</span></code> function<a class="headerlink" href="#the-getwc-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">wint_t</span> <span class="nf">getwc</span><span class="p">(</span><span class="kt">FILE</span> <span class="o">*</span><span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">getwc</span></code> function is equivalent to <code class="docutils literal"><span class="pre">fgetwc</span></code>, except that if it is implemented as a
macro, it may evaluate <code class="docutils literal"><span class="pre">stream</span></code> more than once, so the argument should never be an
expression with side effects.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">getwc</span></code> function returns the next wide character from the input stream pointed to by
<code class="docutils literal"><span class="pre">stream</span></code>, or <code class="docutils literal"><span class="pre">WEOF</span></code>.</p>
</div>
<div class="section" id="the-getwchar-function">
<span id="index-23"></span><h3>38.3.7. The <code class="docutils literal"><span class="pre">getwchar</span></code> function<a class="headerlink" href="#the-getwchar-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">wint_t</span> <span class="nf">getwchar</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">getwchar</span></code> function is equivalent to <code class="docutils literal"><span class="pre">getwc</span></code> with the argument <code class="docutils literal"><span class="pre">stdin</span></code>.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">getwchar</span></code> function returns the next wide character from the input stream pointed to
by <code class="docutils literal"><span class="pre">stdin</span></code>, or <code class="docutils literal"><span class="pre">WEOF</span></code>.</p>
</div>
<div class="section" id="the-putwc-function">
<span id="index-24"></span><h3>38.3.8. The <code class="docutils literal"><span class="pre">putwc</span></code> function<a class="headerlink" href="#the-putwc-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">wint_t</span> <span class="nf">putwc</span><span class="p">(</span><span class="kt">wchar_t</span> <span class="n">c</span><span class="p">,</span> <span class="kt">FILE</span> <span class="o">*</span><span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">putwc</span></code> function is equivalent to <code class="docutils literal"><span class="pre">fputwc</span></code>, except that if it is implemented as a
macro, it may evaluate <code class="docutils literal"><span class="pre">stream</span></code> more than once, so that argument should never be an
expression with side effects.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">putwc</span></code> function returns the wide character written, or <code class="docutils literal"><span class="pre">WEOF</span></code>.</p>
</div>
<div class="section" id="the-putwchar-function">
<span id="index-25"></span><h3>38.3.9. The <code class="docutils literal"><span class="pre">putwchar</span></code> function<a class="headerlink" href="#the-putwchar-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">wint_t</span> <span class="nf">putwchar</span><span class="p">(</span><span class="kt">wchar_t</span> <span class="n">c</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">putwchar</span></code> function is equivalent to <code class="docutils literal"><span class="pre">putwc</span></code> with the second argument <code class="docutils literal"><span class="pre">stdout</span></code>.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">putwchar</span></code> function returns the character written, or <code class="docutils literal"><span class="pre">WEOF</span></code>.</p>
</div>
<div class="section" id="the-ungetwc-function">
<span id="index-26"></span><h3>38.3.10. The <code class="docutils literal"><span class="pre">ungetwc</span></code> function<a class="headerlink" href="#the-ungetwc-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">wint_t</span> <span class="nf">ungetwc</span><span class="p">(</span><span class="kt">wint_t</span> <span class="n">c</span><span class="p">,</span> <span class="kt">FILE</span> <span class="o">*</span><span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">ungetwc</span></code> function pushes the wide character specified by <code class="docutils literal"><span class="pre">c</span></code> back onto the input
stream pointed to by <code class="docutils literal"><span class="pre">stream</span></code>. Pushed-back wide characters will be returned by
subsequent reads on that <code class="docutils literal"><span class="pre">stream</span></code> in the reverse order of their pushing. A successful
intervening call (with the stream pointed to by <code class="docutils literal"><span class="pre">stream</span></code>) to a file positioning function
(<code class="docutils literal"><span class="pre">fseek,</span> <span class="pre">fsetpos</span></code>, or <code class="docutils literal"><span class="pre">rewind</span></code>) discards any pushed-back wide characters for the
<code class="docutils literal"><span class="pre">stream</span></code>. The external storage corresponding to the <code class="docutils literal"><span class="pre">stream</span></code> is unchanged.</p>
<p>One wide character of pushback is guaranteed, even if the call to the <code class="docutils literal"><span class="pre">ungetwc</span></code> function
follows just after a call to a formatted wide character input function <code class="docutils literal"><span class="pre">fwscanf,</span>
<span class="pre">vfwscanf,</span> <span class="pre">vwscanf</span></code>, or <code class="docutils literal"><span class="pre">wscanf</span></code>. If the <code class="docutils literal"><span class="pre">ungetwc</span></code> function is called too many times
on the same stream without an intervening read or file positioning operation on that
stream, the operation may fail.</p>
<p>If the value of <code class="docutils literal"><span class="pre">c</span></code> equals that of the macro <code class="docutils literal"><span class="pre">WEOF</span></code>, the operation fails and the input stream is
unchanged.</p>
<p>A successful call to the <code class="docutils literal"><span class="pre">ungetwc</span></code> function clears the end-of-file indicator for the stream.
The value of the file position indicator for the stream after reading or discarding all
pushed-back wide characters is the same as it was before the wide characters were pushed
back. For a text or binary stream, the value of its file position indicator after a successful
call to the <code class="docutils literal"><span class="pre">ungetwc</span></code> function is unspecified until all pushed-back wide characters are
read or discarded.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">ungetwc</span></code> function returns the wide character pushed back, or <code class="docutils literal"><span class="pre">WEOF</span></code> if the operation
fails.</p>
</div>
</div>
<div class="section" id="general-wide-string-utilities">
<span id="index-27"></span><h2>38.4. General wide string utilities<a class="headerlink" href="#general-wide-string-utilities" title="Permalink to this headline">¶</a></h2>
<p>The header <code class="docutils literal"><span class="pre">&lt;wchar.h&gt;</span></code> declares a number of functions useful for wide string
manipulation. Various methods are used for determining the lengths of the arrays, but in
all cases a <code class="docutils literal"><span class="pre">wchar_t</span> <span class="pre">*</span></code> argument points to the initial (lowest addressed) element of the
array. If an array is accessed beyond the end of an object, the behavior is undefined.</p>
<p>Where an argument declared as <code class="docutils literal"><span class="pre">size_t</span> <span class="pre">n</span></code> determines the length of the array for a
function, <code class="docutils literal"><span class="pre">n</span></code> can have the value zero on a call to that function. Unless explicitly stated
otherwise in the description of a particular function in this subclause, pointer arguments
on such a call shall still have valid values, as described in <a class="reference internal" href="../std/#id11"><span>Use of Library Functions</span></a>. On such a call, a
function that locates a wide character finds no occurrence, a function that compares two
wide character sequences returns zero, and a function that copies wide characters copies
zero wide characters.</p>
<div class="section" id="wide-string-numeric-conversion-functions">
<span id="index-28"></span><h3>38.4.1. Wide string numeric conversion functions<a class="headerlink" href="#wide-string-numeric-conversion-functions" title="Permalink to this headline">¶</a></h3>
<div class="section" id="the-wcstod-wcstof-and-wcstold-functions">
<span id="id39"></span><span id="index-29"></span><h4>38.4.1.1. The <code class="docutils literal"><span class="pre">wcstod,</span> <span class="pre">wcstof</span></code> and <code class="docutils literal"><span class="pre">wcstold</span></code> functions<a class="headerlink" href="#the-wcstod-wcstof-and-wcstold-functions" title="Permalink to this headline">¶</a></h4>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">double</span> <span class="nf">wcstod</span><span class="p">(</span><span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">nptr</span><span class="p">,</span>
              <span class="kt">wchar_t</span> <span class="o">**</span> <span class="kr">restrict</span> <span class="n">endptr</span><span class="p">);</span>
<span class="kt">float</span> <span class="nf">wcstof</span><span class="p">(</span><span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">nptr</span><span class="p">,</span>
             <span class="kt">wchar_t</span> <span class="o">**</span> <span class="kr">restrict</span> <span class="n">endptr</span><span class="p">);</span>
<span class="kt">long</span> <span class="kt">double</span> <span class="nf">wcstold</span><span class="p">(</span><span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">nptr</span><span class="p">,</span>
             <span class="kt">wchar_t</span> <span class="o">**</span> <span class="kr">restrict</span> <span class="n">endptr</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcstod,</span> <span class="pre">wcstof</span></code> and <code class="docutils literal"><span class="pre">wcstold</span></code> functions convert the initial portion of the wide
string pointed to by <code class="docutils literal"><span class="pre">nptr</span></code> to <code class="docutils literal"><span class="pre">double,</span> <span class="pre">float</span></code> and <code class="docutils literal"><span class="pre">long</span> <span class="pre">double</span></code> representation,
respectively. First, they decompose the input string into three parts: an initial, possibly
empty, sequence of white-space wide characters (as specified by the <code class="docutils literal"><span class="pre">iswspace</span></code>
function), a subject sequence resembling a floating-point constant or representing an
infinity or NaN; and a final wide string of one or more unrecognized wide characters,
including the terminating null wide character of the input wide string. Then, they attempt
to convert the subject sequence to a floating-point number, and return the result.</p>
<p>The expected form of the subject sequence is an optional plus or minus sign, then one of
the following:</p>
<ul class="simple">
<li>a nonempty sequence of decimal digits optionally containing a decimal-point wide
character, then an optional exponent part as defined for the corresponding single-byte
characters in <a class="reference internal" href="../lang/#id110"><span>Floating Constants</span></a>;</li>
<li>a <strong>0x</strong> or <strong>0X</strong>, then a nonempty sequence of hexadecimal digits optionally containing a
decimal-point wide character, then an optional binary exponent part as defined in
<a class="reference internal" href="../lang/#id110"><span>Floating Constants</span></a>;</li>
<li><strong>INF</strong> or <strong>INFINITY</strong>, or any other wide string equivalent except for case</li>
<li><strong>NAN</strong> or <strong>NAN</strong> (<span class="math">\(n-wchar-sequence_{opt}\)</span>), or any other wide string equivalent except for
case in the NAN part</li>
</ul>
<p>The subject sequence is defined as the longest initial subsequence of the input wide
string, starting with the first non-white-space wide character, that is of the expected form.
The subject sequence contains no wide characters if the input wide string is not of the
expected form.</p>
<p>If the subject sequence has the expected form for a floating-point number, the sequence of
wide characters starting with the first digit or the decimal-point wide character
(whichever occurs first) is interpreted as a floating constant according to the rules of
<a class="reference internal" href="../lang/#id110"><span>Floating Constants</span></a>, except that the decimal-point wide character is used in place of a period, and that
if neither an exponent part nor a decimal-point wide character appears in a decimal
floating point number, or if a binary exponent part does not appear in a hexadecimal
floating point number, an exponent part of the appropriate type with value zero is
assumed to follow the last digit in the string. If the subject sequence begins with a minus
sign, the sequence is interpreted as negated. <a class="footnote-reference" href="#id43" id="id40">[15]</a> A wide character sequence INF or
<strong>INFINITY</strong> is interpreted as an infinity, if representable in the return type, else like a
floating constant that is too large for the range of the return type. A wide character
sequence <strong>NAN</strong> or <strong>NAN</strong> (<span class="math">\(n-wchar-sequence_{opt}\)</span>) is interpreted as a quiet NaN, if supported
in the return type, else like a subject sequence part that does not have the expected form;
the meaning of the n-wchar sequences is implementation-defined. <a class="footnote-reference" href="#id44" id="id41">[16]</a> A pointer to the
final wide string is stored in the object pointed to by <code class="docutils literal"><span class="pre">endptr</span></code>, provided that <code class="docutils literal"><span class="pre">endptr</span></code> is
not a null pointer.</p>
<p>If the subject sequence has the hexadecimal form and <code class="docutils literal"><span class="pre">FLT_RADIX</span></code> is a power of 2, the
value resulting from the conversion is correctly rounded.</p>
<p>In other than the &#8220;C&#8221; locale, additional locale-specific subject sequence forms may be
accepted.</p>
<p>If the subject sequence is empty or does not have the expected form, no conversion is
performed; the value of <code class="docutils literal"><span class="pre">nptr</span></code> is stored in the object pointed to by <code class="docutils literal"><span class="pre">endptr</span></code>, provided
that <code class="docutils literal"><span class="pre">endptr</span></code> is not a null pointer.</p>
<p><strong>Recommended practice</strong></p>
<p>If the subject sequence has the hexadecimal form, <code class="docutils literal"><span class="pre">FLT_RADIX</span></code> is not a power of 2, and
the result is not exactly representable, the result should be one of the two numbers in the
appropriate internal format that are adjacent to the hexadecimal floating source value,
with the extra stipulation that the error should have a correct sign for the current rounding
direction.</p>
<p>If the subject sequence has the decimal form and at most <code class="docutils literal"><span class="pre">DECIMAL_DIG</span></code> (defined in
<code class="docutils literal"><span class="pre">&lt;float.h&gt;</span></code>) significant digits, the result should be correctly rounded. If the subject
sequence <code class="docutils literal"><span class="pre">D</span></code> has the decimal form and more than <code class="docutils literal"><span class="pre">DECIMAL_DIG</span></code> significant digits,
consider the two bounding, adjacent decimal strings <code class="docutils literal"><span class="pre">L</span></code> and <code class="docutils literal"><span class="pre">U</span></code>, both having
<code class="docutils literal"><span class="pre">DECIMAL_DIG</span></code> significant digits, such that the values of <code class="docutils literal"><span class="pre">L,</span> <span class="pre">D</span></code> and <code class="docutils literal"><span class="pre">U</span></code> satisfy
<span class="math">\(L \le~D \le~U\)</span>.
The result should be one of the (equal or adjacent) values that would be obtained by
correctly rounding <code class="docutils literal"><span class="pre">L</span></code> and <code class="docutils literal"><span class="pre">U</span></code> according to the current rounding direction, with the extra
stipulation that the error with respect to D should have a correct sign for the current
rounding direction. <a class="footnote-reference" href="#id45" id="id42">[17]</a></p>
<p><strong>Returns</strong></p>
<p>The functions return the converted value, if any. If no conversion could be performed,
zero is returned. If the correct value is outside the range of representable values, plus or
minus <code class="docutils literal"><span class="pre">HUGE_VAL,</span> <span class="pre">HUGE_VALF</span></code> or <code class="docutils literal"><span class="pre">HUGE_VALL</span></code> is returned (according to the return
type and sign of the value), and the value of the macro <code class="docutils literal"><span class="pre">ERANGE</span></code> is stored in <code class="docutils literal"><span class="pre">errno</span></code>. If
the result underflows (<a class="reference internal" href="../math/#id11"><span>Treatment of error conditions</span></a>), the functions return a value whose magnitude is no greater
than the smallest normalized positive number in the return type; whether errno acquires
the value <code class="docutils literal"><span class="pre">ERANGE</span></code> is implementation-defined.</p>
<table class="docutils footnote" frame="void" id="id43" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id40">[15]</a></td><td>It is unspecified whether a minus-signed sequence is converted to a negative number directly or by
negating the value resulting from converting the corresponding unsigned sequence (see F.5); the two
methods may yield different results if rounding is toward positive or neg ative infinity. In either case,
the functions honor the sign of zero if floating-point arithmetic supports signed zeros.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id44" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id41">[16]</a></td><td>An implementation may use the n-wchar sequence to determine extra information to be represented in
the NaN&#8217;s significand.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id45" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id42">[17]</a></td><td><code class="docutils literal"><span class="pre">DECIMAL_DIG</span></code>, defined in <code class="docutils literal"><span class="pre">&lt;float.h&gt;</span></code>, should be sufficiently large that <code class="docutils literal"><span class="pre">L</span></code> and <code class="docutils literal"><span class="pre">U</span></code> will usually round
to the same internal floating value, but if not will round to adjacent values.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="the-wcstol-wcstoll-wcstoul-and-wcstoull-functions">
<span id="id46"></span><span id="index-30"></span><h4>38.4.1.2. The <code class="docutils literal"><span class="pre">wcstol,</span> <span class="pre">wcstoll,</span> <span class="pre">wcstoul</span></code> and <code class="docutils literal"><span class="pre">wcstoull</span></code> functions<a class="headerlink" href="#the-wcstol-wcstoll-wcstoul-and-wcstoull-functions" title="Permalink to this headline">¶</a></h4>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">long</span> <span class="kt">int</span> <span class="nf">wcstol</span><span class="p">(</span><span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">nptr</span><span class="p">,</span>
             <span class="kt">wchar_t</span> <span class="o">**</span> <span class="kr">restrict</span> <span class="n">endptr</span><span class="p">,</span>
             <span class="kt">int</span> <span class="n">base</span><span class="p">);</span>
<span class="kt">long</span> <span class="kt">long</span> <span class="kt">int</span> <span class="nf">wcstoll</span><span class="p">(</span><span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">nptr</span><span class="p">,</span>
             <span class="kt">wchar_t</span> <span class="o">**</span> <span class="kr">restrict</span> <span class="n">endptr</span><span class="p">,</span>
             <span class="kt">int</span> <span class="n">base</span><span class="p">);</span>
<span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">int</span> <span class="nf">wcstoul</span><span class="p">(</span><span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">nptr</span><span class="p">,</span>
             <span class="kt">wchar_t</span> <span class="o">**</span> <span class="kr">restrict</span> <span class="n">endptr</span><span class="p">,</span>
             <span class="kt">int</span> <span class="n">base</span><span class="p">);</span>
<span class="kt">unsigned</span> <span class="kt">long</span> <span class="kt">long</span> <span class="kt">int</span> <span class="nf">wcstoull</span><span class="p">(</span><span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">nptr</span><span class="p">,</span>
             <span class="kt">wchar_t</span> <span class="o">**</span> <span class="kr">restrict</span> <span class="n">endptr</span><span class="p">,</span>
             <span class="kt">int</span> <span class="n">base</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcstol,</span> <span class="pre">wcstoll,</span> <span class="pre">wcstoul</span></code> and <code class="docutils literal"><span class="pre">wcstoull</span></code> functions convert the initial
portion of the wide string pointed to by <code class="docutils literal"><span class="pre">nptr</span></code> to <code class="docutils literal"><span class="pre">long</span> <span class="pre">int,</span> <span class="pre">long</span> <span class="pre">long</span> <span class="pre">int,</span>
<span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">int</span></code> and <code class="docutils literal"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">long</span> <span class="pre">int</span></code> representation,
respectively. First, they decompose the input string into three parts: an initial, possibly
empty, sequence of white-space wide characters (as specified by the <code class="docutils literal"><span class="pre">iswspace</span></code>
function), a subject sequence resembling an integer represented in some radix determined
by the value of <code class="docutils literal"><span class="pre">base</span></code>, and a final wide string of one or more unrecognized wide
characters, including the terminating null wide character of the input wide string. Then,
they attempt to convert the subject sequence to an integer, and return the result.</p>
<p>If the value of base is zero, the expected form of the subject sequence is that of an
integer constant as described for the corresponding single-byte characters in <a class="reference internal" href="../lang/#id109"><span>Integer Constants</span></a>,
optionally preceded by a plus or minus sign, but not including an integer suffix. If the
value of <code class="docutils literal"><span class="pre">base</span></code> is between 2 and 36 (inclusive), the expected form of the subject sequence
is a sequence of letters and digits representing an integer with the radix specified by
<code class="docutils literal"><span class="pre">base</span></code>, optionally preceded by a plus or minus sign, but not including an integer suffix.
The letters from <strong>a</strong> (or <strong>A</strong>) through <strong>z</strong> (or <strong>Z</strong>) are ascribed the values 10 through 35; only
letters and digits whose ascribed values are less than that of <code class="docutils literal"><span class="pre">base</span></code> are permitted. If the
value of <code class="docutils literal"><span class="pre">base</span></code> is 16, the wide characters <strong>0x</strong> or <strong>0X</strong> may optionally precede the sequence
of letters and digits, following the sign if present.</p>
<p>The subject sequence is defined as the longest initial subsequence of the input wide
string, starting with the first non-white-space wide character, that is of the expected form.
The subject sequence contains no wide characters if the input wide string is empty or
consists entirely of white space, or if the first non-white-space wide character is other
than a sign or a permissible letter or digit.</p>
<p>If the subject sequence has the expected form and the value of <code class="docutils literal"><span class="pre">base</span></code> is zero, the sequence
of wide characters starting with the first digit is interpreted as an integer constant
according to the rules of <a class="reference internal" href="../lang/#id109"><span>Integer Constants</span></a>. If the subject sequence has the expected form and the
value of <code class="docutils literal"><span class="pre">base</span></code> is between 2 and 36, it is used as the base for conversion, ascribing to each
letter its value as given above. If the subject sequence begins with a minus sign, the value
resulting from the conversion is negated (in the return type). A pointer to the final wide
string is stored in the object pointed to by <code class="docutils literal"><span class="pre">endptr</span></code>, provided that <code class="docutils literal"><span class="pre">endptr</span></code> is not a null
pointer.</p>
<p>In other than the &#8220;C&#8221; locale, additional locale-specific subject sequence forms may be
accepted.</p>
<p>If the subject sequence is empty or does not have the expected form, no conversion is
performed; the value of <code class="docutils literal"><span class="pre">nptr</span></code> is stored in the object pointed to by <code class="docutils literal"><span class="pre">endptr</span></code>, provided
that <code class="docutils literal"><span class="pre">endptr</span></code> is not a null pointer.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcstol,</span> <span class="pre">wcstoll,</span> <span class="pre">wcstoul</span></code> and <code class="docutils literal"><span class="pre">wcstoull</span></code> functions return the converted
value, if any. If no conversion could be performed, zero is returned. If the correct value
is outside the range of representable values, <code class="docutils literal"><span class="pre">LONG_MIN,</span> <span class="pre">LONG_MAX,</span> <span class="pre">LLONG_MIN,</span>
<span class="pre">LLONG_MAX,</span> <span class="pre">ULONG_MAX</span></code> or <code class="docutils literal"><span class="pre">ULLONG_MAX</span></code> is returned (according to the return type
sign of the value, if any), and the value of the macro <code class="docutils literal"><span class="pre">ERANGE</span></code> is stored in <code class="docutils literal"><span class="pre">errno</span></code>.</p>
</div>
</div>
<div class="section" id="wide-string-copying-functions">
<span id="index-31"></span><h3>38.4.2. Wide string copying functions<a class="headerlink" href="#wide-string-copying-functions" title="Permalink to this headline">¶</a></h3>
<div class="section" id="the-wcscpy-function">
<span id="index-32"></span><h4>38.4.2.1. The <code class="docutils literal"><span class="pre">wcscpy</span></code> function<a class="headerlink" href="#the-wcscpy-function" title="Permalink to this headline">¶</a></h4>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">wchar_t</span> <span class="o">*</span><span class="nf">wcscpy</span><span class="p">(</span><span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">s1</span><span class="p">,</span>
             <span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">s2</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcscpy</span></code> function copies the wide string pointed to by <code class="docutils literal"><span class="pre">s2</span></code> (including the terminating
null wide character) into the array pointed to by <code class="docutils literal"><span class="pre">s1</span></code>.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcscpy</span></code> function returns the value of <code class="docutils literal"><span class="pre">s1</span></code>.</p>
</div>
<div class="section" id="the-wcsncpy-function">
<span id="index-33"></span><h4>38.4.2.2. The <code class="docutils literal"><span class="pre">wcsncpy</span></code> function<a class="headerlink" href="#the-wcsncpy-function" title="Permalink to this headline">¶</a></h4>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">wchar_t</span> <span class="o">*</span><span class="nf">wcsncpy</span><span class="p">(</span><span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">s1</span><span class="p">,</span>
             <span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">s2</span><span class="p">,</span>
             <span class="kt">size_t</span> <span class="n">n</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcsncpy</span></code> function copies not more than <code class="docutils literal"><span class="pre">n</span></code> wide characters (those that follow a null
wide character are not copied) from the array pointed to by <code class="docutils literal"><span class="pre">s2</span></code> to the array pointed to by
<code class="docutils literal"><span class="pre">s1</span></code>. <a class="footnote-reference" href="#id48" id="id47">[18]</a></p>
<p>If the array pointed to by <code class="docutils literal"><span class="pre">s2</span></code> is a wide string that is shorter than <code class="docutils literal"><span class="pre">n</span></code> wide characters, null
wide characters are appended to the copy in the array pointed to by <code class="docutils literal"><span class="pre">s1</span></code>, until <code class="docutils literal"><span class="pre">n</span></code> wide
characters in all have been written.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcsncpy</span></code> function returns the value of <code class="docutils literal"><span class="pre">s1</span></code>.</p>
<table class="docutils footnote" frame="void" id="id48" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id47">[18]</a></td><td>Thus, if there is no null wide character in the first <code class="docutils literal"><span class="pre">n</span></code> wide characters of the array pointed to by <code class="docutils literal"><span class="pre">s2</span></code>, the
result will not be null-terminated.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="the-wmemcpy-function">
<span id="index-34"></span><h4>38.4.2.3. The <code class="docutils literal"><span class="pre">wmemcpy</span></code> function<a class="headerlink" href="#the-wmemcpy-function" title="Permalink to this headline">¶</a></h4>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">wchar_t</span> <span class="o">*</span><span class="nf">wmemcpy</span><span class="p">(</span><span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">s1</span><span class="p">,</span>
             <span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">s2</span><span class="p">,</span>
             <span class="kt">size_t</span> <span class="n">n</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">wmemcpy</span></code> function copies <code class="docutils literal"><span class="pre">n</span></code> wide characters from the object pointed to by <code class="docutils literal"><span class="pre">s2</span></code> to the
object pointed to by <code class="docutils literal"><span class="pre">s1</span></code>.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">wmemcpy</span></code> function returns the value of <code class="docutils literal"><span class="pre">s1</span></code>.</p>
</div>
<div class="section" id="the-wmemmove-function">
<span id="index-35"></span><h4>38.4.2.4. The <code class="docutils literal"><span class="pre">wmemmove</span></code> function<a class="headerlink" href="#the-wmemmove-function" title="Permalink to this headline">¶</a></h4>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">wchar_t</span> <span class="o">*</span><span class="nf">wmemmove</span><span class="p">(</span><span class="kt">wchar_t</span> <span class="o">*</span><span class="n">s1</span><span class="p">,</span> <span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span><span class="n">s2</span><span class="p">,</span>
             <span class="kt">size_t</span> <span class="n">n</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">wmemmove</span></code> function copies n wide characters from the object pointed to by <code class="docutils literal"><span class="pre">s2</span></code> to
the object pointed to by <code class="docutils literal"><span class="pre">s1</span></code>. Copying takes place as if the <code class="docutils literal"><span class="pre">n</span></code> wide characters from the
object pointed to by <code class="docutils literal"><span class="pre">s2</span></code> are first copied into a temporary array of <code class="docutils literal"><span class="pre">n</span></code> wide characters that
does not overlap the objects pointed to by <code class="docutils literal"><span class="pre">s1</span></code> or <code class="docutils literal"><span class="pre">s2</span></code>, and then the <code class="docutils literal"><span class="pre">n</span></code> wide characters from
the temporary array are copied into the object pointed to by <code class="docutils literal"><span class="pre">s1</span></code>.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">wmemmove</span></code> function returns the value of <code class="docutils literal"><span class="pre">s1</span></code>.</p>
</div>
</div>
<div class="section" id="wide-string-concatenation-functions">
<span id="index-36"></span><h3>38.4.3. Wide string concatenation functions<a class="headerlink" href="#wide-string-concatenation-functions" title="Permalink to this headline">¶</a></h3>
<div class="section" id="the-wcscat-function">
<span id="index-37"></span><h4>38.4.3.1. The <code class="docutils literal"><span class="pre">wcscat</span></code> function<a class="headerlink" href="#the-wcscat-function" title="Permalink to this headline">¶</a></h4>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">wchar_t</span> <span class="o">*</span><span class="nf">wcscat</span><span class="p">(</span><span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">s1</span><span class="p">,</span>
             <span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">s2</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcscat</span></code> function appends a copy of the wide string pointed to by <code class="docutils literal"><span class="pre">s2</span></code> (including the
terminating null wide character) to the end of the wide string pointed to by <code class="docutils literal"><span class="pre">s1</span></code>. The initial
wide character of <code class="docutils literal"><span class="pre">s2</span></code> overwrites the null wide character at the end of <code class="docutils literal"><span class="pre">s1</span></code>.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcscat</span></code> function returns the value of <code class="docutils literal"><span class="pre">s1</span></code>.</p>
</div>
<div class="section" id="the-wcsncat-function">
<span id="index-38"></span><h4>38.4.3.2. The <code class="docutils literal"><span class="pre">wcsncat</span></code> function<a class="headerlink" href="#the-wcsncat-function" title="Permalink to this headline">¶</a></h4>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">wchar_t</span> <span class="o">*</span><span class="nf">wcsncat</span><span class="p">(</span><span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">s1</span><span class="p">,</span>
             <span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">s2</span><span class="p">,</span>
             <span class="kt">size_t</span> <span class="n">n</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcsncat</span></code> function appends not more than <code class="docutils literal"><span class="pre">n</span></code> wide characters (a null wide character
and those that follow it are not appended) from the array pointed to by <code class="docutils literal"><span class="pre">s2</span></code> to the end of
the wide string pointed to by <code class="docutils literal"><span class="pre">s1</span></code>. The initial wide character of <code class="docutils literal"><span class="pre">s2</span></code> overwrites the null
wide character at the end of <code class="docutils literal"><span class="pre">s1</span></code>. A terminating null wide character is always appended to
the result. <a class="footnote-reference" href="#id50" id="id49">[19]</a></p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcsncat</span></code> function returns the value of <code class="docutils literal"><span class="pre">s1</span></code>.</p>
<table class="docutils footnote" frame="void" id="id50" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id49">[19]</a></td><td>Thus, the maximum number of wide characters that can end up in the array pointed to by <code class="docutils literal"><span class="pre">s1</span></code> is
<code class="docutils literal"><span class="pre">wcslen(s1)+n+1</span></code>.</td></tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="wide-string-comparison-functions">
<span id="index-39"></span><h3>38.4.4. Wide string comparison functions<a class="headerlink" href="#wide-string-comparison-functions" title="Permalink to this headline">¶</a></h3>
<p>Unless explicitly stated otherwise, the functions described in this subclause order two
wide characters the same way as two integers of the underlying integer type designated
by <code class="docutils literal"><span class="pre">wchar_t</span></code>.</p>
<div class="section" id="the-wcscmp-function">
<span id="index-40"></span><h4>38.4.4.1. The <code class="docutils literal"><span class="pre">wcscmp</span></code> function<a class="headerlink" href="#the-wcscmp-function" title="Permalink to this headline">¶</a></h4>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">int</span> <span class="nf">wcscmp</span><span class="p">(</span><span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span><span class="n">s1</span><span class="p">,</span> <span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span><span class="n">s2</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcscmp</span></code> function compares the wide string pointed to by <code class="docutils literal"><span class="pre">s1</span></code> to the wide string
pointed to by <code class="docutils literal"><span class="pre">s2</span></code>.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcscmp</span></code> function returns an integer greater than, equal to, or less than zero,
accordingly as the wide string pointed to by <code class="docutils literal"><span class="pre">s1</span></code> is greater than, equal to, or less than the
wide string pointed to by <code class="docutils literal"><span class="pre">s2</span></code>.</p>
</div>
<div class="section" id="the-wcscoll-function">
<span id="index-41"></span><h4>38.4.4.2. The <code class="docutils literal"><span class="pre">wcscoll</span></code> function<a class="headerlink" href="#the-wcscoll-function" title="Permalink to this headline">¶</a></h4>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">int</span> <span class="nf">wcscoll</span><span class="p">(</span><span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span><span class="n">s1</span><span class="p">,</span> <span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span><span class="n">s2</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcscoll</span></code> function compares the wide string pointed to by <code class="docutils literal"><span class="pre">s1</span></code> to the wide string
pointed to by <code class="docutils literal"><span class="pre">s2</span></code>, both interpreted as appropriate to the <code class="docutils literal"><span class="pre">LC_COLLATE</span></code> category of the
current locale.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcscoll</span></code> function returns an integer greater than, equal to, or less than zero,
accordingly as the wide string pointed to by <code class="docutils literal"><span class="pre">s1</span></code> is greater than, equal to, or less than the
wide string pointed to by <code class="docutils literal"><span class="pre">s2</span></code> when both are interpreted as appropriate to the current
locale.</p>
</div>
<div class="section" id="the-wcsncmp-function">
<span id="index-42"></span><h4>38.4.4.3. The <code class="docutils literal"><span class="pre">wcsncmp</span></code> function<a class="headerlink" href="#the-wcsncmp-function" title="Permalink to this headline">¶</a></h4>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">int</span> <span class="nf">wcsncmp</span><span class="p">(</span><span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span><span class="n">s1</span><span class="p">,</span> <span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span><span class="n">s2</span><span class="p">,</span>
             <span class="kt">size_t</span> <span class="n">n</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcsncmp</span></code> function compares not more than <code class="docutils literal"><span class="pre">n</span></code> wide characters (those that follow a
null wide character are not compared) from the array pointed to by <code class="docutils literal"><span class="pre">s1</span></code> to the array
pointed to by <code class="docutils literal"><span class="pre">s2</span></code>.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcsncmp</span></code> function returns an integer greater than, equal to, or less than zero,
accordingly as the possibly null-terminated array pointed to by <code class="docutils literal"><span class="pre">s1</span></code> is greater than, equal
to, or less than the possibly null-terminated array pointed to by <code class="docutils literal"><span class="pre">s2</span></code>.</p>
</div>
<div class="section" id="the-wcsxfrm-function">
<span id="index-43"></span><h4>38.4.4.4. The <code class="docutils literal"><span class="pre">wcsxfrm</span></code> function<a class="headerlink" href="#the-wcsxfrm-function" title="Permalink to this headline">¶</a></h4>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">size_t</span> <span class="nf">wcsxfrm</span><span class="p">(</span><span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">s1</span><span class="p">,</span>
             <span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">s2</span><span class="p">,</span>
             <span class="kt">size_t</span> <span class="n">n</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcsxfrm</span></code> function transforms the wide string pointed to by <code class="docutils literal"><span class="pre">s2</span></code> and places the
resulting wide string into the array pointed to by <code class="docutils literal"><span class="pre">s1</span></code>. The transformation is such that if
the <code class="docutils literal"><span class="pre">wcscmp</span></code> function is applied to two transformed wide strings, it returns a value greater
than, equal to, or less than zero, corresponding to the result of the <code class="docutils literal"><span class="pre">wcscoll</span></code> function
applied to the same two original wide strings. No more than <code class="docutils literal"><span class="pre">n</span></code> wide characters are placed
into the resulting array pointed to by <code class="docutils literal"><span class="pre">s1</span></code>, including the terminating null wide character. If
<code class="docutils literal"><span class="pre">n</span></code> is zero, <code class="docutils literal"><span class="pre">s1</span></code> is permitted to be a null pointer.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcsxfrm</span></code> function returns the length of the transformed wide string (not including
the terminating null wide character). If the value returned is <code class="docutils literal"><span class="pre">n</span></code> or greater, the contents of
the array pointed to by <code class="docutils literal"><span class="pre">s1</span></code> are indeterminate.</p>
<p>EXAMPLE The value of the following expression is the length of the array needed to hold the
transformation of the wide string pointed to by <code class="docutils literal"><span class="pre">s</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="mi">1</span> <span class="o">+</span> <span class="n">wcsxfrm</span><span class="p">(</span><span class="n">NULL</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="the-wmemcmp-function">
<span id="index-44"></span><h4>38.4.4.5. The <code class="docutils literal"><span class="pre">wmemcmp</span></code> function<a class="headerlink" href="#the-wmemcmp-function" title="Permalink to this headline">¶</a></h4>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">int</span> <span class="nf">wmemcmp</span><span class="p">(</span><span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span><span class="n">s1</span><span class="p">,</span> <span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span><span class="n">s2</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">n</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">wmemcmp</span></code> function compares the first <code class="docutils literal"><span class="pre">n</span></code> wide characters of the object pointed to by
<code class="docutils literal"><span class="pre">s1</span></code> to the first <code class="docutils literal"><span class="pre">n</span></code> wide characters of the object pointed to by <code class="docutils literal"><span class="pre">s2</span></code>.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">wmemcmp</span></code> function returns an integer greater than, equal to, or less than zero,
accordingly as the object pointed to by <code class="docutils literal"><span class="pre">s1</span></code> is greater than, equal to, or less than the object
pointed to by <code class="docutils literal"><span class="pre">s2</span></code>.</p>
</div>
</div>
<div class="section" id="wide-string-search-functions">
<span id="index-45"></span><h3>38.4.5. Wide string search functions<a class="headerlink" href="#wide-string-search-functions" title="Permalink to this headline">¶</a></h3>
<div class="section" id="the-wcschr-function">
<span id="index-46"></span><h4>38.4.5.1. The <code class="docutils literal"><span class="pre">wcschr</span></code> function<a class="headerlink" href="#the-wcschr-function" title="Permalink to this headline">¶</a></h4>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">wchar_t</span> <span class="o">*</span><span class="nf">wcschr</span><span class="p">(</span><span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span><span class="n">s</span><span class="p">,</span> <span class="kt">wchar_t</span> <span class="n">c</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcschr</span></code> function locates the first occurrence of <code class="docutils literal"><span class="pre">c</span></code> in the wide string pointed to by <code class="docutils literal"><span class="pre">s</span></code>.
The terminating null wide character is considered to be part of the wide string.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcschr</span></code> function returns a pointer to the located wide character, or a null pointer if
the wide character does not occur in the wide string.</p>
</div>
<div class="section" id="the-wcscspn-function">
<span id="index-47"></span><h4>38.4.5.2. The <code class="docutils literal"><span class="pre">wcscspn</span></code> function<a class="headerlink" href="#the-wcscspn-function" title="Permalink to this headline">¶</a></h4>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">size_t</span> <span class="nf">wcscspn</span><span class="p">(</span><span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span><span class="n">s1</span><span class="p">,</span> <span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span><span class="n">s2</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcscspn</span></code> function computes the length of the maximum initial segment of the wide
string pointed to by <code class="docutils literal"><span class="pre">s1</span></code> which consists entirely of wide characters not from the wide
string pointed to by <code class="docutils literal"><span class="pre">s2</span></code>.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcscspn</span></code> function returns the length of the segment.</p>
</div>
<div class="section" id="the-wcspbrk-function">
<span id="index-48"></span><h4>38.4.5.3. The <code class="docutils literal"><span class="pre">wcspbrk</span></code> function<a class="headerlink" href="#the-wcspbrk-function" title="Permalink to this headline">¶</a></h4>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">wchar_t</span> <span class="o">*</span><span class="nf">wcspbrk</span><span class="p">(</span><span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span><span class="n">s1</span><span class="p">,</span> <span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span><span class="n">s2</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcspbrk</span></code> function locates the first occurrence in the wide string pointed to by <code class="docutils literal"><span class="pre">s1</span></code> of
any wide character from the wide string pointed to by <code class="docutils literal"><span class="pre">s2</span></code>.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcspbrk</span></code> function returns a pointer to the wide character in <code class="docutils literal"><span class="pre">s1</span></code>, or a null pointer if
no wide character from <code class="docutils literal"><span class="pre">s2</span></code> occurs in <code class="docutils literal"><span class="pre">s1</span></code>.</p>
</div>
<div class="section" id="the-wcsrchr-function">
<span id="index-49"></span><h4>38.4.5.4. The <code class="docutils literal"><span class="pre">wcsrchr</span></code> function<a class="headerlink" href="#the-wcsrchr-function" title="Permalink to this headline">¶</a></h4>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">wchar_t</span> <span class="o">*</span><span class="nf">wcsrchr</span><span class="p">(</span><span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span><span class="n">s</span><span class="p">,</span> <span class="kt">wchar_t</span> <span class="n">c</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcsrchr</span></code> function locates the last occurrence of <code class="docutils literal"><span class="pre">c</span></code> in the wide string pointed to by
<code class="docutils literal"><span class="pre">s</span></code>. The terminating null wide character is considered to be part of the wide string.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcsrchr</span></code> function returns a pointer to the wide character, or a null pointer if <code class="docutils literal"><span class="pre">c</span></code> does
not occur in the wide string.</p>
</div>
<div class="section" id="the-wcsspn-function">
<span id="index-50"></span><h4>38.4.5.5. The <code class="docutils literal"><span class="pre">wcsspn</span></code> function<a class="headerlink" href="#the-wcsspn-function" title="Permalink to this headline">¶</a></h4>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">size_t</span> <span class="nf">wcsspn</span><span class="p">(</span><span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span><span class="n">s1</span><span class="p">,</span> <span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span><span class="n">s2</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcsspn</span></code> function computes the length of the maximum initial segment of the wide
string pointed to by <code class="docutils literal"><span class="pre">s1</span></code> which consists entirely of wide characters from the wide string
pointed to by <code class="docutils literal"><span class="pre">s2</span></code>.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcsspn</span></code> function returns the length of the segment.</p>
</div>
<div class="section" id="the-wcsstr-function">
<span id="index-51"></span><h4>38.4.5.6. The <code class="docutils literal"><span class="pre">wcsstr</span></code> function<a class="headerlink" href="#the-wcsstr-function" title="Permalink to this headline">¶</a></h4>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">wchar_t</span> <span class="o">*</span><span class="nf">wcsstr</span><span class="p">(</span><span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span><span class="n">s1</span><span class="p">,</span> <span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span><span class="n">s2</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcsstr</span></code> function locates the first occurrence in the wide string pointed to by <code class="docutils literal"><span class="pre">s1</span></code> of
the sequence of wide characters (excluding the terminating null wide character) in the
wide string pointed to by <code class="docutils literal"><span class="pre">s2</span></code>.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcsstr</span></code> function returns a pointer to the located wide string, or a null pointer if the
wide string is not found. If <code class="docutils literal"><span class="pre">s2</span></code> points to a wide string with zero length, the function
returns <code class="docutils literal"><span class="pre">s1</span></code>.</p>
</div>
<div class="section" id="the-wcstok-function">
<span id="index-52"></span><h4>38.4.5.7. The <code class="docutils literal"><span class="pre">wcstok</span></code> function<a class="headerlink" href="#the-wcstok-function" title="Permalink to this headline">¶</a></h4>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">wchar_t</span> <span class="o">*</span><span class="nf">wcstok</span><span class="p">(</span><span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">s1</span><span class="p">,</span> <span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">s2</span><span class="p">,</span> <span class="kt">wchar_t</span> <span class="o">**</span> <span class="kr">restrict</span> <span class="n">ptr</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>A sequence of calls to the wcstok function breaks the wide string pointed to by <code class="docutils literal"><span class="pre">s1</span></code> into
a sequence of tokens, each of which is delimited by a wide character from the wide string
pointed to by <code class="docutils literal"><span class="pre">s2</span></code>. The third argument points to a caller-provided <code class="docutils literal"><span class="pre">wchar_t</span></code> pointer into
which the <code class="docutils literal"><span class="pre">wcstok</span></code> function stores information necessary for it to continue scanning the
same wide string.</p>
<p>The first call in a sequence has a non-null first argument and stores an initial value in the
object pointed to by <code class="docutils literal"><span class="pre">ptr</span></code>. Subsequent calls in the sequence have a null first argument and
the object pointed to by ptr is required to have the value stored by the previous call in
the sequence, which is then updated. The separator wide string pointed to by s2 may be
different from call to call.</p>
<p>The first call in the sequence searches the wide string pointed to by <code class="docutils literal"><span class="pre">s1</span></code> for the first wide
character that is not contained in the current separator wide string pointed to by <code class="docutils literal"><span class="pre">s2</span></code>. If no
such wide character is found, then there are no tokens in the wide string pointed to by <code class="docutils literal"><span class="pre">s1</span></code>
and the wcstok function returns a null pointer. If such a wide character is found, it is
the start of the first token.</p>
<p>The <code class="docutils literal"><span class="pre">wcstok</span></code> function then searches from there for a wide character that is contained in
the current separator wide string. If no such wide character is found, the current token
extends to the end of the wide string pointed to by <code class="docutils literal"><span class="pre">s1</span></code>, and subsequent searches in the
same wide string for a token return a null pointer. If such a wide character is found, it is
overwritten by a null wide character, which terminates the current token.</p>
<p>In all cases, the wcstok function stores sufficient information in the pointer pointed to
by <code class="docutils literal"><span class="pre">ptr</span></code> so that subsequent calls, with a null pointer for <code class="docutils literal"><span class="pre">s1</span></code> and the unmodified pointer
value for <code class="docutils literal"><span class="pre">ptr</span></code>, shall start searching just past the element overwritten by a null wide
character (if any).</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcstok</span></code> function returns a pointer to the first wide character of a token, or a null
pointer if there is no token.</p>
<p>EXAMPLE</p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="k">static</span> <span class="kt">wchar_t</span> <span class="n">str1</span><span class="p">[]</span> <span class="o">=</span> <span class="s">L&quot;?a???b,,,#c&quot;</span><span class="p">;</span>
<span class="k">static</span> <span class="kt">wchar_t</span> <span class="n">str2</span><span class="p">[]</span> <span class="o">=</span> <span class="s">L&quot;</span><span class="se">\t</span><span class="s"> </span><span class="se">\t</span><span class="s">&quot;</span><span class="p">;</span>
<span class="kt">wchar_t</span> <span class="o">*</span><span class="n">t</span><span class="p">,</span> <span class="o">*</span><span class="n">ptr1</span><span class="p">,</span> <span class="o">*</span><span class="n">ptr2</span><span class="p">;</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">wcstok</span><span class="p">(</span><span class="n">str1</span><span class="p">,</span> <span class="s">L&quot;?&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ptr1</span><span class="p">);</span> <span class="c1">// t points to the token L&quot;a&quot;</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">wcstok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">L&quot;,&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ptr1</span><span class="p">);</span> <span class="c1">// t points to the token L&quot;??b&quot;</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">wcstok</span><span class="p">(</span><span class="n">str2</span><span class="p">,</span> <span class="s">L&quot; </span><span class="se">\t</span><span class="s">&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ptr2</span><span class="p">);</span> <span class="c1">// t is a null pointer</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">wcstok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">L&quot;#,&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ptr1</span><span class="p">);</span> <span class="c1">// t points to the token L&quot;c&quot;</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">wcstok</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">L&quot;?&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ptr1</span><span class="p">);</span> <span class="c1">// t is a null pointer</span>
</pre></div>
</div>
</div>
<div class="section" id="the-wmemchr-function">
<span id="index-53"></span><h4>38.4.5.8. The <code class="docutils literal"><span class="pre">wmemchr</span></code> function<a class="headerlink" href="#the-wmemchr-function" title="Permalink to this headline">¶</a></h4>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">wchar_t</span> <span class="o">*</span><span class="nf">wmemchr</span><span class="p">(</span><span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span><span class="n">s</span><span class="p">,</span> <span class="kt">wchar_t</span> <span class="n">c</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">n</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">wmemchr</span></code> function locates the first occurrence of <code class="docutils literal"><span class="pre">c</span></code> in the initial <code class="docutils literal"><span class="pre">n</span></code> wide characters of
the object pointed to by <code class="docutils literal"><span class="pre">s</span></code>.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">wmemchr</span></code> function returns a pointer to the located wide character, or a null pointer if
the wide character does not occur in the object.</p>
</div>
</div>
<div class="section" id="miscellaneous-functions">
<h3>38.4.6. Miscellaneous functions<a class="headerlink" href="#miscellaneous-functions" title="Permalink to this headline">¶</a></h3>
<div class="section" id="the-wcslen-function">
<span id="index-54"></span><h4>38.4.6.1. The <code class="docutils literal"><span class="pre">wcslen</span></code> function<a class="headerlink" href="#the-wcslen-function" title="Permalink to this headline">¶</a></h4>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">size_t</span> <span class="nf">wcslen</span><span class="p">(</span><span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span><span class="n">s</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcslen</span></code> function computes the length of the wide string pointed to by <code class="docutils literal"><span class="pre">s</span></code>.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcslen</span></code> function returns the number of wide characters that precede the terminating
null wide character.</p>
</div>
<div class="section" id="the-wmemset-function">
<span id="index-55"></span><h4>38.4.6.2. The <code class="docutils literal"><span class="pre">wmemset</span></code> function<a class="headerlink" href="#the-wmemset-function" title="Permalink to this headline">¶</a></h4>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">wchar_t</span> <span class="o">*</span><span class="nf">wmemset</span><span class="p">(</span><span class="kt">wchar_t</span> <span class="o">*</span><span class="n">s</span><span class="p">,</span> <span class="kt">wchar_t</span> <span class="n">c</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">n</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">wmemset</span></code> function copies the value of <code class="docutils literal"><span class="pre">c</span></code> into each of the first <code class="docutils literal"><span class="pre">n</span></code> wide characters of
the object pointed to by <code class="docutils literal"><span class="pre">s</span></code>.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">wmemset</span></code> function returns the value of <code class="docutils literal"><span class="pre">s</span></code>.</p>
</div>
</div>
</div>
<div class="section" id="wide-character-time-conversion-functions">
<span id="index-56"></span><h2>38.5. Wide character time conversion functions<a class="headerlink" href="#wide-character-time-conversion-functions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="the-wcsftime-function">
<span id="index-57"></span><h3>38.5.1. The <code class="docutils literal"><span class="pre">wcsftime</span></code> function<a class="headerlink" href="#the-wcsftime-function" title="Permalink to this headline">¶</a></h3>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;time.h&gt;</span>
<span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">size_t</span> <span class="nf">wcsftime</span><span class="p">(</span><span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">s</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">maxsize</span><span class="p">,</span>
             <span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">format</span><span class="p">,</span>
             <span class="k">const</span> <span class="k">struct</span> <span class="n">tm</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">timeptr</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcsftime</span></code> function is equivalent to the <code class="docutils literal"><span class="pre">strftime</span></code> function, except that:</p>
<ul class="simple">
<li>The argument <code class="docutils literal"><span class="pre">s</span></code> points to the initial element of an array of wide characters into which
the generated output is to be placed.</li>
<li>The argument <code class="docutils literal"><span class="pre">maxsize</span></code> indicates the limiting number of wide characters.</li>
<li>The argument format is a wide string and the conversion specifiers are replaced by
corresponding sequences of wide characters.</li>
<li>The return value indicates the number of wide characters.</li>
</ul>
<p><strong>Returns</strong></p>
<p>If the total number of resulting wide characters including the terminating null wide
character is not more than <code class="docutils literal"><span class="pre">maxsize</span></code>, the <code class="docutils literal"><span class="pre">wcsftime</span></code> function returns the number of
wide characters placed into the array pointed to by s not including the terminating null
wide character. Otherwise, zero is returned and the contents of the array are
indeterminate.</p>
</div>
</div>
<div class="section" id="extended-multibyte-wide-character-conversion-utilities">
<span id="id51"></span><h2>38.6. Extended multibyte/wide character conversion utilities<a class="headerlink" href="#extended-multibyte-wide-character-conversion-utilities" title="Permalink to this headline">¶</a></h2>
<p>The header <code class="docutils literal"><span class="pre">&lt;wchar.h&gt;</span></code> declares an extended set of functions useful for conversion
between multibyte characters and wide characters.</p>
<p>Most of the following functions - those that are listed as &#8220;restartable&#8221;, <a class="reference internal" href="#id56"><span>Restartable multibyte/wide character conversion functions</span></a> and
<a class="reference internal" href="#id61"><span>Restartable multibyte/wide string conversion functions</span></a> - take as a last argument a pointer to an object of type <code class="docutils literal"><span class="pre">mbstate_t</span></code> that is used
to describe the current conversion state from a particular multibyte character sequence to
a wide character sequence (or the reverse) under the rules of a particular setting for the
<code class="docutils literal"><span class="pre">LC_CTYPE</span></code> category of the current locale.</p>
<p>The initial conversion state corresponds, for a conversion in either direction, to the
beginning of a new multibyte character in the initial shift state. A zero-valued
<code class="docutils literal"><span class="pre">mbstate_t</span></code> object is (at least) one way to describe an initial conversion state. A zerovalued
<code class="docutils literal"><span class="pre">mbstate_t</span></code> object can be used to initiate conversion involving any multibyte
character sequence, in any <strong>LC_CTYPE</strong> category setting. If an <code class="docutils literal"><span class="pre">mbstate_t</span></code> object has
been altered by any of the functions described in this subclause, and is then used with a
different multibyte character sequence, or in the other conversion direction, or with a
different <strong>LC_CTYPE</strong> category setting than on earlier function calls, the behavior is
undefined. <a class="footnote-reference" href="#id53" id="id52">[20]</a></p>
<p>On entry, each function takes the described conversion state (either internal or pointed to
by an argument) as current. The conversion state described by the pointed-to object is
altered as needed to track the shift state, and the position within a multibyte character, for
the associated multibyte character sequence.</p>
<table class="docutils footnote" frame="void" id="id53" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id52">[20]</a></td><td>Thus, a particular <code class="docutils literal"><span class="pre">mbstate_t</span></code> object can be used, for example, with both the <code class="docutils literal"><span class="pre">mbrtowc</span></code> and
<code class="docutils literal"><span class="pre">mbsrtowcs</span></code> functions as long as they are used to step sequentially through the same multibyte
character string.</td></tr>
</tbody>
</table>
<div class="section" id="single-byte-wide-character-conversion-functions">
<h3>38.6.1. Single-byte/wide character conversion functions<a class="headerlink" href="#single-byte-wide-character-conversion-functions" title="Permalink to this headline">¶</a></h3>
<div class="section" id="the-btowc-function">
<span id="id54"></span><span id="index-58"></span><h4>38.6.1.1. The <code class="docutils literal"><span class="pre">btowc</span></code> function<a class="headerlink" href="#the-btowc-function" title="Permalink to this headline">¶</a></h4>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">wint_t</span> <span class="nf">btowc</span><span class="p">(</span><span class="kt">int</span> <span class="n">c</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">btowc</span></code> function determines whether <code class="docutils literal"><span class="pre">c</span></code> constitutes a valid single-byte character in the
initial shift state.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">btowc</span></code> function returns <code class="docutils literal"><span class="pre">WEOF</span></code> if <code class="docutils literal"><span class="pre">c</span></code> has the value <code class="docutils literal"><span class="pre">EOF</span></code> or if <code class="docutils literal"><span class="pre">(unsigned</span> <span class="pre">char)c</span></code>
does not constitute a valid single-byte character in the initial shift state. Otherwise, it
returns the wide character representation of that character.</p>
</div>
<div class="section" id="the-wctob-function">
<span id="id55"></span><span id="index-59"></span><h4>38.6.1.2. The <code class="docutils literal"><span class="pre">wctob</span></code> function<a class="headerlink" href="#the-wctob-function" title="Permalink to this headline">¶</a></h4>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">int</span> <span class="nf">wctob</span><span class="p">(</span><span class="kt">wint_t</span> <span class="n">c</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">wctob</span></code> function determines whether <code class="docutils literal"><span class="pre">c</span></code> corresponds to a member of the extended
character set whose multibyte character representation is a single byte when in the initial
shift state.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">wctob</span></code> function returns <code class="docutils literal"><span class="pre">EOF</span></code> if <code class="docutils literal"><span class="pre">c</span></code> does not correspond to a multibyte character with
length one in the initial shift state. Otherwise, it returns the single-byte representation of
that character as an unsigned char converted to an <code class="docutils literal"><span class="pre">int</span></code>.</p>
</div>
</div>
<div class="section" id="conversion-state-functions">
<h3>38.6.2. Conversion state functions<a class="headerlink" href="#conversion-state-functions" title="Permalink to this headline">¶</a></h3>
<div class="section" id="the-mbsinit-function">
<span id="index-60"></span><h4>38.6.2.1. The <code class="docutils literal"><span class="pre">mbsinit</span></code> function<a class="headerlink" href="#the-mbsinit-function" title="Permalink to this headline">¶</a></h4>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">int</span> <span class="nf">mbsinit</span><span class="p">(</span><span class="k">const</span> <span class="kt">mbstate_t</span> <span class="o">*</span><span class="n">ps</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>If <code class="docutils literal"><span class="pre">ps</span></code> is not a null pointer, the mbsinit function determines whether the pointed-to
<code class="docutils literal"><span class="pre">mbstate_t</span></code> object describes an initial conversion state.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">mbsinit</span></code> function returns nonzero if <code class="docutils literal"><span class="pre">ps</span></code> is a null pointer or if the pointed-to object
describes an initial conversion state; otherwise, it returns zero.</p>
</div>
</div>
<div class="section" id="restartable-multibyte-wide-character-conversion-functions">
<span id="id56"></span><h3>38.6.3. Restartable multibyte/wide character conversion functions<a class="headerlink" href="#restartable-multibyte-wide-character-conversion-functions" title="Permalink to this headline">¶</a></h3>
<p>These functions differ from the corresponding multibyte character functions of <a class="reference internal" href="../stdlib/#id25"><span>Multibyte/wide character conversion functions</span></a>
(<code class="docutils literal"><span class="pre">mblen,</span> <span class="pre">mbtowc,</span></code> and <code class="docutils literal"><span class="pre">wctomb</span></code>) in that they hav <code class="docutils literal"><span class="pre">e</span></code> an extra parameter, <code class="docutils literal"><span class="pre">ps,</span></code> of type
pointer to <code class="docutils literal"><span class="pre">mbstate_t</span></code> that points to an object that can completely describe the current
conversion state of the associated multibyte character sequence. If <code class="docutils literal"><span class="pre">ps</span></code> is a null pointer,
each function uses its own internal <code class="docutils literal"><span class="pre">mbstate_t</span></code> object instead, which is initialized at
program startup to the initial conversion state. The implementation behaves as if no
library function calls these functions with a null pointer for <code class="docutils literal"><span class="pre">ps</span></code>.</p>
<p>Also unlike their corresponding functions, the return value does not represent whether the
encoding is state-dependent.</p>
<div class="section" id="the-mbrlen-function">
<span id="index-61"></span><h4>38.6.3.1. The <code class="docutils literal"><span class="pre">mbrlen</span></code> function<a class="headerlink" href="#the-mbrlen-function" title="Permalink to this headline">¶</a></h4>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">size_t</span> <span class="nf">mbrlen</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">s</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">n</span><span class="p">,</span> <span class="kt">mbstate_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">ps</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">mbrlen</span></code> function is equivalent to the call:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">mbrtowc</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">ps</span> <span class="o">!=</span> <span class="nb">NULL</span> <span class="o">?</span> <span class="nl">ps</span> <span class="p">:</span> <span class="o">&amp;</span><span class="n">internal</span><span class="p">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal"><span class="pre">internal</span></code> is the <code class="docutils literal"><span class="pre">mbstate_t</span></code> object for the <code class="docutils literal"><span class="pre">mbrlen</span></code> function, except that the
expression designated by ps is evaluated only once.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">mbrlen</span></code> function returns a value between zero and <code class="docutils literal"><span class="pre">n</span></code>, inclusive, <code class="docutils literal"><span class="pre">(size_t)(-2),</span></code>
or <code class="docutils literal"><span class="pre">(size_t)(-1)</span></code>.</p>
<p><strong>Forward references:</strong> the <code class="docutils literal"><span class="pre">mbrtowc</span></code> function (<a class="reference internal" href="#id57"><span>The mbrtowc function</span></a>).</p>
</div>
<div class="section" id="the-mbrtowc-function">
<span id="id57"></span><span id="index-62"></span><h4>38.6.3.2. The <code class="docutils literal"><span class="pre">mbrtowc</span></code> function<a class="headerlink" href="#the-mbrtowc-function" title="Permalink to this headline">¶</a></h4>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">size_t</span> <span class="nf">mbrtowc</span><span class="p">(</span><span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">pwc</span><span class="p">,</span>
             <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">s</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">n</span><span class="p">,</span> <span class="kt">mbstate_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">ps</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>If <code class="docutils literal"><span class="pre">s</span></code> is a null pointer, the <code class="docutils literal"><span class="pre">mbrtowc</span></code> function is equivalent to the call:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">mbrtowc</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">ps</span><span class="p">)</span>
</pre></div>
</div>
<p>In this case, the values of the parameters <code class="docutils literal"><span class="pre">pwc</span></code> and <code class="docutils literal"><span class="pre">n</span></code> are ignored.</p>
<p>If <code class="docutils literal"><span class="pre">s</span></code> is not a null pointer, the <code class="docutils literal"><span class="pre">mbrtowc</span></code> function inspects at most <code class="docutils literal"><span class="pre">n</span></code> bytes beginning with
the byte pointed to by <code class="docutils literal"><span class="pre">s</span></code> to determine the number of bytes needed to complete the next
multibyte character (including any shift sequences). If the function determines that the
next multibyte character is complete and valid, it determines the value of the
corresponding wide character and then, if pwc is not a null pointer, stores that value in
the object pointed to by pwc. If the corresponding wide character is the null wide
character, the resulting state described is the initial conversion state.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">mbrtowc</span></code> function returns the first of the following that applies (given the current
conversion state):</p>
<p><code class="docutils literal"><span class="pre">0</span></code> if the next <code class="docutils literal"><span class="pre">n</span></code> or fewer bytes complete the multibyte character that
corresponds to the null wide character (which is the value stored).
between 1 and <code class="docutils literal"><span class="pre">n</span></code> inclusive if the next <code class="docutils literal"><span class="pre">n</span></code> or fewer bytes complete a valid multibyte
character (which is the value stored); the value returned is the number
of bytes that complete the multibyte character.</p>
<p><code class="docutils literal"><span class="pre">(size_t)(-2)</span></code> if the next <code class="docutils literal"><span class="pre">n</span></code> bytes contribute to an incomplete (but potentially valid)
multibyte character, and all <code class="docutils literal"><span class="pre">n</span></code> bytes have been processed (no value is
stored). <a class="footnote-reference" href="#id59" id="id58">[21]</a></p>
<p><code class="docutils literal"><span class="pre">(size_t)(-1)</span></code> if an encoding error occurs, in which case the next <code class="docutils literal"><span class="pre">n</span></code> or fewer bytes
do not contribute to a complete and valid multibyte character (no
value is stored); the value of the macro <strong>EILSEQ</strong> is stored in <strong>errno</strong>,
and the conversion state is unspecified.</p>
<table class="docutils footnote" frame="void" id="id59" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id58">[21]</a></td><td>When <code class="docutils literal"><span class="pre">n</span></code> has at least the value of the <strong>MB_CUR_MAX</strong> macro, this case can only occur if <code class="docutils literal"><span class="pre">s</span></code> points at a
sequence of redundant shift sequences (for implementations with state-dependent encodings).</td></tr>
</tbody>
</table>
</div>
<div class="section" id="the-wcrtomb-function">
<span id="id60"></span><span id="index-63"></span><h4>38.6.3.3. The <code class="docutils literal"><span class="pre">wcrtomb</span></code> function<a class="headerlink" href="#the-wcrtomb-function" title="Permalink to this headline">¶</a></h4>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">size_t</span> <span class="nf">wcrtomb</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">s</span><span class="p">,</span> <span class="kt">wchar_t</span> <span class="n">wc</span><span class="p">,</span>
             <span class="kt">mbstate_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">ps</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>If <code class="docutils literal"><span class="pre">s</span></code> is a null pointer, the <code class="docutils literal"><span class="pre">wcrtomb</span></code> function is equivalent to the call
<code class="docutils literal"><span class="pre">wcrtomb(buf,</span> <span class="pre">L'\0',</span> <span class="pre">ps)</span></code> where buf is an internal buffer.</p>
<p>If <code class="docutils literal"><span class="pre">s</span></code> is not a null pointer, the <code class="docutils literal"><span class="pre">wcrtomb</span></code> function determines the number of bytes needed
to represent the multibyte character that corresponds to the wide character given by <code class="docutils literal"><span class="pre">wc</span></code>
(including any shift sequences), and stores the multibyte character representation in the
array whose first element is pointed to by <code class="docutils literal"><span class="pre">s</span></code>. At most <strong>MB_CUR_MAX</strong> bytes are stored. If
<code class="docutils literal"><span class="pre">wc</span></code> is a null wide character, a null byte is stored, preceded by any shift sequence needed
to restore the initial shift state; the resulting state described is the initial conversion state.</p>
<p><strong>Returns</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcrtomb</span></code> function returns the number of bytes stored in the array object (including
any shift sequences). When <code class="docutils literal"><span class="pre">wc</span></code> is not a valid wide character, an encoding error occurs:
the function stores the value of the macro <strong>EILSEQ</strong> in <strong>errno</strong> and returns
<code class="docutils literal"><span class="pre">(size_t)(-1);</span></code> the conversion state is unspecified.</p>
</div>
</div>
<div class="section" id="restartable-multibyte-wide-string-conversion-functions">
<span id="id61"></span><h3>38.6.4. Restartable multibyte/wide string conversion functions<a class="headerlink" href="#restartable-multibyte-wide-string-conversion-functions" title="Permalink to this headline">¶</a></h3>
<p>These functions differ from the corresponding multibyte string functions of <a class="reference internal" href="../stdlib/#id29"><span>Multibyte/wide string conversion functions</span></a>
(<code class="docutils literal"><span class="pre">mbstowcs</span></code> and <code class="docutils literal"><span class="pre">wcstombs</span></code>) in that they hav <code class="docutils literal"><span class="pre">e</span></code> an extra parameter, <code class="docutils literal"><span class="pre">ps</span></code>, of type pointer to
<code class="docutils literal"><span class="pre">mbstate_t</span></code> that points to an object that can completely describe the current conversion
state of the associated multibyte character sequence. If <code class="docutils literal"><span class="pre">ps</span></code> is a null pointer, each function
uses its own internal <code class="docutils literal"><span class="pre">mbstate_t</span></code> object instead, which is initialized at program startup
to the initial conversion state. The implementation behaves as if no library function calls
these functions with a null pointer for <code class="docutils literal"><span class="pre">ps</span></code>.</p>
<p>Also unlike their corresponding functions, the conversion source parameter, <code class="docutils literal"><span class="pre">src</span></code>, has a
pointer-to-pointer type. When the function is storing the results of conversions (that is,
when <code class="docutils literal"><span class="pre">dst</span></code> is not a null pointer), the pointer object pointed to by this parameter is updated
to reflect the amount of the source processed by that invocation.</p>
<div class="section" id="the-mbsrtowcs-function">
<span id="index-64"></span><h4>38.6.4.1. The <code class="docutils literal"><span class="pre">mbsrtowcs</span></code> function<a class="headerlink" href="#the-mbsrtowcs-function" title="Permalink to this headline">¶</a></h4>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">size_t</span> <span class="nf">mbsrtowcs</span><span class="p">(</span><span class="kt">wchar_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">dst</span><span class="p">,</span>
             <span class="k">const</span> <span class="kt">char</span> <span class="o">**</span> <span class="kr">restrict</span> <span class="n">src</span><span class="p">,</span>
             <span class="kt">size_t</span> <span class="n">len</span><span class="p">,</span> <span class="kt">mbstate_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">ps</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">mbsrtowcs</span></code> function converts a sequence of multibyte characters that begins in the
conversion state described by the object pointed to by <code class="docutils literal"><span class="pre">ps</span></code>, from the array indirectly
pointed to by <code class="docutils literal"><span class="pre">src</span></code> into a sequence of corresponding wide characters. If <code class="docutils literal"><span class="pre">dst</span></code> is not a null
pointer, the converted characters are stored into the array pointed to by <code class="docutils literal"><span class="pre">dst</span></code>. Conversion
continues up to and including a terminating null character, which is also stored.
Conversion stops earlier in two cases: when a sequence of bytes is encountered that does
not form a valid multibyte character, or (if <code class="docutils literal"><span class="pre">dst</span></code> is not a null pointer) when <code class="docutils literal"><span class="pre">len</span></code> wide
characters have been stored into the array pointed to by dst. <a class="footnote-reference" href="#id63" id="id62">[22]</a> Each conversion takes
place as if by a call to the <code class="docutils literal"><span class="pre">mbrtowc</span></code> function.</p>
<p>If <code class="docutils literal"><span class="pre">dst</span></code> is not a null pointer, the pointer object pointed to by <code class="docutils literal"><span class="pre">src</span></code> is assigned either a null
pointer (if conversion stopped due to reaching a terminating null character) or the address
just past the last multibyte character converted (if any). If conversion stopped due to
reaching a terminating null character and if <code class="docutils literal"><span class="pre">dst</span></code> is not a null pointer, the resulting state
described is the initial conversion state.</p>
<p><strong>Returns</strong></p>
<p>If the input conversion encounters a sequence of bytes that do not form a valid multibyte
character, an encoding error occurs: the <code class="docutils literal"><span class="pre">mbsrtowcs</span></code> function stores the value of the
macro <strong>EILSEQ</strong> in <strong>errno</strong> and returns <code class="docutils literal"><span class="pre">(size_t)(-1);</span></code> the conversion state is
unspecified. Otherwise, it returns the number of multibyte characters successfully
converted, not including the terminating null character (if any).</p>
<table class="docutils footnote" frame="void" id="id63" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id62">[22]</a></td><td>Thus, the value of <code class="docutils literal"><span class="pre">len</span></code> is ignored if <code class="docutils literal"><span class="pre">dst</span></code> is a null pointer.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="the-wcsrtombs-function">
<span id="index-65"></span><h4>38.6.4.2. The <code class="docutils literal"><span class="pre">wcsrtombs</span></code> function<a class="headerlink" href="#the-wcsrtombs-function" title="Permalink to this headline">¶</a></h4>
<p><strong>Synopsis</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;wchar.h&gt;</span>
<span class="kt">size_t</span> <span class="nf">wcsrtombs</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">dst</span><span class="p">,</span>
             <span class="k">const</span> <span class="kt">wchar_t</span> <span class="o">**</span> <span class="kr">restrict</span> <span class="n">src</span><span class="p">,</span>
             <span class="kt">size_t</span> <span class="n">len</span><span class="p">,</span>
             <span class="kt">mbstate_t</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">ps</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Description</strong></p>
<p>The <code class="docutils literal"><span class="pre">wcsrtombs</span></code> function converts a sequence of wide characters from the array
indirectly pointed to by <code class="docutils literal"><span class="pre">src</span></code> into a sequence of corresponding multibyte characters that
begins in the conversion state described by the object pointed to by <code class="docutils literal"><span class="pre">ps</span></code>. If <code class="docutils literal"><span class="pre">dst</span></code> is not a
null pointer, the converted characters are then stored into the array pointed to by <code class="docutils literal"><span class="pre">dst</span></code>.
Conversion continues up to and including a terminating null wide character, which is also
stored. Conversion stops earlier in two cases: when a wide character is reached that does
not correspond to a valid multibyte character, or (if <code class="docutils literal"><span class="pre">dst</span></code> is not a null pointer) when the
next multibyte character would exceed the limit of <code class="docutils literal"><span class="pre">len</span></code> total bytes to be stored into the
array pointed to by <code class="docutils literal"><span class="pre">dst</span></code>. Each conversion takes place as if by a call to the wcrtomb
function. <a class="footnote-reference" href="#id65" id="id64">[23]</a></p>
<p>If <code class="docutils literal"><span class="pre">dst</span></code> is not a null pointer, the pointer object pointed to by <code class="docutils literal"><span class="pre">src</span></code> is assigned either a null
pointer (if conversion stopped due to reaching a terminating null wide character) or the
address just past the last wide character converted (if any). If conversion stopped due to
reaching a terminating null wide character, the resulting state described is the initial
conversion state.</p>
<p><strong>Returns</strong></p>
<p>If conversion stops because a wide character is reached that does not correspond to a
valid multibyte character, an encoding error occurs: the <code class="docutils literal"><span class="pre">wcsrtombs</span></code> function stores the
value of the macro <strong>EILSEQ</strong> in <strong>errno</strong> and returns <code class="docutils literal"><span class="pre">(size_t)(-1);</span></code> the conversion
state is unspecified. Otherwise, it returns the number of bytes in the resulting multibyte
character sequence, not including the terminating null character (if any).</p>
<table class="docutils footnote" frame="void" id="id65" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id64">[23]</a></td><td>If conversion stops because a terminating null wide character has been reached, the bytes stored
include those necessary to reach the initial shift state immediately before the null byte.</td></tr>
</tbody>
</table>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../wtype/" class="btn btn-neutral float-right" title="39. Wide character classification and mapping utilities &lt;wctype.h&gt;" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../time/" class="btn btn-neutral" title="37. Date and time &lt;time.h&gt;" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2012-2015, Shiv S. Dayal.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>