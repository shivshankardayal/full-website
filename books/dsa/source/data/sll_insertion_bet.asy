import fontsize;
import animation;

animation a;

defaultpen(fontsize(16pt));
defaultpen(linewidth(1));

path p = (-.5cm, .5cm) -- (.5cm, .5cm) -- (.5cm, 1.5cm) -- (-.5cm, 1.5cm) -- cycle;
draw(p);
path p = (-3.5cm, .5cm) -- (-2.5cm, .5cm) -- (-2.5cm, 1.5cm) -- (-3.5cm, 1.5cm) -- cycle;
draw(p);
path p = (2.5cm, .5cm) -- (3.5cm, .5cm) -- (3.5cm, 1.5cm) -- (2.5cm, 1.5cm) -- cycle;
label("10", (-3cm, 1cm));
label("20", (0cm, 1cm));
label("30", (3cm, 1cm));
draw(p);
label("$head$", (-5.5cm, 1cm));
label("$NULL$", (5.5cm, 1cm));
draw((-4.7cm, 1cm) -- (-3.5cm, 1cm), EndArrow);
draw((3.5cm, 1cm) -- (4.7cm, 1cm), EndArrow);
save();
draw((-2.5cm, 1cm) -- (-.5cm, 1cm), EndArrow);
draw((.5cm, 1cm) -- (2.5cm, 1cm), EndArrow);
label(("$next$"), (-1.5cm, 1.4cm));
label(("$next$"), (1.5cm, 1.4cm));
label(("$next$"), (4.2cm, 1.4cm));
label("$q$", (-5.5cm, 1.5cm));
draw((-5.3cm, 1.5cm) -- (-3.5cm, 1.5cm), EndArrow);
path p = (-.5cm, 2.5cm) -- (.5cm, 2.5cm) -- (.5cm, 3.5cm) -- (-.5cm, 3.5cm) -- cycle;
draw(p);
label("$temp$", (-3.3cm, 3cm));
draw((-2.5cm, 3cm) -- (-.5cm, 3cm), EndArrow);
label("$next$", (1.5cm, 3.4cm));
draw((.5cm, 3cm) -- (2.5cm, 3cm), EndArrow);
label("We have 3 nodes. Let us say we want to insert 15 after 10.", (0cm, 0cm));
label("We allocate $temp$ which contaitns garbase and points somewhere.", (0cm, -.5cm));
label("$q$ is initialized with $*head$.", (0cm, -1cm));
a.add();
erase();
restore();
save();
draw((-2.5cm, 1cm) -- (-.5cm, 1cm), EndArrow);
draw((.5cm, 1cm) -- (2.5cm, 1cm), EndArrow);
label(("$next$"), (-1.5cm, 1.4cm));
label(("$next$"), (1.5cm, 1.4cm));
label(("$next$"), (4.2cm, 1.4cm));
label("$q$", (-5.5cm, 1.5cm));
draw((-5.3cm, 1.5cm) -- (-3.5cm, 1.5cm), EndArrow);
path p = (-.5cm, 2.5cm) -- (.5cm, 2.5cm) -- (.5cm, 3.5cm) -- (-.5cm, 3.5cm) -- cycle;
draw(p);
label("$temp$", (-3.3cm, 3cm));
draw((-2.5cm, 3cm) -- (-.5cm, 3cm), EndArrow);
label("$next$", (.8cm, 2.2cm));
draw((0cm, 2.5cm) -- (0cm, 1.5cm), EndArrow);
label("$q->next$ is not $NULL$. $j$ increases to 1. Position is 1", (0cm, 0cm));
label("$temp->next$ is assigned $q->next$.", (0cm, -.5cm));
a.add();
erase();
restore();
draw((-2.5cm, 1.5cm) -- (-.5cm, 2.5cm), EndArrow);
draw((.5cm, 1cm) -- (2.5cm, 1cm), EndArrow);
label(("$next$"), (-1.5cm, 1.4cm));
label(("$next$"), (1.5cm, 1.4cm));
label(("$next$"), (4.2cm, 1.4cm));
label("$q$", (-5.5cm, 1.5cm));
draw((-5.3cm, 1.5cm) -- (-3.5cm, 1.5cm), EndArrow);
path p = (-.5cm, 2.5cm) -- (.5cm, 2.5cm) -- (.5cm, 3.5cm) -- (-.5cm, 3.5cm) -- cycle;
draw(p);
label("$temp$", (-3.3cm, 3cm));
label("15", (0cm, 3cm));
draw((-2.5cm, 3cm) -- (-.5cm, 3cm), EndArrow);
label("$next$", (.8cm, 2.2cm));
draw((0cm, 2.5cm) -- (0cm, 1.5cm), EndArrow);
label("$q->next$ is assigned $temp$ and data is copied.", (0cm, 0cm));
label("And we break out of loop.", (0cm, -.5cm));
a.add();
a.movie(BBox(0.0cm), loops=-1, delay=250);
