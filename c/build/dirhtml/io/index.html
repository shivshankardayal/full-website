

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-17487464-6']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3. Console I/O &mdash; C Programming  documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="C Programming  documentation" href="../"/>
        <link rel="next" title="4. Operators and Expressions" href="../oae/"/>
        <link rel="prev" title="2. Basics of C" href="../basics/"/>
<link rel="stylesheet" href="../../css/math.css" type="text/css" />


  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../" class="icon icon-home"> C Programming
          

          
          </a>

          
            
            
              <div class="version">
                0.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basics/">2. Basics of C</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">3. Console I/O</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#c-s-memory-model">3.1. C&#8217;s Memory Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="#printf">3.2. printf</a></li>
<li class="toctree-l2"><a class="reference internal" href="#scanf">3.3. scanf</a></li>
<li class="toctree-l2"><a class="reference internal" href="#character-string-i-o-functions">3.4. Character String I/O Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#single-character-i-o">3.5. Single Character I/O</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../oae/">4. Operators and Expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cf/">5. Control Flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ap/">6. Arrays and Pointers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../func/">7. Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../su/">8. Structures and Unions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../strings/">9. Strings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fileio/">10. File Input/Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fs/">11. Following Specification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../env/">12. Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lang/">13. Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../macros/">14. Preprocessing Directives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../std/">15. The C Standard Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../assert/">16. Diagnostics <code class="docutils literal"><span class="pre">&lt;assert.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../complex/">17. Complex arithmetic <code class="docutils literal"><span class="pre">&lt;complex.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../ctypes/">18. Character Handling <code class="docutils literal"><span class="pre">&lt;ctype.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../errno/">19. Errors <code class="docutils literal"><span class="pre">&lt;errno.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../fenv/">20. Floating-point environment <code class="docutils literal"><span class="pre">&lt;fenv.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../float/">21. Characteristics of floating types <code class="docutils literal"><span class="pre">&lt;float.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../inttypes/">22. Format conversion of integer types <code class="docutils literal"><span class="pre">&lt;inttypes.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../iso646/">23. Alternative spellings <code class="docutils literal"><span class="pre">&lt;iso646.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../limits/">24. Sizes of integer types <code class="docutils literal"><span class="pre">&lt;limits.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../locale/">25. Localization &lt;locale.h&gt;</a></li>
<li class="toctree-l1"><a class="reference internal" href="../math/">26. Mathematics <code class="docutils literal"><span class="pre">&lt;math.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../setjmp/">27. Nonlocal jumps <code class="docutils literal"><span class="pre">&lt;setjmp.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../signal/">28. Signal handling <code class="docutils literal"><span class="pre">&lt;signal.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stdarg/">29. Variable arguments <code class="docutils literal"><span class="pre">&lt;stdarg.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stdbool/">30. Boolean type and values <code class="docutils literal"><span class="pre">&lt;stdbool.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stddef/">31. Common definitions <code class="docutils literal"><span class="pre">&lt;stddef.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stdint/">32. Integer types <code class="docutils literal"><span class="pre">&lt;stdint.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stdio/">33. Input/output <code class="docutils literal"><span class="pre">&lt;stdio.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../stdlib/">34. General utilities <code class="docutils literal"><span class="pre">&lt;stdlib.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../string/">35. String handling <code class="docutils literal"><span class="pre">&lt;string.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../tgmath/">36. Type-generic math <code class="docutils literal"><span class="pre">&lt;tgmath.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../time/">37. Date and time <code class="docutils literal"><span class="pre">&lt;time.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../wchar/">38. Extended multibyte and wide character utilities <code class="docutils literal"><span class="pre">&lt;wchar.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../wtype/">39. Wide character classification and mapping utilities <code class="docutils literal"><span class="pre">&lt;wctype.h&gt;</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../problems/">40. Problems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license/">41. License</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../">C Programming</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../">Docs</a> &raquo;</li>
      
    <li>3. Console I/O</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/io.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="console-i-o">
<h1>3. Console I/O<a class="headerlink" href="#console-i-o" title="Permalink to this headline">¶</a></h1>
<p>IO stands for input/output. C provides only mechanism to interact through
console using its standard library. C does not provide ways to have GUI
although that is possible with various GUI libraries most notable being
GTK. However, discussing about GTK is out of scope of this book. In this
chapter we will focus on console output facilities of C because any program we
write at this stage will be meaningless if it has no input/output. Typically
when we interact with a C program we give input using keyboard which is also
referred as texttt{stdin} stream. The output is monitor or texttt{stdout}
stream. There is one more stream texttt{stderr} which is generally redirected
to monitor or a log file. For historical reasons these are known as
texttt{FILE} stream which represents the datatype of these
streams. texttt{FILE} is capable of representing other streams which are disk
based for example a file on your hard drive. There are more type of input
devices on a modern computer. For example, network i/o is there. Whenever you
browse web or download a file through your Internet connection network i/o comes
into play. There is an opengroup
which specifies functions for network related functions. Operating systems
like GNU/Linux are POSIX compatible which defines how network i/o will be
used. Even a printer is a special output device, a camera input, speakers
output, microphone input and so on. In this books we are concerned with
keyboard input, output on monitor and i/o using files. Other types of i/os are
out of scope of this book.</p>
<p>However, before we go on with i/o I would
like to present C&#8217;s memory model which will be needed by our discussion of i/o
related functions. However, if things do not make sense even then please go
through it and come later to understand more.</p>
<div class="section" id="c-s-memory-model">
<span id="index-0"></span><h2>3.1. C&#8217;s Memory Model<a class="headerlink" href="#c-s-memory-model" title="Permalink to this headline">¶</a></h2>
<p>As you may be knowing RAM(random access memory) is the area which is used as
primary memory. Whenever we execute a program the first thing which happens is
that it gets loaded into memory. Now a binary program becomes a process when it
is running i.e. a running program is referred as process. All processes have
memory area divided into different portions. These portions are known as data
segment, stack and code or text segment. Data segment is further split in
three parts; initialized data segment, uninitialized data segment or BSS which
is name after an ancient assembler Block Started by Symbol and
heap. Initialized data segment contains initialized global variables and static
variables. For uninitialized data segment it is same as above just that the
variables are not initialized explicitly but implicitly to zero.</p>
<p>Heap is the largest area of memory used for dynamic memory allocation. As
you will see later that you can manage heap using <code class="docutils literal"><span class="pre">malloc(),</span> <span class="pre">calloc(),</span>
<span class="pre">realloc()</span></code> and <code class="docutils literal"><span class="pre">{free()</span></code>. Note that operating system does not manage memory
allocated for you on heap. You, the programmer, are responsible for allocating and
freeing up memory in area. If heap gets full os will use virtual memory or swap
space on hard disk. Objects allocated on heap persist across function
calls. However, there are some very nasty problems, which, come in picture when
you use heap. There are several of them. You may forget to allocate memory and
may dereference unallocated pointer. You may have initialized it to
<code class="docutils literal"><span class="pre">NULL</span></code> and try to dereference that. You may allocate and free twice. You
forgot to set pointer to ``NULL`` after freeing it. And last but not the
least you loose all pointers to the memory area before you can free. The nature
with this particular problem is that if your program is going to run for long
time then it is going to consume more and more memory. Because of its nature it
is known as memory leak. It is very difficult to detect such problems in code
which does not run for long periods of time. Our friend Valgrind will come to
help up with this problem. When a memory leak happens it eats up RAM slowly and
then operating system has to use virtual memory as explained above. In a
nutshell, I will say that heap means you have to manage it.</p>
<div class="figure">
<p><img src="../_images/tikz-fb55f5c07c973f283befb3cbad2f3e6564143bc7.png" alt="\draw (0, 0) -- (0, 1) -- (3, 1) -- (3, 0) -- cycle;
\draw (0, 1) -- (0, 2) -- (3, 2) -- (3, 1) -- cycle;
\draw (0, 2) -- (0, 4) -- (3, 4) -- (3, 2) -- cycle;
\draw (0, 4) -- (0, 6) -- (3, 6) -- (3, 4) -- cycle;

\draw (1.5, 0.5) node {Code Segment};
\draw (1.5, 1.5) node {Data Segment};
\draw (1.5, 2.5) node {Heap};
\draw (1.5, 5.5) node {Stack};

\draw [-&gt;, thick, &gt;=stealth] (1.5, 3) -- (1.5, 3.8);
\draw [-&gt;, thick, &gt;=stealth] (1.5, 5) -- (1.5, 4.2);

\draw (1.5, 6.5) node {Memory model of a process};" /></p>
</div><p>Stack is relatively simple. All non-static and non-register variables go on
stack if not allocated dynamically. Stack variables do not retain there value
across function calls unless
they are passed as pointers. Also, when they go out of
scope, that is the scope in which they were declared ends, they will be kind of
lost. The way in which stack frame moves the same area will be used for new
variables. However, stack is very limited (compared to heap) and in deeply
nested function calls or recursion (you will see these in Functions chapter)
stack may get full and program may crash. The reason for crashing is that
operating system will not use virtual memory but will do a segmentation fault
in its place. GNU/Linux allow its users to modify the stack size by
<code class="docutils literal"><span class="pre">ulimit</span></code> command. Note that stack and heap are adjacent in memory and
grow in opposite direction.</p>
<p>Code segment or text segment is an area where the executable instructions of
program reside. It is typically constant and read-only area unless your system
allows self-modifying code. Following diagram shows the memory layout.</p>
<p>Note that this memory model not only applies to C but any process.</p>
<p>Now we will look at those functions, which, allow us to do console i/o. We will
begin with our familiar friends; printf and scanf.</p>
<p>In this chapter we will look at only those functions, which, allow us to do
console i/o. We will begin with our familiar friends <code class="docutils literal"><span class="pre">printf</span></code> and <code class="docutils literal"><span class="pre">scanf</span></code>.</p>
</div>
<div class="section" id="printf">
<span id="index-1"></span><h2>3.2. printf<a class="headerlink" href="#printf" title="Permalink to this headline">¶</a></h2>
<p>The prototype of <code class="docutils literal"><span class="pre">printf</span></code> is given by</p>
<div class="highlight-c"><div class="highlight"><pre><span class="kt">int</span> <span class="nf">printf</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">fmt</span><span class="p">,</span> <span class="p">...);</span>
</pre></div>
</div>
<p>Let us take a minute to understand this as we have not yet covered
functions. The first word is <code class="docutils literal"><span class="pre">int</span></code> which denotes the return type of the
<code class="docutils literal"><span class="pre">printf</span></code> function. This is no. of characters printed. Then we have name
of the function. <code class="docutils literal"><span class="pre">fmt</span></code> is the format string of type <code class="docutils literal"><span class="pre">const</span> <span class="pre">char</span></code>. In C,
strings are either character arrays or character pointers. Here,
const means <code class="docutils literal"><span class="pre">printf</span></code> will not modify the format string. The <code class="docutils literal"><span class="pre">...</span></code> means
variable no. of arguments, which can be 0 also, to be supplied to
<code class="docutils literal"><span class="pre">printf</span></code>.</p>
<p><code class="docutils literal"><span class="pre">printf</span></code> is a string based output function that is It writes character strings
to <code class="docutils literal"><span class="pre">stdout</span></code>. The data which has to be written is formatted by format string as
shown previously. After the format specifier it expects as many arguments as
specified in format string. The characters which are not like, say <code class="docutils literal"><span class="pre">%d</span></code> for
example, arecalled ordinary characters. These are simply copied to output
stream, which, is <code class="docutils literal"><span class="pre">stdout</span></code> for <code class="docutils literal"><span class="pre">printf</span></code>. The <code class="docutils literal"><span class="pre">%d</span></code> like conversion
characters are known as conversion specification or format specifiers. Each
conversion specification should be augmented with one one argument. The results
are undefined if there are insufficient arguments for the format. If extra
arguments are given the excess arguments will be evaluated but are otherwise
ignored. However, there is a big problem here! There is no type-safety.:-( In
general compiler will warn you about it and you, the programmer, are responsible
for giving correct format string, correct no. of correct type of arguments.
Consider the following program for example:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="c1">// printf demo</span>
<span class="c1">// Author: Shiv Shankar Dayal</span>
<span class="c1">// Description: printf demo</span>

<span class="cp">#include &lt;stdio.h&gt;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">);</span>

  <span class="c1">//do not mess it. undefined behavior</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>

  <span class="c1">//extra arguments ignored</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s">&quot;hello&quot;</span><span class="p">);</span>

  <span class="c1">//legal because char is integer type</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="sc">&#39;s&#39;</span><span class="p">);</span>

  <span class="c1">//wrap around of integer as char</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%c</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="mi">836</span><span class="p">);</span>

  <span class="c1">//do not mess with type-safety</span>
  <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="s">&quot;hello&quot;</span><span class="p">);</span>
  <span class="n">prinf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>now that if you give the command like <code class="docutils literal"><span class="pre">gcc</span> <span class="pre">printf.c</span></code> then you will be shown following warnings:</p>
<div class="highlight-python"><div class="highlight"><pre>printf.c:12:14: warning: more &#39;%&#39; conversions than data arguments [-Wformat]
        printf(&quot;%d %d\n&quot;, 5);
                 ~^
printf.c:15:26: warning: data argument not used by format string [-Wformat-extra-args]
        printf(&quot;%d %d\n&quot;, 3, 5, &quot;hello&quot;);
             ~~~~~~~~~        ^
printf.c:24:19: warning: conversion specifies type &#39;int&#39; but the argument has type
&#39;char *&#39; [-Wformat]
      int i = printf(&quot;%d\n&quot;, &quot;hello&quot;);
                      ~^     ~~~~~~~
                      %s
3 warnings generated.
</pre></div>
</div>
<p>Clearly this is not a good sign for any program. A program should compile
cleanly. In our case compiler is generating binary even though there are
warnings. You can make compiler generate more warnings by issuing a <code class="docutils literal"><span class="pre">-Wall</span></code>
flag. You can also treat all warnings as errors by passing <code class="docutils literal"><span class="pre">-Werror</span></code> to
compiler. These two options will ensure that your code has no warnings. Now let
us move to output and try to understand it. The output on my system is as given
below. It may differ on your system:</p>
<div class="highlight-python"><div class="highlight"><pre>3 8
5 8
3 5
115
D
134514119
10
</pre></div>
</div>
<p>First <code class="docutils literal"><span class="pre">printf</span></code> is correct as expected. The second line causes undefined
behavior. You may think it is the previous 8 but believe me it is not guaranteed
that it will always the case. Ii is <code class="docutils literal"><span class="pre">UNDEFINED</span></code>. Third <code class="docutils literal"><span class="pre">printf</span></code> is also fine
in the sense that extra argument is ignored. Fourth and fifth are normal. Sixth
is again a big problem. You are trying to print a decimal integer while argument
is a character string. There is no way for compiler to determine that what
should be printed which will fit on standards. Now we will have to take a look
at all possible format specifier and their meanings. You have seen most of them
so this is more for a reference. I have taken following from
<a class="reference external" href="http://www3.opengroup.org">http://www3.opengroup.org</a> and modified to suit the book. In particular, I have
omitted facts related to XSI specification.</p>
<p id="index-2">A full detail of all conversion specification is given in specification at
<a class="reference internal" href="../stdio/#id29"><span>The fprintf function</span></a> <span class="math">\(\S(\text{iso.7.21.6.1})\)</span>, which lists <code class="docutils literal"><span class="pre">fprintf</span></code> function
but conversion specifiers are same as <code class="docutils literal"><span class="pre">printf</span></code>.</p>
<p>In real-world most of the time the conversion specifiers are kept simple. Given
below is a sample program showing some of the things given above:</p>
<p>I suggest you to read the desciption of conversion specifiers and experiment
with various parameters to get different kind of output.</p>
</div>
<div class="section" id="scanf">
<span id="index-3"></span><h2>3.3. scanf<a class="headerlink" href="#scanf" title="Permalink to this headline">¶</a></h2>
<p>The prototype of <code class="docutils literal"><span class="pre">scanf</span></code> is given below which is very similar to <code class="docutils literal"><span class="pre">printf</span></code>.</p>
<div class="highlight-c"><div class="highlight"><pre><span class="kt">int</span> <span class="nf">scanf</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="kr">restrict</span> <span class="n">format</span><span class="p">,</span> <span class="p">...);</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">scanf()</span></code> is sister of <code class="docutils literal"><span class="pre">printf()</span></code>. They work in tandem. As its name says
scan function it scans <code class="docutils literal"><span class="pre">stdin</span></code> or keyboard for input. Its signature is same
as that of <code class="docutils literal"><span class="pre">printf()</span></code>. It raeds bytes from keyboard input, interprets them
according to format string. It also expects a set of pointer arguments as
opposed to values for <code class="docutils literal"><span class="pre">printf()</span></code>. The pointers indicate where the interpreted
data from the input will be stored. The result is <code class="docutils literal"><span class="pre">UNDEFINED</span></code> if there are
less number of pointer arguments than the number of conversion specifers in
format string. Excess arguments will be evaluated but ignored. The format string
can have only white-space characters or an ordinary character (neither &#8216;%&#8217; nor a
white-space character) or a conversion specification.</p>
<p>The full detail of conversion specification can be found at <a class="reference internal" href="../stdio/#id46"><span>The fscanf function</span></a>
<span class="math">\(\S(\text{iso.7.12.6.2})\)</span> which lists <code class="docutils literal"><span class="pre">fscanf</span></code> function but conversion
specifiers are same for both.</p>
<p>Time for some code. You have already seen many examples of scanf so I will
just explain some concepts here. Consider the following program:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="c1">// Author: Shiv S. Dayal</span>
<span class="c1">// Description: Demo of string input</span>

<span class="cp">#include &lt;stdio.h&gt;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="kt">char</span> <span class="n">str</span><span class="p">[</span><span class="mi">128</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>

  <span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%s&quot;</span><span class="p">,</span> <span class="n">str</span><span class="p">);</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;You entered:</span><span class="se">\n</span><span class="s">%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">str</span><span class="p">);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>and the output is:</p>
<div class="highlight-python"><div class="highlight"><pre>Hi! My name is Shiv.
You entered:
Hi!
</pre></div>
</div>
<p>It is certainly not the corect output. We had expected to see like: &#8220;Hi! My name
is Shiv.&#8221;. What happend to input string after &#8220;Hi!&#8221;. Well, in a form given above
for <code class="docutils literal"><span class="pre">scanf()</span></code> it will stop taking input after white-space for character
strings. For numerics it does not matter as it does not match the format. For
characters it is character-by-character so no confusion either. So what if you
want to have the entire string including white-spaces. Use [^n] as given below:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="c1">// Author: Shiv S. Dayal</span>
<span class="c1">// Description: Corrected demo of string input</span>

<span class="cp">#include &lt;stdio.h&gt;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="kt">char</span> <span class="n">str</span><span class="p">[</span><span class="mi">128</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>

  <span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%[^</span><span class="se">\n</span><span class="s">]s&quot;</span><span class="p">,</span> <span class="n">str</span><span class="p">);</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;You entered:</span><span class="se">\n</span><span class="s">%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">str</span><span class="p">);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>and the output is:</p>
<div class="highlight-python"><div class="highlight"><pre>Hi! My name is Shiv.
You entered:
Hi! My name is Shiv.
</pre></div>
</div>
<p>What if you want to filter a string based on certain patterns. For example, a
charcater string does not contain more that a single space, English alphabets,
period and digits. To scan such a string you can define a pttern as program
given below shows:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="c1">// Author: Shiv. S Dayal</span>
<span class="c1">// Description: Demo of []</span>

<span class="cp">#include &lt;stdio.h&gt;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="kt">char</span> <span class="n">c</span><span class="p">[</span><span class="mi">100</span><span class="p">]</span><span class="o">=</span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>

  <span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%[ A-Za-z0-9!.]&quot;</span><span class="p">,</span> <span class="n">c</span><span class="p">);</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">c</span><span class="p">);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>and the output is:</p>
<div class="highlight-python"><div class="highlight"><pre>Hi! My name is Shiv! My phone no. is 1234. %^$&amp;*
Hi! My name is Shiv! My phone no. is 1234.
</pre></div>
</div>
<p>There is also a major problem associated with input and that comes when you have
characters involved. Consider the following program:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="c1">// Author: Shiv S. Dayal</span>
<span class="c1">// Description: Demo of scanf() function</span>

<span class="cp">#include &lt;stdio.h&gt;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="kt">int</span>   <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kt">float</span> <span class="n">f</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>
  <span class="kt">char</span>  <span class="n">c1</span> <span class="o">=</span> <span class="sc">&#39;\0&#39;</span><span class="p">;</span>
  <span class="kt">char</span>  <span class="n">c2</span> <span class="o">=</span> <span class="sc">&#39;\0&#39;</span><span class="p">;</span>
  <span class="kt">char</span>  <span class="n">c3</span> <span class="o">=</span> <span class="sc">&#39;\0&#39;</span><span class="p">;</span>

  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Enter an integer, a float and three character one by one:</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

  <span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%d&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">i</span><span class="p">);</span>
  <span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%f&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">f</span><span class="p">);</span>
  <span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%c&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">c1</span><span class="p">);</span>
  <span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%c&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">c2</span><span class="p">);</span>
  <span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%c&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">c3</span><span class="p">);</span>

  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;You entered</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">f</span><span class="p">);</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%c</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">c1</span><span class="p">);</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%c</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">c2</span><span class="p">);</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%c</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">c3</span><span class="p">);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>and the output is:</p>
<div class="highlight-python"><div class="highlight"><pre>2
3.4
s
You entered
2
3.400000


s
</pre></div>
</div>
<p>What is happening here is that newline entered by our RET key is getting
assigned to <code class="docutils literal"><span class="pre">c1</span></code> and <code class="docutils literal"><span class="pre">c3</span></code>. That is why the program accepted only second
character. The enter after <code class="docutils literal"><span class="pre">float</span> <span class="pre">f;</span></code> was assigned to <code class="docutils literal"><span class="pre">c1</span></code> and the character
entered to <code class="docutils literal"><span class="pre">c2</span></code> and then the RET newline to <code class="docutils literal"><span class="pre">c3</span></code>. There is a very simple way
to recover from this:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="c1">// Author: Shiv S. Dayal</span>
<span class="c1">// Description: Demo of scanf() function</span>

<span class="cp">#include &lt;stdio.h&gt;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="kt">int</span>   <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kt">float</span> <span class="n">f</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>
  <span class="kt">char</span>  <span class="n">c1</span> <span class="o">=</span> <span class="sc">&#39;\0&#39;</span><span class="p">;</span>
  <span class="kt">char</span>  <span class="n">c2</span> <span class="o">=</span> <span class="sc">&#39;\0&#39;</span><span class="p">;</span>
  <span class="kt">char</span>  <span class="n">c3</span> <span class="o">=</span> <span class="sc">&#39;\0&#39;</span><span class="p">;</span>

  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Enter an integer, a float and three character one by one:</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
  <span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%d&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">i</span><span class="p">);</span>
  <span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%f&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">f</span><span class="p">);</span>
  <span class="n">scanf</span><span class="p">(</span><span class="s">&quot; %c&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">c1</span><span class="p">);</span>
  <span class="n">scanf</span><span class="p">(</span><span class="s">&quot; %c&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">c2</span><span class="p">);</span>
  <span class="n">scanf</span><span class="p">(</span><span class="s">&quot; %c&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">c3</span><span class="p">);</span>

  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">f</span><span class="p">);</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%c</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">c1</span><span class="p">);</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%c</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">c2</span><span class="p">);</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%c</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">c3</span><span class="p">);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The whitespace character shown will eat up all the white-space given after the
previous input. This concludes our discussion on <code class="docutils literal"><span class="pre">printf()</span></code> and <code class="docutils literal"><span class="pre">scanf()</span></code>.
Now we will move to another set of i/o functions which take character string
without filtering and print it to screen without filtering. What I am going to
discuss are <code class="docutils literal"><span class="pre">gets(),</span> <span class="pre">fgets(),</span> <span class="pre">puts()</span></code> and <code class="docutils literal"><span class="pre">fputs()</span></code>.</p>
</div>
<div class="section" id="character-string-i-o-functions">
<span id="index-4"></span><h2>3.4. Character String I/O Functions<a class="headerlink" href="#character-string-i-o-functions" title="Permalink to this headline">¶</a></h2>
<p>These functions are very simple compared to <code class="docutils literal"><span class="pre">printf()</span></code> and <code class="docutils literal"><span class="pre">scanf()</span></code>. They
take a pointer to a character array or a character pointer and fill it with
input or print it to monitor. Note that <code class="docutils literal"><span class="pre">gets()</span></code> and <code class="docutils literal"><span class="pre">puts()</span></code> work only with
<code class="docutils literal"><span class="pre">stdin</span></code> and <code class="docutils literal"><span class="pre">stdout</span></code> respectively while <code class="docutils literal"><span class="pre">fgets()</span></code> and <code class="docutils literal"><span class="pre">fputs()</span></code> work
with <code class="docutils literal"><span class="pre">FILE</span></code> streams. They can read and write to file streams that is. Here is
a sample program:</p>
<div class="highlight-c"><div class="highlight"><pre><span class="c1">// Author: Shiv S. Dayal</span>
<span class="c1">// Description : Demo of string i/o</span>
<span class="cp">#include &lt;stdio.h&gt;</span>
<span class="cp">#include &lt;stdlib.h&gt;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="kt">char</span> <span class="n">cStack</span><span class="p">[</span><span class="mi">1024</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
  <span class="kt">char</span> <span class="o">*</span><span class="n">cHeap</span> <span class="o">=</span> <span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="mi">1024</span><span class="p">));</span>

  <span class="n">gets</span><span class="p">(</span><span class="n">cStack</span><span class="p">);</span>
  <span class="n">puts</span><span class="p">(</span><span class="n">cStack</span><span class="p">);</span>

  <span class="n">cHeap</span> <span class="o">=</span> <span class="n">fgets</span><span class="p">(</span><span class="n">cHeap</span><span class="p">,</span> <span class="mi">1024</span><span class="p">,</span> <span class="n">stdin</span><span class="p">);</span>
  <span class="n">fputs</span><span class="p">(</span><span class="n">cHeap</span><span class="p">,</span> <span class="n">stdout</span><span class="p">);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>and the output is:</p>
<div class="highlight-python"><div class="highlight"><pre>Hi!
Hi!
Hello!
Hello!
</pre></div>
</div>
<p>First <code class="docutils literal"><span class="pre">&quot;Hi!&quot;</span></code> and <code class="docutils literal"><span class="pre">&quot;Hello!&quot;</span></code> are keyboard inputs. Do not worry about array
and pointer syntax at the moment. Just see the difference between function
calls. Their is a problem with <code class="docutils literal"><span class="pre">gets()</span></code> that it can cause buffer overflow. If
input is bigger than 1024 bytes including the null terminator then buffer
overflow will happen. Note how you can prevent it with <code class="docutils literal"><span class="pre">fgets()</span></code> by specifying
the number of characters you want to read. Rest of input will be ignored by
<code class="docutils literal"><span class="pre">fgets()</span></code>. This is a security hole and therefore you should never ever use
<code class="docutils literal"><span class="pre">gets()</span></code>.</p>
<p>Time for single character input/output.</p>
</div>
<div class="section" id="single-character-i-o">
<span id="index-5"></span><h2>3.5. Single Character I/O<a class="headerlink" href="#single-character-i-o" title="Permalink to this headline">¶</a></h2>
<p>There are several functions for single character i/o. They are <code class="docutils literal"><span class="pre">getc(),</span> <span class="pre">putc(),</span>
<span class="pre">getchar(),</span> <span class="pre">putchar(),</span> <span class="pre">fgetc()</span></code> and <code class="docutils literal"><span class="pre">fputc()</span></code>. Apart from <code class="docutils literal"><span class="pre">getchar()</span></code> and
<code class="docutils literal"><span class="pre">putchar()</span></code> rest can do any FILE stream-based i/o. Let us see them as they are
mostly trivial.</p>
<div class="highlight-c"><div class="highlight"><pre>// Author: Shiv S. Dayal
// Description: Single character funciton demo
#include&lt;stdio.h&gt;

int main()
{
  char c =&#39;&#39;;

  c = getchar();
  putchar(c);

  c = getchar();
  putchar(c);

  c = fgetc(stdin);
  fputc(c, stdout);

  c = getchar();
  putchar(c);

  c = getc(stdin);
  putc(c, stdout);

  return 0;
}
</pre></div>
</div>
<p>and the output is:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="mi">4</span>
<span class="mi">4</span>
<span class="mi">5</span>
<span class="mi">5</span>
<span class="mi">6</span>
<span class="mi">6</span>
</pre></div>
</div>
<p>The first 4, 5 and 6 were keyboard inputs. Note the use of extra <code class="docutils literal"><span class="pre">getchar()</span></code>
and <code class="docutils literal"><span class="pre">putchar()</span></code> to handle the situation we faced during <code class="docutils literal"><span class="pre">scanf()</span></code>.</p>
<p>So we have seen many functions and programs for console i/o. File i/o is still
there and will be covered later. This chapter ends here. See you in the next
chapter with operators and expressions.:-)</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../oae/" class="btn btn-neutral float-right" title="4. Operators and Expressions" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../basics/" class="btn btn-neutral" title="2. Basics of C" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2012-2015, Shiv S. Dayal.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>